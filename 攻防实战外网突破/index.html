<!DOCTYPE html>
<html lang="zh-CN">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noodp" />
    <title>攻防实战外网突破 - bysec</title><meta name="Description" content="bysec个人博客"><meta property="og:url" content="http://localhost:1313/%E6%94%BB%E9%98%B2%E5%AE%9E%E6%88%98%E5%A4%96%E7%BD%91%E7%AA%81%E7%A0%B4/">
  <meta property="og:site_name" content="bysec">
  <meta property="og:title" content="攻防实战外网突破">
  <meta property="og:description" content="bysec个人博客">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-11T18:24:29+08:00">
    <meta property="article:modified_time" content="2024-02-11T18:24:29+08:00">
    <meta property="article:tag" content="信息收集">
    <meta property="og:image" content="http://localhost:1313/logo.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/logo.png">
  <meta name="twitter:title" content="攻防实战外网突破">
  <meta name="twitter:description" content="bysec个人博客">
<meta name="application-name" content="bysec">
<meta name="apple-mobile-web-app-title" content="bysec">

<meta name="theme-color" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="icon" href="https://q.qlogo.cn/headimg_dl?dst_uin=1726946232&amp;spec=640"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="canonical" href="http://localhost:1313/%E6%94%BB%E9%98%B2%E5%AE%9E%E6%88%98%E5%A4%96%E7%BD%91%E7%AA%81%E7%A0%B4/" /><link rel="prev" href="http://localhost:1313/%E4%BB%BB%E6%84%8F%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98%E6%80%9D%E8%B7%AF/" /><link rel="next" href="http://localhost:1313/%E6%94%AF%E4%BB%98%E7%B1%BB%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/fontawesome-free/all.min.css">
        <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/animate/animate.min.css">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "攻防实战外网突破",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/localhost:1313\/%E6%94%BB%E9%98%B2%E5%AE%9E%E6%88%98%E5%A4%96%E7%BD%91%E7%AA%81%E7%A0%B4\/"
        },"genre": "posts","keywords": "信息收集","wordcount":  3662 ,
        "url": "http:\/\/localhost:1313\/%E6%94%BB%E9%98%B2%E5%AE%9E%E6%88%98%E5%A4%96%E7%BD%91%E7%AA%81%E7%A0%B4\/","datePublished": "2024-02-11T18:24:29+08:00","dateModified": "2024-02-11T18:24:29+08:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "bysec"
            },"description": ""
    }
    </script></head>

<body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">
        function setTheme(theme) {document.body.setAttribute('theme', theme); document.documentElement.style.setProperty('color-scheme', theme === 'light' ? 'light' : 'dark');}
        function saveTheme(theme) {window.localStorage && localStorage.setItem('theme', theme);}
        function getMeta(metaName) {const metas = document.getElementsByTagName('meta'); for (let i = 0; i < metas.length; i++) if (metas[i].getAttribute('name') === metaName) return metas[i]; return '';}
        if (window.localStorage && localStorage.getItem('theme')) {let theme = localStorage.getItem('theme');theme === 'light' || theme === 'dark' || theme === 'black' ? setTheme(theme) : (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? setTheme('dark') : setTheme('light')); } else { if ('auto' === 'light' || 'auto' === 'dark' || 'auto' === 'black') setTheme('auto'), saveTheme('auto'); else saveTheme('auto'), window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? setTheme('dark') : setTheme('light');}
        let metaColors = {'light': '#f8f8f8','dark': '#252627','black': '#000000'}
        getMeta('theme-color').content = metaColors[document.body.getAttribute('theme')];
    </script>
    <div id="back-to-top"></div>
    <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="bysec">bysec</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/"><i class='fa-fw fas fa-home'></i> 首页 </a><a class="menu-item" href="/posts/"><i class='fa-fw fas fa-archive'></i> 归档 </a><a class="menu-item" href="/categories/"><i class='fa-fw fas fa-folder-open'></i> 分类 </a><a class="menu-item" href="/tags/"><i class='fa-fw fas fa-tags'></i> 标签 </a><a class="menu-item" href="/link/"><i class='fa-fw fas fa-link'></i> 友链 </a><a class="menu-item" href="/about/"><i class='fa-fw fas fa-comment-dots'></i> 关于 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="#" onclick="return false;" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" onclick="return false;" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="#" onclick="return false;" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="bysec">bysec</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="#" onclick="return false;" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" onclick="return false;" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="#" onclick="return false;" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/" title=""><i class='fa-fw fas fa-home'></i>首页</a><a class="menu-item" href="/posts/" title=""><i class='fa-fw fas fa-archive'></i>归档</a><a class="menu-item" href="/categories/" title=""><i class='fa-fw fas fa-folder-open'></i>分类</a><a class="menu-item" href="/tags/" title=""><i class='fa-fw fas fa-tags'></i>标签</a><a class="menu-item" href="/link/" title=""><i class='fa-fw fas fa-link'></i>友链</a><a class="menu-item" href="/about/" title=""><i class='fa-fw fas fa-comment-dots'></i>关于</a><a href="#" onclick="return false;" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
            <div class="container"><div class="toc" id="toc-auto">
        <h2 class="toc-title">目录</h2>
        <div class="toc-content" id="toc-content-auto"><nav id="TableOfContents">
  <ul>
    <li><a href="#1供应链">1、供应链</a></li>
    <li><a href="#11heapdump泄露">1.1、heapdump泄露</a></li>
    <li><a href="#12微信小程序接口未授权">1.2、微信小程序接口未授权</a>
      <ul>
        <li><a href="#121微信小程序解包">1.2.1、微信小程序解包</a>
          <ul>
            <li><a href="#1211获取wxapkg文件">1.2.1.1、获取wxapkg文件</a></li>
            <li><a href="#1212解密操作">1.2.1.2、解密操作</a></li>
            <li><a href="#1212解包操作">1.2.1.2、解包操作</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#13web程序越权">1.3、web程序越权</a></li>
    <li><a href="#14公众号">1.4、公众号</a></li>
    <li><a href="#2云原生安全">2、云原生安全</a></li>
    <li><a href="#21harbor-镜像仓库">2.1、Harbor 镜像仓库</a></li>
    <li><a href="#22疑似后门">2.2、疑似后门</a></li>
    <li><a href="#23docker未授权">2.3、docker未授权</a>
      <ul>
        <li><a href="#231-registry-api未授权访问">2.3.1、 registry api未授权访问</a></li>
        <li><a href="#232-docker-remote-api未授权访问">2.3.2、 Docker Remote API未授权访问</a></li>
      </ul>
    </li>
    <li><a href="#24nacos">2.4、Nacos</a>
      <ul>
        <li><a href="#241jasypt加密">2.4.1、Jasypt加密</a></li>
      </ul>
    </li>
    <li><a href="#3nday">3、Nday</a></li>
    <li><a href="#31yongyounc-jsinvoke-rce漏洞">3.1、yongyouNC jsInvoke rce漏洞</a>
      <ul>
        <li><a href="#311certutil">3.1.1、certutil</a></li>
      </ul>
    </li>
    <li><a href="#32若依二开">3.2、若依二开</a></li>
    <li><a href="#33shiro">3.3、shiro</a></li>
  </ul>
</nav></div>
    </div><script>document.getElementsByTagName("main")[0].setAttribute("pageStyle", "normal")</script><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC", "true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">攻防实战外网突破</h1><div class="post-meta">
            <div class="post-meta-line">
                <span class="post-author"><i class="author fas fa-user-circle fa-fw"></i><a href="https://www.bysec.cn/" title="Author" target="_blank" rel="noopener noreferrer author" class="author">bysec</a>
                </span>&nbsp;<span class="post-category">收录于 </span>&nbsp;<span class="post-category">类别 <a href="/categories/%E5%AD%A6%E4%B9%A0/"><i class="far fa-folder fa-fw"></i>学习</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2024-02-11">2024-02-11</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime="2024-02-11">2024-02-11</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 3662 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 8 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#1供应链">1、供应链</a></li>
    <li><a href="#11heapdump泄露">1.1、heapdump泄露</a></li>
    <li><a href="#12微信小程序接口未授权">1.2、微信小程序接口未授权</a>
      <ul>
        <li><a href="#121微信小程序解包">1.2.1、微信小程序解包</a>
          <ul>
            <li><a href="#1211获取wxapkg文件">1.2.1.1、获取wxapkg文件</a></li>
            <li><a href="#1212解密操作">1.2.1.2、解密操作</a></li>
            <li><a href="#1212解包操作">1.2.1.2、解包操作</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#13web程序越权">1.3、web程序越权</a></li>
    <li><a href="#14公众号">1.4、公众号</a></li>
    <li><a href="#2云原生安全">2、云原生安全</a></li>
    <li><a href="#21harbor-镜像仓库">2.1、Harbor 镜像仓库</a></li>
    <li><a href="#22疑似后门">2.2、疑似后门</a></li>
    <li><a href="#23docker未授权">2.3、docker未授权</a>
      <ul>
        <li><a href="#231-registry-api未授权访问">2.3.1、 registry api未授权访问</a></li>
        <li><a href="#232-docker-remote-api未授权访问">2.3.2、 Docker Remote API未授权访问</a></li>
      </ul>
    </li>
    <li><a href="#24nacos">2.4、Nacos</a>
      <ul>
        <li><a href="#241jasypt加密">2.4.1、Jasypt加密</a></li>
      </ul>
    </li>
    <li><a href="#3nday">3、Nday</a></li>
    <li><a href="#31yongyounc-jsinvoke-rce漏洞">3.1、yongyouNC jsInvoke rce漏洞</a>
      <ul>
        <li><a href="#311certutil">3.1.1、certutil</a></li>
      </ul>
    </li>
    <li><a href="#32若依二开">3.2、若依二开</a></li>
    <li><a href="#33shiro">3.3、shiro</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><blockquote>
<p><em>转载自： <a href="https://forum.butian.net/share/2442" target="_blank" rel="noopener noreferrer">https://forum.butian.net/share/2442</a></em></p>
</blockquote>
<p>在经历了多年的攻防对抗之后，大量目标单位逐渐认识到安全防护的重要性。因此，他们已采取措施尽可能收敛资产暴露面，并加倍部署各种安全设备。但安全防护注重全面性，具有明显的短板&hellip;</p>
<h2 id="1供应链" class="headerLink">
    <a href="#1%e4%be%9b%e5%ba%94%e9%93%be" class="header-mark"></a>1、供应链</h2><p>在经历了多年的攻防对抗之后，大量目标单位逐渐认识到安全防护的重要性。因此，他们已采取措施尽可能收敛资产暴露面，并加倍部署各种安全设备。但安全防护注重全面性，具有明显的短板效应，一处出现短板，整个防护体系就可能瞬间崩溃。而目标单位的供应链往往是这些薄弱点的集中体现。这些供应链不仅暴露在外，而且由于复杂的关系，使得对它们的监控和管理变得更为困难。因此，攻击团队通常会选择从供应链着手，以一种迂回的方式绕过目标单位强大的防御体系，获得对目标单位的控制权限。</p>
<p>通过在搜索引擎上搜索&quot;系统名称&quot;目标单位</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000yLlD8267BPI.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000yLlD8267BPI.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000yLlD8267BPI.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000000yLlD8267BPI.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000000yLlD8267BPI.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000000yLlD8267BPI.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000000yLlD8267BPI.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000000yLlD8267BPI.jpg">
    </a><br>
找到相关的供应商信息，通过对供应商进行攻击，获取目标单位的数据及权限。!</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000wTW8J2Hucix.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000wTW8J2Hucix.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000wTW8J2Hucix.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000000wTW8J2Hucix.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000000wTW8J2Hucix.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000000wTW8J2Hucix.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000000wTW8J2Hucix.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000000wTW8J2Hucix.jpg">
    </a></p>
<h2 id="11heapdump泄露" class="headerLink">
    <a href="#11heapdump%e6%b3%84%e9%9c%b2" class="header-mark"></a>1.1、heapdump泄露</h2><p>通过对供应商资产进行渗透，发现某资产admin目录下存在heapdump文件泄露</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000iQr890eIZWu.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000iQr890eIZWu.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000iQr890eIZWu.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000000iQr890eIZWu.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000000iQr890eIZWu.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000000iQr890eIZWu.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000000iQr890eIZWu.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000000iQr890eIZWu.jpg">
    </a></p>
<p>对于heapdump的利用方式这里就不太赘述，有许多文章对其原理和利用都进行了深入的研究，特定情况下还可以直接进行RCE，这里泄露了大量敏感信息，密码信息加入密码本</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000029zWMN42V48l.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000029zWMN42V48l.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000029zWMN42V48l.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD0000029zWMN42V48l.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD0000029zWMN42V48l.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD0000029zWMN42V48l.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD0000029zWMN42V48l.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD0000029zWMN42V48l.jpg">
    </a></p>
<p>登录MinIO，发现大量所属目标单位的敏感信息，也存在其它单位的敏感信息</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004OEn1a2PDujL.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004OEn1a2PDujL.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004OEn1a2PDujL.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000004OEn1a2PDujL.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000004OEn1a2PDujL.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000004OEn1a2PDujL.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000004OEn1a2PDujL.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000004OEn1a2PDujL.jpg">
    </a></p>
<p>登录Nacos，大量配置文件，密码信息加入密码本![]</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004OVBiJ1sNmLc.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004OVBiJ1sNmLc.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004OVBiJ1sNmLc.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000004OVBiJ1sNmLc.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000004OVBiJ1sNmLc.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000004OVBiJ1sNmLc.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000004OVBiJ1sNmLc.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000004OVBiJ1sNmLc.jpg">
    </a><br>
登录OSS，发现大量所属目标单位的敏感信息</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000035H1GN2AaPou.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000035H1GN2AaPou.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000035H1GN2AaPou.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD0000035H1GN2AaPou.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD0000035H1GN2AaPou.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD0000035H1GN2AaPou.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD0000035H1GN2AaPou.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD0000035H1GN2AaPou.jpg">
    </a></p>
<h2 id="12微信小程序接口未授权" class="headerLink">
    <a href="#12%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e6%8e%a5%e5%8f%a3%e6%9c%aa%e6%8e%88%e6%9d%83" class="header-mark"></a>1.2、微信小程序接口未授权</h2><h3 id="121微信小程序解包" class="headerLink">
    <a href="#121%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%a7%a3%e5%8c%85" class="header-mark"></a>1.2.1、微信小程序解包</h3><p>想要对微信小程序进行解包操作，首先是要获取目标小程序的wxapkg文件。wxapkg文件是微信小程序的安装包文件格式，用于将小程序的代码、资源以及其他必要的文件打包成一个单独的文件。但是Windows环境下的wxapkg文件中的js代码和资源文件一般是被加密的，需要使用专门设计的解密工具先进行解密，再进行解包操作，获取文件内容。iOS和Android平台下可直接进行解包操作。</p>
<h4 id="1211获取wxapkg文件" class="headerLink">
    <a href="#1211%e8%8e%b7%e5%8f%96wxapkg%e6%96%87%e4%bb%b6" class="header-mark"></a>1.2.1.1、获取wxapkg文件</h4><p>在获取wxapkg文件时，最好将文件夹中的文件先删除，然后再重新打开小程序，防止其它文件干扰</p>
<p>iOS wxapkg 文件存放路径为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">mobile</span><span class="o">/</span><span class="n">Containers</span><span class="o">/</span><span class="n">Data</span><span class="o">/</span><span class="n">Application</span><span class="o">/</span><span class="p">{</span><span class="err">系统</span><span class="n">UUID</span><span class="p">}</span><span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">WechatPrivate</span><span class="o">/</span><span class="p">{</span><span class="n">user哈希值</span><span class="p">}</span><span class="o">/</span><span class="n">WeApp</span><span class="o">/</span><span class="n">LocalCache</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="p">{</span><span class="err">小程序的</span><span class="n">AppID</span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Android wxapkg 文件存放路径为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">/data/data/com.tencent.mm/MicroMsg/{user哈希值}/appbrand/pkg/
</span></span></code></pre></td></tr></table>
</div>
</div><p>Windows wxapkg 文件存放路径为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">C:\Users\{系统用户名}\Documents\WeChat Files\Applet\{小程序的AppID}\
</span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000lTGIx3lEYaF.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000lTGIx3lEYaF.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000lTGIx3lEYaF.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000000lTGIx3lEYaF.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000000lTGIx3lEYaF.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000000lTGIx3lEYaF.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000000lTGIx3lEYaF.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000000lTGIx3lEYaF.jpg">
    </a></p>
<h4 id="1212解密操作" class="headerLink">
    <a href="#1212%e8%a7%a3%e5%af%86%e6%93%8d%e4%bd%9c" class="header-mark"></a>1.2.1.2、解密操作</h4><p>下面两个github项目都可以进行解密操作</p>
<p><a href="https://github.com/superdashu/pc_wxapkg_decrypt_python" target="_blank" rel="noopener noreferrer">https://github.com/superdashu/pc_wxapkg_decrypt_python</a><br>
<a href="https://github.com/BlackTrace/pc_wxapkg_decrypt" target="_blank" rel="noopener noreferrer">https://github.com/BlackTrace/pc_wxapkg_decrypt</a></p>
<p>解密原理</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002c4qJ74NrUgN.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002c4qJ74NrUgN.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002c4qJ74NrUgN.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000002c4qJ74NrUgN.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000002c4qJ74NrUgN.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000002c4qJ74NrUgN.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000002c4qJ74NrUgN.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000002c4qJ74NrUgN.jpg">
    </a><br>
成功解密</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000A6DuV2j9l9a.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000A6DuV2j9l9a.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000A6DuV2j9l9a.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000000A6DuV2j9l9a.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000000A6DuV2j9l9a.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000000A6DuV2j9l9a.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000000A6DuV2j9l9a.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000000A6DuV2j9l9a.jpg">
    </a></p>
<h4 id="1212解包操作" class="headerLink">
    <a href="#1212%e8%a7%a3%e5%8c%85%e6%93%8d%e4%bd%9c" class="header-mark"></a>1.2.1.2、解包操作</h4><p>国光大佬提供的工具下载链接</p>
<p><a href="https://sqlsec.lanzoub.com/i1NEP0mx694f" target="_blank" rel="noopener noreferrer">https://sqlsec.lanzoub.com/i1NEP0mx694f</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">node wuWxapkg.js 1.wxapkg
</span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000s8kYv2fYb69.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000s8kYv2fYb69.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000s8kYv2fYb69.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000000s8kYv2fYb69.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000000s8kYv2fYb69.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000000s8kYv2fYb69.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000000s8kYv2fYb69.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000000s8kYv2fYb69.jpg">
    </a></p>
<p>对小程序进行解包操作，获取到前端JS代码后中，从中进行提取获得接口</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000017EhQQ3qfbfx.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000017EhQQ3qfbfx.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000017EhQQ3qfbfx.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD0000017EhQQ3qfbfx.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD0000017EhQQ3qfbfx.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD0000017EhQQ3qfbfx.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD0000017EhQQ3qfbfx.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD0000017EhQQ3qfbfx.jpg">
    </a></p>
<p>直接访问目标接口，前端页面虽然显示初始化失败</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004B12ox0ETp3W.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004B12ox0ETp3W.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004B12ox0ETp3W.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000004B12ox0ETp3W.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000004B12ox0ETp3W.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000004B12ox0ETp3W.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000004B12ox0ETp3W.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000004B12ox0ETp3W.jpg">
    </a><br>
但流量包中已获取数据，近千万条目标单位敏感信息</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003MsHJo2x2Zub.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003MsHJo2x2Zub.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003MsHJo2x2Zub.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000003MsHJo2x2Zub.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000003MsHJo2x2Zub.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000003MsHJo2x2Zub.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000003MsHJo2x2Zub.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000003MsHJo2x2Zub.jpg">
    </a></p>
<h2 id="13web程序越权" class="headerLink">
    <a href="#13web%e7%a8%8b%e5%ba%8f%e8%b6%8a%e6%9d%83" class="header-mark"></a>1.3、web程序越权</h2><p>通过上述收集到的密码，撞密码撞出一个账号，但是此账号为最低权限，无任何操作权限，点击搜索组织架构，此时无任何返回信息<br>
<a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003rLQUp1Dh2T4.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003rLQUp1Dh2T4.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003rLQUp1Dh2T4.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000003rLQUp1Dh2T4.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000003rLQUp1Dh2T4.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000003rLQUp1Dh2T4.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000003rLQUp1Dh2T4.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000003rLQUp1Dh2T4.jpg">
    </a></p>
<p>抓包将parentId和orgLevel去除，再发包，即可越权看到全员组织架构</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000Y24eO2qrIJD.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000Y24eO2qrIJD.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000Y24eO2qrIJD.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000000Y24eO2qrIJD.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000000Y24eO2qrIJD.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000000Y24eO2qrIJD.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000000Y24eO2qrIJD.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000000Y24eO2qrIJD.jpg">
    </a></p>
<p>点击修改密码，然后将上述获取到的roleId添加进去，即可获取全部权限</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000032Z12p4bxO2o.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000032Z12p4bxO2o.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000032Z12p4bxO2o.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD0000032Z12p4bxO2o.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD0000032Z12p4bxO2o.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD0000032Z12p4bxO2o.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD0000032Z12p4bxO2o.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD0000032Z12p4bxO2o.jpg">
    </a></p>
<p>获取到大量数据</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD0000035hO3V2JUpWX.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD0000035hO3V2JUpWX.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD0000035hO3V2JUpWX.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD0000035hO3V2JUpWX.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD0000035hO3V2JUpWX.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD0000035hO3V2JUpWX.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD0000035hO3V2JUpWX.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD0000035hO3V2JUpWX.jpg">
    </a></p>
<h2 id="14公众号" class="headerLink">
    <a href="#14%e5%85%ac%e4%bc%97%e5%8f%b7" class="header-mark"></a>1.4、公众号</h2><p>js泄露密码，密码可撞库目标单位公众号</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003qIips0FxJqd.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003qIips0FxJqd.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003qIips0FxJqd.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000003qIips0FxJqd.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000003qIips0FxJqd.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000003qIips0FxJqd.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000003qIips0FxJqd.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000003qIips0FxJqd.jpg">
    </a></p>
<h2 id="2云原生安全" class="headerLink">
    <a href="#2%e4%ba%91%e5%8e%9f%e7%94%9f%e5%ae%89%e5%85%a8" class="header-mark"></a>2、云原生安全</h2><p>容器化部署和微服务架构为应用程序开发和部署提供了更好的灵活性、可伸缩性、可维护性和性能，受到了越来越多厂商的使用，新的应用就会引入新的攻击面，如容器逃逸、服务间攻击、API滥用等。攻击者可以利用这些新的入口点来攻击应用程序和数据。并且在云原生环境下管理用户和服务的身份验证和授权变得更加复杂。许多应用开发商在追求容器化和云原生架构的便利性和效率时，安全性常常被忽视或放在次要位置。这就直接导致了云原生环境的脆弱，容易受到各种安全威胁和攻击。</p>
<h2 id="21harbor-镜像仓库" class="headerLink">
    <a href="#21harbor-%e9%95%9c%e5%83%8f%e4%bb%93%e5%ba%93" class="header-mark"></a>2.1、Harbor 镜像仓库</h2><p>Harbor是一个开源的容器镜像仓库管理器，旨在帮助组织存储、管理和分发Docker容器镜像，但是Harbor存在一个充满争议的“漏洞”：任意用户能够直接获取public的镜像。</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000002gnM4C0WKQ6a.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000002gnM4C0WKQ6a.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000002gnM4C0WKQ6a.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000002gnM4C0WKQ6a.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000002gnM4C0WKQ6a.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000002gnM4C0WKQ6a.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000002gnM4C0WKQ6a.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000002gnM4C0WKQ6a.jpg">
    </a></p>
<p>可以直接拉取下载镜像文件，可以利用脚本批量下载</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003Ns6MQ1d0JrW.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003Ns6MQ1d0JrW.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003Ns6MQ1d0JrW.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000003Ns6MQ1d0JrW.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000003Ns6MQ1d0JrW.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000003Ns6MQ1d0JrW.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000003Ns6MQ1d0JrW.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000003Ns6MQ1d0JrW.jpg">
    </a></p>
<h2 id="22疑似后门" class="headerLink">
    <a href="#22%e7%96%91%e4%bc%bc%e5%90%8e%e9%97%a8" class="header-mark"></a>2.2、疑似后门</h2><p>通过镜像文件获取jar包，获取配置文件等敏感信息，对jar包的class文件进行反编译，进行代码审计获取到一个类似后门的漏洞，该接口只需要使用用户名，即可登录系统后台。管理员权限配合文件上传获取服务器权限。</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004aYFHw3LUvEo.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004aYFHw3LUvEo.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004aYFHw3LUvEo.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000004aYFHw3LUvEo.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000004aYFHw3LUvEo.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000004aYFHw3LUvEo.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000004aYFHw3LUvEo.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000004aYFHw3LUvEo.jpg">
    </a></p>
<p>通过配置文件连接数据库等</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003BTLel2FPIPD.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003BTLel2FPIPD.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003BTLel2FPIPD.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000003BTLel2FPIPD.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000003BTLel2FPIPD.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000003BTLel2FPIPD.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000003BTLel2FPIPD.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000003BTLel2FPIPD.jpg">
    </a></p>
<h2 id="23docker未授权" class="headerLink">
    <a href="#23docker%e6%9c%aa%e6%8e%88%e6%9d%83" class="header-mark"></a>2.3、docker未授权</h2><h3 id="231-registry-api未授权访问" class="headerLink">
    <a href="#231-registry-api%e6%9c%aa%e6%8e%88%e6%9d%83%e8%ae%bf%e9%97%ae" class="header-mark"></a>2.3.1、 registry api未授权访问</h3><p>在 Docker Registry API 中，认证和授权通常是基于访问令牌（Access Token）或者用户名和密码的。如果未正确设置访问控制权限，即会造成未授权访问漏洞，攻击者可直接下载registry仓库的所有镜像容器。</p>
<p>访问/v2/_catalog接口即可查看全部仓库内容</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004DQh8G1VLCb1.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004DQh8G1VLCb1.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004DQh8G1VLCb1.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000004DQh8G1VLCb1.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000004DQh8G1VLCb1.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000004DQh8G1VLCb1.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000004DQh8G1VLCb1.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000004DQh8G1VLCb1.jpg">
    </a><br>
<a href="https://github.com/Soufaker/docker_v2_catalog" target="_blank" rel="noopener noreferrer">https://github.com/Soufaker/docker_v2_catalog</a></p>
<p>利用上述工具可直接下载镜像</p>
<h3 id="232-docker-remote-api未授权访问" class="headerLink">
    <a href="#232-docker-remote-api%e6%9c%aa%e6%8e%88%e6%9d%83%e8%ae%bf%e9%97%ae" class="header-mark"></a>2.3.2、 Docker Remote API未授权访问</h3><p>为了管理容器集群，Docker允许Daemon作为后台守护进程执行通过管理接口发送的Docker命令，使用参数-H 0.0.0.0:2375启动Docker Daemon时，将开放2375端口接收来自远程Docker客户端的命令。在这种情况下，2375端口被作为非加密端口暴露出来，并且不存在任何形式的身份验证，攻击者可以直接使用Docker命令连接到Docker Daemon，并对容器进行直接操作，配合根目录挂载即可实现容器逃逸。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">#查看容器 docker -H tcp://&lt;target&gt;:2375 ps -a
</span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001MHqGf3HNr4k.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001MHqGf3HNr4k.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001MHqGf3HNr4k.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000001MHqGf3HNr4k.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000001MHqGf3HNr4k.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000001MHqGf3HNr4k.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000001MHqGf3HNr4k.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000001MHqGf3HNr4k.jpg">
    </a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="c1">#挂载宿主机的根目录到容器内的mnt目录 docker -H tcp://&lt;target&gt;:2375 run -it -v /:/mnt nginx:latest /bin/bash #反弹shell echo &#39;反弹shell命令&#39; &gt;&gt; /mnt/var/spool/cron/crontabs/root</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="24nacos" class="headerLink">
    <a href="#24nacos" class="header-mark"></a>2.4、Nacos</h2><p>Nacos是一个开源的动态服务发现、配置管理和服务管理平台，它提供了注册中心、配置中心和服务管理等功能，帮助开发人员实现微服务架构中的服务注册、配置管理以及服务发现等需求。</p>
<p>作为一个开源工具，漏洞还是被披露不少的，</p>
<p><strong>未授权访问：</strong><a href="http://192.168.80.131:8848/nacos/v1/auth/users?pageNo=1&amp;pageSize=1" target="_blank" rel="noopener noreferrer">/nacos/v1/auth/users?pageNo=1&amp;pageSize=1</a> 直接查看用户</p>
<p><strong>任意用户添加</strong>：POST <a href="http://192.168.80.131:8848/nacos/v1/auth/users?pageNo=1&amp;pageSize=1" target="_blank" rel="noopener noreferrer">/nacos/v1/auth/users</a> username= &amp; password=</p>
<p><strong>任意用户密码修改</strong>：curl -X PUT &lsquo;<a href="http://127.0.0.1:8848/nacos/v1/auth/users?accessToken" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8848/nacos/v1/auth/users?accessToken</a>\=&rsquo; -H &lsquo;User-Agent:Nacos-Server&rsquo; -d &lsquo;username\=test1&amp;newPassword\=test2&rsquo;</p>
<p><strong>弱口令</strong>：nacos/nacos</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003VCB3N1SJW2d.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003VCB3N1SJW2d.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003VCB3N1SJW2d.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000003VCB3N1SJW2d.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000003VCB3N1SJW2d.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000003VCB3N1SJW2d.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000003VCB3N1SJW2d.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000003VCB3N1SJW2d.jpg">
    </a></p>
<p>通过编排密码爆破进后台，发现大量配置文件，但敏感信息均被加密</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003It9GC2vfRSr.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003It9GC2vfRSr.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003It9GC2vfRSr.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000003It9GC2vfRSr.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000003It9GC2vfRSr.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000003It9GC2vfRSr.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000003It9GC2vfRSr.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000003It9GC2vfRSr.jpg">
    </a></p>
<h3 id="241jasypt加密" class="headerLink">
    <a href="#241jasypt%e5%8a%a0%e5%af%86" class="header-mark"></a>2.4.1、Jasypt加密</h3><p>Spring 的配置文件中会有一些敏感信息，如数据库密码，因此有时我们希望将敏感信息加密，Jasypt 就是其中比较方便的工具，Jasypt 是一个 Java 库，用于简化敏感数据（如密码、API 密钥等）的加密和解密操作。</p>
<p>加密的内容需要用 ENC(..) 括起来，加密用的密码通过 jasypt.encryptor.password 指定。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">spring: datasource: username: your-username password: ENC(encrypted-password)
</span></span></code></pre></td></tr></table>
</div>
</div><p>因为必须要解密，密码就需要放在配置文件里，或者放在代码中：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1"># application.yml jasypt: encryption: password: 密码 algorithm: 加密方式
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>解密数据：使用解密器的 decrypt 方法对加密的数据进行解密操作。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">import</span> <span class="nx">org</span><span class="o">.</span><span class="nx">jasypt</span><span class="o">.</span><span class="nx">util</span><span class="o">.</span><span class="nx">text</span><span class="o">.</span><span class="nx">BasicTextEncryptor</span><span class="p">;</span> <span class="k">public</span> <span class="k">class</span> <span class="nc">DecryptionExample</span> <span class="p">{</span> <span class="k">public</span> <span class="k">static</span> <span class="nx">void</span> <span class="nx">main</span><span class="p">(</span><span class="nx">String</span><span class="p">[]</span> <span class="nx">args</span><span class="p">)</span> <span class="p">{</span> <span class="nx">String</span> <span class="nx">encryptionKey</span> <span class="o">=</span> <span class="s2">&#34;yourEncryptionKey&#34;</span><span class="p">;</span> <span class="c1">// 加密密钥 BasicTextEncryptor textEncryptor = new BasicTextEncryptor(); textEncryptor.setPassword(encryptionKey); String encryptedText = &#34;encryptedText&#34;; // 加密后的数据 String decryptedText = textEncryptor.decrypt(encryptedText); System.out.println(&#34;Decrypted Text: &#34; + decryptedText); } }
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>但是客户端加密的安全性主要依赖于客户端代码的保护和可信任性，当密码泄露后，加密也就自然失效了，在ncaos一个文件中发现jasypt加密密码，可以直接进行解密操作</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003sFzTw464lkG.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003sFzTw464lkG.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003sFzTw464lkG.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000003sFzTw464lkG.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000003sFzTw464lkG.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000003sFzTw464lkG.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000003sFzTw464lkG.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000003sFzTw464lkG.jpg">
    </a><br>
成功连接OSS</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004Z1PxH0Z6rAa.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004Z1PxH0Z6rAa.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004Z1PxH0Z6rAa.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000004Z1PxH0Z6rAa.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000004Z1PxH0Z6rAa.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000004Z1PxH0Z6rAa.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000004Z1PxH0Z6rAa.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000004Z1PxH0Z6rAa.jpg">
    </a></p>
<p>成功连接数据库</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000gvamO2j3fGn.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000gvamO2j3fGn.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000gvamO2j3fGn.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000000gvamO2j3fGn.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000000gvamO2j3fGn.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000000gvamO2j3fGn.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000000gvamO2j3fGn.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000000gvamO2j3fGn.jpg">
    </a></p>
<p>小程序token，接管小程序</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004Cvnua1PrkwC.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004Cvnua1PrkwC.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004Cvnua1PrkwC.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000004Cvnua1PrkwC.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000004Cvnua1PrkwC.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000004Cvnua1PrkwC.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000004Cvnua1PrkwC.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000004Cvnua1PrkwC.jpg">
    </a></p>
<p>达梦数据库是国产化的关系型数据库，使用下面工具可以进行连接</p>
<p><a href="https://github.com/864381832/x-RdbmsSyncTool/releases/tag/v0.0.3" target="_blank" rel="noopener noreferrer">https://github.com/864381832/x-RdbmsSyncTool/releases/tag/v0.0.3</a></p>
<h2 id="3nday" class="headerLink">
    <a href="#3nday" class="header-mark"></a>3、Nday</h2><h2 id="31yongyounc-jsinvoke-rce漏洞" class="headerLink">
    <a href="#31yongyounc-jsinvoke-rce%e6%bc%8f%e6%b4%9e" class="header-mark"></a>3.1、yongyouNC jsInvoke rce漏洞</h2><p>漏洞利用方法，通过Java反射机制创建一个javax.naming.InitialContext对象，并使用LDAP协议连接到指定的IP地址和端口，然后调用&quot;nc.itf.iufo.IBaseSPService&quot;服务中的&quot;saveXStreamConfig&quot;方法，接受对象和字符串作为参数，达到命令执行的效果。</p>
<p>命令执行成功，但是目标系统存在杀软，无法直接上传文件</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001DnHPO1qkQ0j.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001DnHPO1qkQ0j.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001DnHPO1qkQ0j.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000001DnHPO1qkQ0j.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000001DnHPO1qkQ0j.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000001DnHPO1qkQ0j.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000001DnHPO1qkQ0j.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000001DnHPO1qkQ0j.jpg">
    </a></p>
<h3 id="311certutil" class="headerLink">
    <a href="#311certutil" class="header-mark"></a>3.1.1、certutil</h3><p>certutil 是 Windows 操作系统中的一个命令行工具，主要用于处理证书和加密相关的操作，利用 certutil的解密操作可以绕过杀软。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">echo bash64编码后的免杀马 &gt; myfile.jsp
</span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004RWxGH2Yf0KH.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004RWxGH2Yf0KH.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004RWxGH2Yf0KH.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000004RWxGH2Yf0KH.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000004RWxGH2Yf0KH.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000004RWxGH2Yf0KH.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000004RWxGH2Yf0KH.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000004RWxGH2Yf0KH.jpg">
    </a></p>
<p>使用certutil进行解码</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">certutil</span> <span class="o">-</span><span class="nx">decode</span> <span class="nx">木马相对路径</span> <span class="nx">解码后的木马相对路径</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003IdzpK3nOno4.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003IdzpK3nOno4.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003IdzpK3nOno4.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000003IdzpK3nOno4.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000003IdzpK3nOno4.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000003IdzpK3nOno4.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000003IdzpK3nOno4.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000003IdzpK3nOno4.jpg">
    </a></p>
<p>冰蝎上线并上线CS</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004LsTUW1JYoUA.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004LsTUW1JYoUA.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004LsTUW1JYoUA.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000004LsTUW1JYoUA.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000004LsTUW1JYoUA.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000004LsTUW1JYoUA.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000004LsTUW1JYoUA.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000004LsTUW1JYoUA.jpg">
    </a></p>
<h2 id="32若依二开" class="headerLink">
    <a href="#32%e8%8b%a5%e4%be%9d%e4%ba%8c%e5%bc%80" class="header-mark"></a>3.2、若依二开</h2><p>shiro的洞修复了，找到一个前台信息泄露漏洞</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000000lJrTl4LbWuV.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000000lJrTl4LbWuV.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000000lJrTl4LbWuV.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000000lJrTl4LbWuV.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000000lJrTl4LbWuV.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000000lJrTl4LbWuV.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000000lJrTl4LbWuV.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000000lJrTl4LbWuV.jpg">
    </a></p>
<p>通过获取到的用户名，使用弱口令进入后台，普通权限</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD00000167p4B1b1XNw.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD00000167p4B1b1XNw.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD00000167p4B1b1XNw.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD00000167p4B1b1XNw.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD00000167p4B1b1XNw.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD00000167p4B1b1XNw.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD00000167p4B1b1XNw.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD00000167p4B1b1XNw.jpg">
    </a></p>
<p>再次对公告发布人员猜解密码，成功登录后台，多了系统管理权限，直接添加用户赋予最高权限</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001iLIYY2zddj4.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001iLIYY2zddj4.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001iLIYY2zddj4.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000001iLIYY2zddj4.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000001iLIYY2zddj4.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000001iLIYY2zddj4.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000001iLIYY2zddj4.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000001iLIYY2zddj4.jpg">
    </a></p>
<p>新增用户登录，发现定时任务功能，直接使用定时任务执行命令</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000001GVVqj3S39kT.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000001GVVqj3S39kT.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000001GVVqj3S39kT.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000001GVVqj3S39kT.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000001GVVqj3S39kT.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000001GVVqj3S39kT.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000001GVVqj3S39kT.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000001GVVqj3S39kT.jpg">
    </a></p>
<h2 id="33shiro" class="headerLink">
    <a href="#33shiro" class="header-mark"></a>3.3、shiro</h2><p>目标路径在被访问时，会先跳转到统一认证登录，导致大部分都忽视了该路径是存在shiro反序列化漏洞的</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000004bjLfY2HcCc6.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000004bjLfY2HcCc6.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000004bjLfY2HcCc6.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000004bjLfY2HcCc6.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000004bjLfY2HcCc6.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000004bjLfY2HcCc6.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000004bjLfY2HcCc6.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000004bjLfY2HcCc6.jpg">
    </a></p>
<p>本着试一试的心态进行了shiro的扫描，默认密钥，直接获取权限</p>
<p><a class="lightgallery" href="https://qqq.gtimg.cn/music/photo_new/T053XD000003lEdr01lugWj.jpg" title="https://qqq.gtimg.cn/music/photo_new/T053XD000003lEdr01lugWj.jpg" data-thumbnail="https://qqq.gtimg.cn/music/photo_new/T053XD000003lEdr01lugWj.jpg">
        <img
            
            loading="lazy"
            src="https://qqq.gtimg.cn/music/photo_new/T053XD000003lEdr01lugWj.jpg"
            srcset="https://qqq.gtimg.cn/music/photo_new/T053XD000003lEdr01lugWj.jpg, https://qqq.gtimg.cn/music/photo_new/T053XD000003lEdr01lugWj.jpg 1.5x, https://qqq.gtimg.cn/music/photo_new/T053XD000003lEdr01lugWj.jpg 2x"
            sizes="auto"
            alt="https://qqq.gtimg.cn/music/photo_new/T053XD000003lEdr01lugWj.jpg">
    </a></p></div>

        <div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2024-02-11</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span><a class="link-to-mardown" href=/%E6%94%BB%E9%98%B2%E5%AE%9E%E6%88%98%E5%A4%96%E7%BD%91%E7%AA%81%E7%A0%B4/index.md target="_blank" rel="noopener noreferrer">阅读原始文档</a>
                    </span></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/">信息收集</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/%E4%BB%BB%E6%84%8F%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98%E6%80%9D%E8%B7%AF/" class="prev" rel="prev" title="任意用户登录漏洞挖掘思路"><i class="fas fa-angle-left fa-fw"></i>任意用户登录漏洞挖掘思路</a>
            <a href="/%E6%94%AF%E4%BB%98%E7%B1%BB%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93/" class="next" rel="next" title="支付类漏洞挖掘技巧总结">支付类漏洞挖掘技巧总结<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
        </main><footer class="footer">
        <div class="footer-container"><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2015 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://www.bysec.cn/" target="_blank" rel="noopener noreferrer">bysec</a></span><span class="icp-splitter">&nbsp;|&nbsp;</span><br class="icp-br"/>
                    <span class="icp"><a href="http://beian.miit.gov.cn/" target="_blank">粤ICP备2024294125号</a></span></div>
            <div class="footer-line"></div>
            <div class="footer-line">
            </div>
        </div></footer></div>

    <div id="fixed-buttons"><a href="#back-to-top" id="back-to-top-button" class="fixed-button" title="回到顶部">
            <i class="fas fa-arrow-up fa-fw"></i>
        </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
            <i class="fas fa-comment fa-fw"></i>
        </a>
    </div><div id="cookieconsent-container"></div><div class="assets"><link rel="stylesheet" href="/lib/lightgallery/lightgallery.min.css"><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/katex/copy-tex.min.css">
        <noscript><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"></noscript><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{},"cookieconsent":{"content":{"dismiss":"同意","link":"了解更多","message":"本网站使用 Cookies 来改善您的浏览体验."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"distance":null,"findAllMatches":null,"fuseIndexURL":"/index.json","highlightTag":"em","ignoreFieldNorm":null,"ignoreLocation":null,"isCaseSensitive":null,"location":null,"maxResultLength":10,"minMatchCharLength":null,"noResultsFound":"没有找到结果","snippetLength":50,"threshold":null,"type":"fuse","useExtendedSearch":null},"twemoji":true};</script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/fuse/fuse.min.js"></script><script type="text/javascript" src="/lib/twemoji/twemoji.min.js" defer></script><script type="text/javascript" src="/js/twemoji.min.js" defer></script><script type="text/javascript" src="/lib/lightgallery/lightgallery.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lg-thumbnail.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lg-zoom.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js" defer></script><script type="text/javascript" src="/lib/katex/auto-render.min.js" defer></script><script type="text/javascript" src="/lib/katex/copy-tex.min.js" defer></script><script type="text/javascript" src="/lib/katex/mhchem.min.js" defer></script><script type="text/javascript" src="/js/katex.min.js" defer></script><script type="text/javascript" src="/lib/cookieconsent/cookieconsent.min.js" defer></script><script type="text/javascript" src="/js/cookieconsent.min.js" defer></script><script type="text/javascript" src="/js/theme.min.js" defer></script></div>
</body>

</html>